
/* /web/static/src/js/services/session.js defined in bundle 'web.assets_frontend' */
odoo.define('web.session',function(require){"use strict";var Session=require('web.Session');var modules=odoo._modules;var session=new Session(undefined,undefined,{modules:modules,use_cors:false});session.is_bound=session.session_bind();return session;});;

/* /website/static/src/js/content/website_root.js defined in bundle 'web.assets_frontend' */
odoo.define('root.widget',function(require){'use strict';require('web.dom_ready');var websiteRootData=require('website.WebsiteRoot');var websiteRoot=new websiteRootData.WebsiteRoot(null);return websiteRoot.attachTo(document.body).then(function(){return websiteRoot;});});odoo.define('website.WebsiteRoot',function(require){'use strict';var ajax=require('web.ajax');var core=require('web.core');var Dialog=require('web.Dialog');var utils=require('web.utils');var BodyManager=require('web_editor.BodyManager');var weContext=require('web_editor.context');var rootWidget=require('web_editor.root_widget');var sAnimation=require('website.content.snippets.animation');require("website.content.zoomodoo");var _t=core._t;var websiteRootRegistry=new rootWidget.RootWidgetRegistry();var lang=utils.get_cookie('frontend_lang')||weContext.get().lang;var localeDef=ajax.loadJS('/web/webclient/locale/'+lang.replace('-','_'));var WebsiteRoot=BodyManager.extend({events:_.extend({},BodyManager.prototype.events||{},{'click .js_change_lang':'_onLangChangeClick','click .js_publish_management .js_publish_btn':'_onPublishBtnClick','submit .js_website_submit_form':'_onWebsiteFormSubmit','click .js_disable_on_click':'_onDisableOnClick','click .js_multi_website_switch':'_multiWebsiteSwitch','click .js_multi_company_switch':'_multiCompanySwitch',}),custom_events:_.extend({},BodyManager.prototype.custom_events||{},{animation_start_demand:'_onAnimationStartDemand',animation_stop_demand:'_onAnimationStopDemand',main_object_request:'_onMainObjectRequest',ready_to_clean_for_save:'_onAnimationStopDemand',}),init:function(){this._super.apply(this,arguments);this.animations=[];},willStart:function(){return $.when(this._super.apply(this,arguments),localeDef);},start:function(){var defs=[this._super.apply(this,arguments)];defs.push(this._startAnimations());if(!this.$('.js_change_lang').length){var $links=this.$('ul.js_language_selector li a:not([data-oe-id])');var m=$(_.min($links,function(l){return $(l).attr('href').length;})).attr('href');$links.each(function(){var $link=$(this);var t=$link.attr('href');var l=(t===m)?"default":t.split('/')[1];$link.data('lang',l).addClass('js_change_lang');});}
this.$(".o_image[data-mimetype^='image']").each(function(){var $img=$(this);if(/gif|jpe|jpg|png/.test($img.data('mimetype'))&&$img.data('src')){$img.css('background-image',"url('"+$img.data('src')+"')");}});this.$('.zoomable img[data-zoom]').zoomOdoo();if(window.location.hash.indexOf("scrollTop=")>-1){this.el.scrollTop=+window.location.hash.match(/scrollTop=([0-9]+)/)[1];}
if($.fn.placeholder){$('input, textarea').placeholder();}
return $.when.apply($,defs);},_getRegistry:function(){return websiteRootRegistry;},_startAnimations:function(editableMode,$from){var self=this;editableMode=editableMode||false;if($from===undefined){$from=this.$('#wrapwrap');}
this._stopAnimations($from);var defs=_.map(sAnimation.registry,function(Animation,animationName){var selector=Animation.prototype.selector||'';var $target=$from.find(selector).addBack(selector);var defs=_.map($target,function(el){var animation=new Animation(self,editableMode);self.animations.push(animation);return animation.attachTo($(el));});return $.when.apply($,defs);});return $.when.apply($,defs);},_stopAnimations:function($from){var removedAnimations=_.map(this.animations,function(animation){if(!$from||$from.filter(animation.el).length||$from.find(animation.el).length){animation.destroy();return animation;}
return null;});this.animations=_.difference(this.animations,removedAnimations);},_onAnimationStartDemand:function(ev){this._startAnimations(ev.data.editableMode,ev.data.$target).done(ev.data.onSuccess).fail(ev.data.onFailure);},_onAnimationStopDemand:function(ev){this._stopAnimations(ev.data.$target);},_onLangChangeClick:function(ev){ev.preventDefault();var $target=$(ev.target);var redirect={lang:$target.data('lang'),url:encodeURIComponent($target.attr('href').replace(/[&?]edit_translations[^&?]+/,'')),hash:encodeURIComponent(window.location.hash)};window.location.href=_.str.sprintf("/website/lang/%(lang)s?r=%(url)s%(hash)s",redirect);},_onMainObjectRequest:function(ev){var repr=$('html').data('main-object');var m=repr.match(/(.+)\((\d+),(.*)\)/);ev.data.callback({model:m[1],id:m[2]|0,});},_onPublishBtnClick:function(ev){ev.preventDefault();var self=this;var $data=$(ev.currentTarget).parents(".js_publish_management:first");this._rpc({route:$data.data('controller')||'/website/publish',params:{id:+$data.data('id'),object:$data.data('object'),},}).done(function(result){$data.toggleClass("css_unpublished css_published");$data.find('input').prop("checked",result);$data.parents("[data-publish]").attr("data-publish",+result?'on':'off');}).fail(function(err,data){return new Dialog(self,{title:data.data?data.data.arguments[0]:"",$content:$('<div/>',{html:(data.data?data.data.arguments[1]:data.statusText)
+'<br/>'
+_.str.sprintf(_t('It might be possible to edit the relevant items or fix the issue in <a href="%s">the classic Odoo interface</a>'),'/web#return_label=Website&model='+$data.data('object')+'&id='+$data.data('id')),}),}).open();});},_onWebsiteFormSubmit:function(ev){var $buttons=$(ev.currentTarget).find('button[type="submit"], a.a-submit');_.each($buttons,function(btn){var $btn=$(btn);$btn.html('<i class="fa fa-spinner fa-spin"></i> '+$btn.text());$btn.prop('disabled',true);});},_onDisableOnClick:function(ev){$(ev.currentTarget).addClass('disabled');},_multiWebsiteSwitch:function(ev){var website_id_to_switch_to=ev.currentTarget.getAttribute('website-id');var website_domain=ev.currentTarget.getAttribute('domain');var url=$.param.querystring(window.location.href,{'fw':website_id_to_switch_to});if(website_domain&&window.location.hostname!==website_domain){url=new URL(url);url.hostname=website_domain;}
window.location.href=url;},_multiCompanySwitch:function(ev){var company_id_to_switch_to=ev.currentTarget.getAttribute('company-id');this._rpc({model:'res.users',method:'write',args:[odoo.session_info.user_id,{'company_id':parseInt(company_id_to_switch_to,10)}],}).then(function(){window.location.reload(true);});},});return{WebsiteRoot:WebsiteRoot,websiteRootRegistry:websiteRootRegistry,};});;

/* /web_editor/static/src/js/content/body_manager.js defined in bundle 'web.assets_frontend' */
odoo.define('web_editor.BodyManager',function(require){'use strict';var weContext=require('web_editor.context');var rootWidget=require('web_editor.root_widget');var ServiceProviderMixin=require('web.ServiceProviderMixin');var session=require('web.session');var BodyManager=rootWidget.RootWidget.extend(ServiceProviderMixin,{init:function(){this._super.apply(this,arguments);ServiceProviderMixin.init.call(this);},willStart:function(){return $.when(this._super.apply(this,arguments),session.is_bound);},_call_service:function(event){if(event.data.service==='ajax'&&event.data.method==='rpc'){var route=event.data.args[0];if(_.str.startsWith(route,'/web/dataset/call_kw/')){var params=event.data.args[1];var options=event.data.args[2];params.kwargs.context=_.extend({},weContext.get(),params.kwargs.context||{});if(options){params.kwargs.context=_.omit(params.kwargs.context,options.noContextKeys);event.data.args[2]=_.omit(options,'noContextKeys');}
params.kwargs.context=JSON.parse(JSON.stringify(params.kwargs.context));}}
return ServiceProviderMixin._call_service.apply(this,arguments);},});return BodyManager;});;

/* /web_editor/static/src/js/root_widget.js defined in bundle 'web.assets_frontend' */
odoo.define('web_editor.root_widget',function(require){'use strict';var Class=require('web.Class');var dom=require('web.dom');var mixins=require('web.mixins');var session=require('web.session');var Widget=require('web.Widget');var RootWidget=Widget.extend({custom_events:_.extend({},Widget.prototype.custom_events||{},{registry_update:'_onRegistryUpdate',get_session:'_onGetSession',}),init:function(){this._super.apply(this,arguments);this._widgets=[];this._listenToUpdates=false;this._getRegistry().setParent(this);},start:function(){var defs=[this._super.apply(this,arguments)];defs.push(this._attachComponents());this._listenToUpdates=true;return $.when.apply($,defs);},_attachComponent:function(childInfo,$from){var self=this;var $elements=dom.cssFind($from||this.$el,childInfo.selector);var defs=_.map($elements,function(element){var w=new childInfo.Widget(self);self._widgets.push(w);return w.attachTo(element);});return $.when.apply($,defs);},_attachComponents:function($from){var self=this;var childInfos=this._getRegistry().get();var defs=_.map(childInfos,function(childInfo){return self._attachComponent(childInfo,$from);});return $.when.apply($,defs);},_getRegistry:function(){},_onGetSession:function(event){if(event.data.callback){event.data.callback(session);}},_onRegistryUpdate:function(ev){ev.stopPropagation();if(this._listenToUpdates){this._attachComponent(ev.data);}},});var RootWidgetRegistry=Class.extend(mixins.EventDispatcherMixin,{init:function(){mixins.EventDispatcherMixin.init.call(this);this._registry=[];},add:function(Widget,selector){var registryInfo={Widget:Widget,selector:selector,};this._registry.push(registryInfo);this.trigger_up('registry_update',registryInfo);},get:function(){return this._registry;},});return{RootWidget:RootWidget,RootWidgetRegistry:RootWidgetRegistry,};});;

/* /portal/static/src/js/portal.js defined in bundle 'web.assets_frontend' */
odoo.define('portal.portal',function(require){'use strict';require('web.dom_ready');if(!$('.o_portal').length){return $.Deferred().reject("DOM doesn't contain '.o_portal'");}
if($('.o_portal_details').length){var state_options=$("select[name='state_id']:enabled option:not(:first)");$('.o_portal_details').on('change',"select[name='country_id']",function(){var select=$("select[name='state_id']");state_options.detach();var displayed_state=state_options.filter("[data-country_id="+($(this).val()||0)+"]");var nb=displayed_state.appendTo(select).show().size();select.parent().toggle(nb>=1);});$('.o_portal_details').find("select[name='country_id']").change();}
if($('.o_portal_search_panel').length){$('.o_portal_search_panel .search-submit').click(function(){var search=$.deparam(window.location.search.substring(1));search.search_in=$(".o_portal_search_panel .dropdown-item.active").attr("href").replace("#","");search.search=$(".o_portal_search_panel input[name='search']").val();window.location.search=$.param(search);});$('.o_portal_search_panel .dropdown-menu').find('.dropdown-item').click(function(e){e.preventDefault();$(this).parents('.dropdown-menu').find('.dropdown-item').removeClass('active');$(this).closest('.dropdown-item').addClass('active');var label=$(this).clone();label.find('span.nolabel').remove();$(".o_portal_search_panel span#search_label").text(label.text());});$('.o_portal_search_panel .dropdown-menu').find('.dropdown-item.active').trigger('click');$(".o_portal_search_panel input[name='search']").on('keyup',function(e){if(e.keyCode===13){$('.o_portal_search_panel .search-submit').trigger('click');}});}});;

/* /portal/static/src/js/portal_tour.js defined in bundle 'web.assets_frontend' */
odoo.define('portal.tour',function(require){'use strict';var tour=require("web_tour.tour");tour.register('portal_load_homepage',{test:true,url:'/my',},[{content:"Check portal is loaded",trigger:'a[href*="/my/account"]:contains("Edit"):first',},{content:"Load my account details",trigger:'input[value="Joel Willis"]'}]);});;

/* /portal/static/src/js/portal_chatter.js defined in bundle 'web.assets_frontend' */
odoo.define('portal.chatter',function(require){'use strict';var base=require('web_editor.base');var ajax=require('web.ajax');var core=require('web.core');var dom=require('web.dom');var Widget=require('web.Widget');var rpc=require('web.rpc');var time=require('web.time');var qweb=core.qweb;var _t=core._t;var PortalChatter=Widget.extend({template:'portal.chatter',events:{"click .o_portal_chatter_pager_btn":'_onClickPager','click .o_portal_chatter_composer_btn':'_onSubmitButtonClick',},init:function(parent,options){this._super.apply(this,arguments);this.options=_.defaults(options||{},{'allow_composer':true,'display_composer':false,'csrf_token':odoo.csrf_token,'message_count':0,'pager_step':10,'pager_scope':5,'pager_start':1,'is_user_public':true,'is_user_publisher':false,'domain':[],});this.set('messages',[]);this.set('message_count',this.options['message_count']);this.set('pager',{});this.set('domain',this.options['domain']);this._current_page=this.options['pager_start'];this._onSubmitButtonClick=dom.makeButtonHandler(this._onSubmitButtonClick);},willStart:function(){var self=this;return $.when(rpc.query({route:'/mail/chatter_init',params:this._messageFetchPrepareParams()}),this._loadTemplates()).then(function(result){self.result=result;self.options=_.extend(self.options,self.result['options']||{});return result;});},start:function(){this.on("change:messages",this,this._renderMessages);this.on("change:message_count",this,function(){this._renderMessageCount();this.set('pager',this._pager(this._current_page));});this.on("change:pager",this,this._renderPager);this.on("change:domain",this,this._onChangeDomain);this.set('message_count',this.options['message_count']);this.set('messages',this.preprocessMessages(this.result['messages']));return this._super.apply(this,arguments);},messageFetch:function(domain){var self=this;return rpc.query({route:'/mail/chatter_fetch',params:self._messageFetchPrepareParams()}).then(function(result){self.set('messages',self.preprocessMessages(result['messages']));self.set('message_count',result['message_count']);});},preprocessMessages:function(messages){_.each(messages,function(m){m['author_avatar_url']=_.str.sprintf('/web/image/%s/%s/author_avatar/50x50','mail.message',m.id);m['published_date_str']=_.str.sprintf(_t('Published on %s'),moment(time.str_to_datetime(m.date)).format('MMMM Do YYYY, h:mm:ss a'));});return messages;},_changeCurrentPage:function(page,domain){this._current_page=page;var d=domain?domain:_.clone(this.get('domain'));this.set('domain',d);},_loadTemplates:function(){return ajax.loadXML('/portal/static/src/xml/portal_chatter.xml',qweb);},_messageFetchPrepareParams:function(){var self=this;var data={'res_model':this.options['res_model'],'res_id':this.options['res_id'],'limit':this.options['pager_step'],'offset':(this._current_page-1)*this.options['pager_step'],'allow_composer':this.options['allow_composer'],};if(self.options['token']){data['token']=self.options['token'];}
if(this.get('domain')){data['domain']=this.get('domain');}
return data;},_pager:function(page){var page=page||1;var total=this.get('message_count');var scope=this.options['pager_scope'];var step=this.options['pager_step'];var page_count=Math.ceil(parseFloat(total)/step);var page=Math.max(1,Math.min(parseInt(page),page_count));scope-=1;var pmin=Math.max(page-parseInt(Math.floor(scope/2)),1);var pmax=Math.min(pmin+scope,page_count);if(pmax-scope>0){pmin=pmax-scope;}else{pmin=1;}
var pages=[];_.each(_.range(pmin,pmax+1),function(index){pages.push(index);});return{"page_count":page_count,"offset":(page-1)*step,"page":page,"page_start":pmin,"page_previous":Math.max(pmin,page-1),"page_next":Math.min(pmax,page+1),"page_end":pmax,"pages":pages};},_renderMessages:function(){this.$('.o_portal_chatter_messages').html(qweb.render("portal.chatter_messages",{widget:this}));},_renderMessageCount:function(){this.$('.o_message_counter').replaceWith(qweb.render("portal.chatter_message_count",{widget:this}));},_renderPager:function(){this.$('.o_portal_chatter_pager').replaceWith(qweb.render("portal.pager",{widget:this}));},_onChangeDomain:function(){var self=this;this.messageFetch().then(function(){var p=self._current_page;self.set('pager',self._pager(p));});},_onClickPager:function(ev){ev.preventDefault();var page=$(ev.currentTarget).data('page');this._changeCurrentPage(page);},_onSubmitButtonClick:function(){return $.Deferred();},});base.ready().then(function(){$('.o_portal_chatter').each(function(index){var $elem=$(this);var mail_thread=new PortalChatter(null,$elem.data());mail_thread.appendTo($elem);});});return{PortalChatter:PortalChatter,};});;

/* /portal/static/src/js/portal_signature.js defined in bundle 'web.assets_frontend' */
odoo.define('portal.signature_form',function(require){"use strict";require('web_editor.ready');var ajax=require('web.ajax');var base=require('web_editor.base');var core=require('web.core');var Widget=require("web.Widget");var rpc=require("web.rpc");var qweb=core.qweb;var SignatureForm=Widget.extend({template:'portal.portal_signature',events:{'click #o_portal_sign_clear':'clearSign','click .o_portal_sign_submit':'submitSign','init #o_portal_sign_accept':'initSign',},init:function(parent,options){this._super.apply(this,arguments);this.options=_.extend(options||{},{csrf_token:odoo.csrf_token,});},willStart:function(){return this._loadTemplates();},start:function(){this.initSign();},initSign:function(){this.$("#o_portal_signature").empty().jSignature({'decor-color':'#D1D0CE','color':'#000','background-color':'#fff','height':'142px','width':'100%',});this.empty_sign=this.$("#o_portal_signature").jSignature('getData','image');},clearSign:function(){this.$("#o_portal_signature").jSignature('reset');},submitSign:function(ev){ev.preventDefault();var self=this;var $confirm_btn=self.$el.find('button[type="submit"]');var partner_name=self.$("#o_portal_sign_name").val();var signature=self.$("#o_portal_signature").jSignature('getData','image');var is_empty=signature?this.empty_sign[1]===signature[1]:true;this.$('#o_portal_sign_name').parent().toggleClass('o_has_error',!partner_name).find('.form-control, .custom-select').toggleClass('is-invalid',!partner_name);this.$('#o_portal_sign_draw').toggleClass('bg-danger text-white',is_empty);if(is_empty||!partner_name){return false;}
$confirm_btn.prepend('<i class="fa fa-spinner fa-spin"></i> ');$confirm_btn.attr('disabled',true);return rpc.query({route:this.options.callUrl,params:{'res_id':this.options.resId,'access_token':this.options.accessToken,'partner_name':partner_name,'signature':signature?signature[1]:false,},}).then(function(data){self.$('.fa-spinner').remove();if(data.error){self.$('.o_portal_sign_error_msg').remove();$confirm_btn.before(qweb.render('portal.portal_signature_error',{message:data.error}));$confirm_btn.attr('disabled',false);}
else if(data.success){$confirm_btn.remove();var $success=qweb.render("portal.portal_signature_success",{widget:data});self.$('#o_portal_sign_draw').parent().replaceWith($success);}
if(data.force_refresh){if(data.redirect_url){window.location=data.redirect_url;}else{window.location.reload();}}});},_loadTemplates:function(){return ajax.loadXML('/portal/static/src/xml/portal_signature.xml',qweb);},});base.ready().then(function(){$('.o_portal_signature_form').each(function(){var hasBeenReset=false;var $elem=$(this);var form=new SignatureForm(null,$elem.data());form.appendTo($elem);$elem.parents('.modal').on('shown.bs.modal',function(ev){$elem.trigger('resize');if(!hasBeenReset){hasBeenReset=true;form.initSign();}});});});return{SignatureForm:SignatureForm,};});;

/* /portal/static/src/js/portal_sidebar.js defined in bundle 'web.assets_frontend' */
odoo.define('portal.PortalSidebar',function(require){"use strict";var config=require('web.config');var core=require('web.core');var Widget=require('web.Widget');var time=require('web.time');var _t=core._t;var PortalSidebar=Widget.extend({start:function(){var self=this;this._super.apply(this,arguments);this._setDelayLabel();},_setDelayLabel:function(){var $sidebarTimeago=this.$el.find('.o_portal_sidebar_timeago');_.each($sidebarTimeago,function(el){var dateTime=moment(time.auto_str_to_date($(el).attr('datetime'))),today=moment().startOf('day'),diff=dateTime.diff(today,'days',true),displayStr;if(diff===0){displayStr=_t('Due today');}else if(diff>0){displayStr=_.str.sprintf(_t('Due in %d days'),Math.abs(diff));}else{displayStr=_.str.sprintf(_t('%d days overdue'),Math.abs(diff));}
$(el).text(displayStr);});},_printIframeContent:function(href){if($.browser.mozilla){window.open(href,'_blank');return;}
if(!this.printContent){this.printContent=$('<iframe id="print_iframe_content" src="'+href+'" style="display:none"></iframe>');this.$el.append(this.printContent);this.printContent.on('load',function(){$(this).get(0).contentWindow.print();});}else{this.printContent.get(0).contentWindow.print();}},});return PortalSidebar;});;

/* /auth_signup/static/src/js/signup.js defined in bundle 'web.assets_frontend' */
odoo.define('auth_signup.signup',function(require){'use strict';var base=require('web_editor.base');base.ready().then(function(){if($('.oe_signup_form').length>0){$('.oe_signup_form').on('submit',function(ev){var $form=$(ev.currentTarget);var $btn=$form.find('.oe_login_buttons > button[type="submit"]');$btn.attr('disabled','disabled');$btn.prepend('<i class="fa fa-refresh fa-spin"/> ');});}});});;

/* /website/static/src/js/utils.js defined in bundle 'web.assets_frontend' */
odoo.define('website.utils',function(require){'use strict';var ajax=require('web.ajax');var core=require('web.core');var qweb=core.qweb;function autocompleteWithPages(self,$input){$input.autocomplete({source:function(request,response){return self._rpc({model:'website',method:'search_pages',args:[null,request.term],kwargs:{limit:15,},}).then(function(exists){var rs=_.map(exists,function(r){return r.loc;});response(rs);});},});}
function prompt(options,_qweb){if(typeof options==='string'){options={text:options};}
var xmlDef;if(_.isUndefined(_qweb)){_qweb='website.prompt';xmlDef=ajax.loadXML('/website/static/src/xml/website.xml',core.qweb);}
options=_.extend({window_title:'',field_name:'','default':'',init:function(){},},options||{});var type=_.intersection(Object.keys(options),['input','textarea','select']);type=type.length?type[0]:'input';options.field_type=type;options.field_name=options.field_name||options[type];var def=$.Deferred();$.when(xmlDef).then(function(){var dialog=$(qweb.render(_qweb,options)).appendTo('body');options.$dialog=dialog;var field=dialog.find(options.field_type).first();field.val(options['default']);field.fillWith=function(data){if(field.is('select')){var select=field[0];data.forEach(function(item){select.options[select.options.length]=new window.Option(item[1],item[0]);});}else{field.val(data);}};var init=options.init(field,dialog);$.when(init).then(function(fill){if(fill){field.fillWith(fill);}
dialog.modal('show');field.focus();dialog.on('click','.btn-primary',function(){var backdrop=$('.modal-backdrop');def.resolve(field.val(),field,dialog);dialog.modal('hide').remove();backdrop.remove();});});dialog.on('hidden.bs.modal',function(){var backdrop=$('.modal-backdrop');def.reject();dialog.remove();backdrop.remove();});if(field.is('input[type="text"], select')){field.keypress(function(e){if(e.which===13){e.preventDefault();dialog.find('.btn-primary').trigger('click');}});}});return def;}
return{autocompleteWithPages:autocompleteWithPages,prompt:prompt,};});;

/* /website/static/src/js/website.js defined in bundle 'web.assets_frontend' */
odoo.define('website.website',function(require){'use strict';var weContext=require('web_editor.context');var weGetContext=weContext.get;weContext.get=function(context){var html=document.documentElement;return _.extend({website_id:html.getAttribute('data-website-id')|0,},weGetContext(context),context);};});odoo.define('website.website_modal',function(require){'use strict';require('web.dom_ready');$('body').on('shown.bs.modal',function(e){$(e.target).addClass('modal_shown');});});;

/* /website/static/src/js/content/compatibility.js defined in bundle 'web.assets_frontend' */
odoo.define('website.content.compatibility',function(require){'use strict';require('web.dom_ready');var browser=_.findKey($.browser,function(v){return v===true;});if($.browser.mozilla&&+$.browser.version.replace(/^([0-9]+\.[0-9]+).*/,'\$1')<20){browser='msie';}
browser+=(','+$.browser.version);var mobileRegex=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i;if(mobileRegex.test(window.navigator.userAgent.toLowerCase())){browser+=',mobile';}
document.documentElement.setAttribute('data-browser',browser);var htmlStyle=document.documentElement.style;var isFlexSupported=(('flexWrap'in htmlStyle)||('WebkitFlexWrap'in htmlStyle)||('msFlexWrap'in htmlStyle));if(!isFlexSupported){document.documentElement.setAttribute('data-no-flex','');}
return{browser:browser,isFlexSupported:isFlexSupported,};});;

/* /website/static/src/js/content/lazy_template_call.js defined in bundle 'web.assets_frontend' */
odoo.define('website.content.lazy_template_call',function(require){'use strict';var Widget=require('web.Widget');var websiteRootData=require('website.WebsiteRoot');var LazyTemplateRenderer=Widget.extend({start:function(){var $oeCalls=this.$('[data-oe-call]');var oeCalls=_.uniq($oeCalls.map(function(){return $(this).data('oe-call');}).get());if(!oeCalls.length){return $.when(this._super.apply(this,arguments));}
var def=this._rpc({route:'/website/multi_render',params:{ids_or_xml_ids:oeCalls,},}).then(function(data){_.each(data,function(d,k){var $data=$(d).addClass('o_block_'+k);$oeCalls.filter('[data-oe-call="'+k+'"]').each(function(){$(this).replaceWith($data.clone());});});});return $.when(this._super.apply(this,arguments),def);},});websiteRootData.websiteRootRegistry.add(LazyTemplateRenderer,'#wrapwrap');return LazyTemplateRenderer;});;

/* /website/static/src/js/content/menu.js defined in bundle 'web.assets_frontend' */
odoo.define('website.content.menu',function(require){'use strict';var dom=require('web.dom');var sAnimation=require('website.content.snippets.animation');sAnimation.registry.affixMenu=sAnimation.Class.extend({selector:'header.o_affix_enabled',start:function(){var def=this._super.apply(this,arguments);if(this.editableMode){return def;}
var self=this;this.$headerClone=this.$target.clone().addClass('o_header_affix affix').removeClass('o_affix_enabled');this.$headerClone.insertAfter(this.$target);this.$headers=this.$target.add(this.$headerClone);this.$dropdowns=this.$headers.find('.dropdown');this.$dropdownMenus=this.$headers.find('.dropdown-menu');this.$navbarCollapses=this.$headers.find('.navbar-collapse');_.each(this.$headerClone.find('[data-toggle="collapse"]'),function(el){var $source=$(el);var targetIDSelector=$source.attr('data-target');var $target=self.$headerClone.find(targetIDSelector);$source.attr('data-target',targetIDSelector+'_clone');$target.attr('id',targetIDSelector.substr(1)+'_clone');});$(window).on('resize.affixMenu scroll.affixMenu',_.throttle(this._onWindowUpdate.bind(this),200));setTimeout(this._onWindowUpdate.bind(this),0);return def;},destroy:function(){if(this.$headerClone){this.$headerClone.remove();$(window).off('.affixMenu');}
this._super.apply(this,arguments);},_onWindowUpdate:function(){if(this.$navbarCollapses.hasClass('show')){return;}
var wOffset=$(window).scrollTop();var hOffset=this.$target.scrollTop();this.$headerClone.toggleClass('affixed',wOffset>(hOffset+300));this.$dropdowns.add(this.$dropdownMenus).removeClass('show');this.$navbarCollapses.removeClass('show').attr('aria-expanded',false);},});sAnimation.registry.autohideMenu=sAnimation.Class.extend({selector:'header #top_menu',start:function(){var self=this;var defs=[this._super.apply(this,arguments)];this.noAutohide=this.$el.closest('.o_no_autohide_menu').length;if(!this.noAutohide){var $navbar=this.$el.closest('.navbar');_.each($navbar.find('img'),function(img){if(img.complete){return;}
var def=$.Deferred();defs.push(def);$(img).one('load',function(){def.resolve();});});var $window=$(window);$window.on('load.autohideMenu',function(){$window.trigger('resize');});}
return $.when.apply($,defs).then(function(){if(!self.noAutohide){dom.initAutoMoreMenu(self.$el,{unfoldable:'.divider, .divider ~ li'});}
self.$el.removeClass('o_menu_loading');});},destroy:function(){this._super.apply(this,arguments);if(!this.noAutohide){$(window).off('.autohideMenu');dom.destroyAutoMoreMenu(this.$el);}},});sAnimation.registry.menuDirection=sAnimation.Class.extend({selector:'header .navbar .nav',events:{'show.bs.dropdown':'_onDropdownShow',},start:function(){this.defaultAlignment=this.$el.is('.ml-auto, .ml-auto ~ *')?'right':'left';return this._super.apply(this,arguments);},_checkOpening:function(alignment,liOffset,liWidth,menuWidth,windowWidth){if(alignment==='left'){return(liOffset+menuWidth<=windowWidth);}else{return(liOffset+liWidth-menuWidth>=0);}},_onDropdownShow:function(ev){var $li=$(ev.target);var $menu=$li.children('.dropdown-menu');var liOffset=$li.offset().left;var liWidth=$li.outerWidth();var menuWidth=$menu.outerWidth();var windowWidth=$(window).outerWidth();$menu.removeClass('dropdown-menu-left dropdown-menu-right');var alignment=this.defaultAlignment;if($li.nextAll(':visible').length===0){alignment='right';}
for(var i=0;i<2;i++){if(!this._checkOpening(alignment,liOffset,liWidth,menuWidth,windowWidth)){alignment=(alignment==='left'?'right':'left');}}
$menu.addClass('dropdown-menu-'+alignment);},});});;

/* /website/static/src/js/content/snippets.animation.js defined in bundle 'web.assets_frontend' */
odoo.define('website.content.snippets.animation',function(require){'use strict';var Class=require('web.Class');var core=require('web.core');var dom=require('web.dom');var mixins=require('web.mixins');var utils=require('web.utils');var Widget=require('web.Widget');var qweb=core.qweb;window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(callback){setTimeout(callback,10);};window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame||function(id){clearTimeout(id);};if(!window.performance||!window.performance.now){window.performance={now:function(){return Date.now();}};}
var AnimationEffect=Class.extend(mixins.ParentedMixin,{init:function(parent,updateCallback,startEvents,$startTarget,options){mixins.ParentedMixin.init.call(this);this.setParent(parent);options=options||{};this._minFrameTime=1000/(options.maxFPS||100);this._updateCallback=updateCallback;this.startEvents=startEvents||'scroll';this.$startTarget=$($startTarget||window);this._getStateCallback=options.getStateCallback||((this.startEvents==='scroll'&&this.$startTarget[0]===window)?function(){return window.pageYOffset;}:false)||((this.startEvents==='resize'&&this.$startTarget[0]===window)?function(){return{width:window.innerWidth,height:window.innerHeight};}:false)||function(){return undefined;};this.endEvents=options.endEvents||false;this.$endTarget=options.$endTarget?$(options.$endTarget):this.$startTarget;this._updateCallback=this._updateCallback.bind(parent);this._getStateCallback=this._getStateCallback.bind(parent);this._uid='_animationEffect'+_.uniqueId();this.startEvents=_processEvents(this.startEvents,this._uid);if(this.endEvents){this.endEvents=_processEvents(this.endEvents,this._uid);}
function _processEvents(events,namespace){events=events.split(' ');return _.each(events,function(e,index){events[index]+=('.'+namespace);}).join(' ');}},destroy:function(){mixins.ParentedMixin.destroy.call(this);this.stop();},start:function(){this._paused=false;this._rafID=window.requestAnimationFrame((function(t){this._update(t);this._paused=true;}).bind(this));if(this.endEvents){this.$startTarget.on(this.startEvents,(function(e){if(this._paused){_.defer(this.play.bind(this,e));}}).bind(this));this.$endTarget.on(this.endEvents,(function(){if(!this._paused){_.defer(this.pause.bind(this));}}).bind(this));}else{var pauseTimer=null;this.$startTarget.on(this.startEvents,_.throttle((function(e){this.play(e);clearTimeout(pauseTimer);pauseTimer=_.delay((function(){this.pause();pauseTimer=null;}).bind(this),2000);}).bind(this),250,{trailing:false}));}},stop:function(){this.$startTarget.off(this.startEvents);if(this.endEvents){this.$endTarget.off(this.endEvents);}
this.pause();},play:function(e){this._newEvent=e;if(!this._paused)return;this._paused=false;this._rafID=window.requestAnimationFrame(this._update.bind(this));this._lastUpdateTimestamp=undefined;},pause:function(){if(this._paused)return;this._paused=true;window.cancelAnimationFrame(this._rafID);this._lastUpdateTimestamp=undefined;},_update:function(timestamp){if(this._paused)return;this._rafID=window.requestAnimationFrame(this._update.bind(this));var elapsedTime=0;if(this._lastUpdateTimestamp){elapsedTime=timestamp-this._lastUpdateTimestamp;if(elapsedTime<this._minFrameTime)return;}
var animationState=this._getStateCallback(elapsedTime,this._newEvent);if(!this._newEvent&&animationState!==undefined&&_.isEqual(animationState,this._animationLastState)){return;}
this._animationLastState=animationState;this._updateCallback(this._animationLastState,elapsedTime,this._newEvent);this._lastUpdateTimestamp=timestamp;this._newEvent=undefined;},});var Animation=Widget.extend({selector:false,events:{},edit_events:{},read_events:{},maxFPS:100,effects:[],init:function(parent,editableMode){this._super.apply(this,arguments);this.editableMode=editableMode;if(editableMode){this.events=_.extend({},this.events||{},this.edit_events||{});}else{this.events=_.extend({},this.events||{},this.read_events||{});}},start:function(){this._prepareEffects();_.each(this._animationEffects,function(effect){effect.start();});return this._super.apply(this,arguments);},destroy:function(){var $oldel=this.$el;this.setElement(null);this._super.apply(this,arguments);this.$el=$oldel;this.el=$oldel[0];this.$target=this.$el;this.target=this.el;},setElement:function(){this._super.apply(this,arguments);this.$target=this.$el;this.target=this.el;},_delegateEvents:function(){var self=this;var originalEvents=this.events;var events={};_.each(this.events,function(method,event){if(typeof method!=='string'){events[event]=method;return;}
var methodOptions=method.split(' ');if(methodOptions.length<=1){events[event]=method;return;}
var isAsync=_.contains(methodOptions,'async');if(!isAsync){events[event]=method;return;}
method=self.proxy(methodOptions[methodOptions.length-1]);if(_.str.startsWith(event,'click')){method=dom.makeButtonHandler(method);}else{method=dom.makeAsyncHandler(method);}
events[event]=method;});this.events=events;this._super.apply(this,arguments);this.events=originalEvents;},_prepareEffects:function(){this._animationEffects=[];var self=this;_.each(this.effects,function(desc){self._addEffect(self[desc.update],desc.startEvents,_findTarget(desc.startTarget),{getStateCallback:desc.getState&&self[desc.getState],endEvents:desc.endEvents||undefined,$endTarget:_findTarget(desc.endTarget),maxFPS:self.maxFPS,});function _findTarget(selector){if(selector){if(selector==='selector'){return self.$target;}
return self.$(selector);}
return undefined;}});},_addEffect:function(updateCallback,startEvents,$startTarget,options){this._animationEffects.push(new AnimationEffect(this,updateCallback,startEvents,$startTarget,options));},});var registry={};registry.slider=Animation.extend({selector:'.carousel',edit_events:{'slid.bs.carousel':'_onEditionSlide',},start:function(){if(!this.editableMode){this.$('img').on('load.slider',this._onImageLoaded.bind(this));this._computeHeights();}
this.$target.carousel();return this._super.apply(this,arguments);},destroy:function(){this._super.apply(this,arguments);this.$('img').off('.slider');this.$target.carousel('pause');this.$target.removeData('bs.carousel');_.each(this.$('.carousel-item'),function(el){$(el).css('min-height','');});},_computeHeights:function(){var maxHeight=0;var $items=this.$('.carousel-item');_.each($items,function(el){var $item=$(el);var isActive=$item.hasClass('active');$item.addClass('active');var height=$item.outerHeight();if(height>maxHeight){maxHeight=height;}
$item.toggleClass('active',isActive);});_.each($items,function(el){$(el).css('min-height',maxHeight);});},_onEditionSlide:function(){this._computeHeights();},_onImageLoaded:function(){this._computeHeights();},});registry.parallax=Animation.extend({selector:'.parallax',effects:[{startEvents:'scroll',update:'_onWindowScroll',}],start:function(){this._rebuild();$(window).on('resize.animation_parallax',_.debounce(this._rebuild.bind(this),500));return this._super.apply(this,arguments);},destroy:function(){this._super.apply(this,arguments);$(window).off('.animation_parallax');},_rebuild:function(){if(!this.$bg||!this.$bg.length){this.$bg=this.$('> .s_parallax_bg');if(!this.$bg.length){this.$bg=$('<span/>',{class:'s_parallax_bg'+(this.$target.hasClass('oe_custom_bg')?' oe_custom_bg':''),}).prependTo(this.$target);}}
var urlTarget=this.$target.css('background-image');if(urlTarget!=='none'){this.$bg.css('background-image',urlTarget);}
this.$target.css('background-image','none');this.speed=parseFloat(this.$target.attr('data-scroll-background-ratio')||0);this.$target.toggleClass('s_parallax_is_fixed',this.speed===1);if(this.speed===0||this.speed===1){this.$bg.css({transform:'',top:'',bottom:''});return;}
this.viewport=document.body.clientHeight-$('#wrapwrap').position().top;this.visible_area=[this.$target.offset().top];this.visible_area.push(this.visible_area[0]+this.$target.innerHeight()+this.viewport);this.ratio=this.speed*(this.viewport/10);this.$bg.css({top:-this.ratio,bottom:-this.ratio,});},_onWindowScroll:function(scrollOffset){if(this.speed===0||this.speed===1){return;}
var vpEndOffset=scrollOffset+this.viewport;if(vpEndOffset>=this.visible_area[0]&&vpEndOffset<=this.visible_area[1]){this.$bg.css('transform','translateY('+_getNormalizedPosition.call(this,vpEndOffset)+'px)');}
function _getNormalizedPosition(pos){var r=(pos-this.visible_area[1])/(this.visible_area[0]-this.visible_area[1]);return Math.round(this.ratio*(2*r-1));}},});registry.share=Animation.extend({selector:'.s_share, .oe_share',start:function(){var url_regex=/(\?(?:|.*&)(?:u|url|body)=)(.*?)(&|#|$)/;var title_regex=/(\?(?:|.*&)(?:title|text|subject)=)(.*?)(&|#|$)/;var url=encodeURIComponent(window.location.href);var title=encodeURIComponent($('title').text());this.$('a').each(function(){var $a=$(this);$a.attr('href',function(i,href){return href.replace(url_regex,function(match,a,b,c){return a+url+c;}).replace(title_regex,function(match,a,b,c){return a+title+c;});});if($a.attr('target')&&$a.attr('target').match(/_blank/i)&&!$a.closest('.o_editable').length){$a.on('click',function(){window.open(this.href,'','menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=550,width=600');return false;});}});return this._super.apply(this,arguments);},});registry.mediaVideo=Animation.extend({selector:'.media_iframe_video',start:function(){var def=this._super.apply(this,arguments);if(this.$target.children('iframe').length){return def;}
this.$target.empty();this.$target.append('<div class="css_editable_mode_display">&nbsp;</div>'+'<div class="media_iframe_video_size">&nbsp;</div>');this.$target.append($('<iframe/>',{src:_.escape(this.$target.data('oe-expression')||this.$target.data('src')),frameborder:'0',allowfullscreen:'allowfullscreen',sandbox:'allow-scripts allow-same-origin',}));return def;},});registry.ul=Animation.extend({selector:'ul.o_ul_folded, ol.o_ul_folded',events:{'click .o_ul_toggle_next':'_onToggleNextClick','click .o_ul_toggle_self':'_onToggleSelfClick',},_onToggleNextClick:function(ev){ev.preventDefault();var $target=$(ev.currentTarget);$target.toggleClass('o_open');$target.closest('li').next().toggleClass('o_close');},_onToggleSelfClick:function(ev){ev.preventDefault();var $target=$(ev.currentTarget);$target.toggleClass('o_open');$target.closest('li').find('ul,ol').toggleClass('o_close');},});registry.gallery=Animation.extend({selector:'.o_gallery:not(.o_slideshow)',xmlDependencies:['/website/static/src/xml/website.gallery.xml'],read_events:{'click img':'_onClickImg',},_onClickImg:function(ev){var self=this;var $cur=$(ev.currentTarget);var urls=[];var idx=undefined;var milliseconds=undefined;var params=undefined;var $images=$cur.closest('.o_gallery').find('img');var size=0.8;var dimensions={min_width:Math.round(window.innerWidth*size*0.9),min_height:Math.round(window.innerHeight*size),max_width:Math.round(window.innerWidth*size*0.9),max_height:Math.round(window.innerHeight*size),width:Math.round(window.innerWidth*size*0.9),height:Math.round(window.innerHeight*size)};$images.each(function(){urls.push($(this).attr('src'));});var $img=($cur.is('img')===true)?$cur:$cur.closest('img');idx=urls.indexOf($img.attr('src'));milliseconds=$cur.closest('.o_gallery').data('interval')||false;params={srcs:urls,index:idx,dim:dimensions,interval:milliseconds,id:_.uniqueId('slideshow_')};var $modal=$(qweb.render('website.gallery.slideshow.lightbox',params));$modal.modal({keyboard:true,backdrop:true,});$modal.on('hidden.bs.modal',function(){$(this).hide();$(this).siblings().filter('.modal-backdrop').remove();$(this).remove();});$modal.find('.modal-content, .modal-body.o_slideshow').css('height','100%');$modal.appendTo(document.body);$modal.one('shown.bs.modal',function(){self.trigger_up('animation_start_demand',{editableMode:false,$target:$modal.find('.modal-body.o_slideshow'),});});},});registry.gallerySlider=Animation.extend({selector:'.o_slideshow',xmlDependencies:['/website/static/src/xml/website.gallery.xml'],start:function(){var self=this;this.$carousel=this.$target.is('.carousel')?this.$target:this.$target.find('.carousel');this.$indicator=this.$carousel.find('.carousel-indicators');this.$prev=this.$indicator.find('li.o_indicators_left').css('visibility','');this.$next=this.$indicator.find('li.o_indicators_right').css('visibility','');var $lis=this.$indicator.find('li[data-slide-to]');var nbPerPage=Math.floor(this.$indicator.width()/$lis.first().outerWidth(true))-3;var realNbPerPage=nbPerPage||1;var nbPages=Math.ceil($lis.length/realNbPerPage);var index;var page;update();function hide(){$lis.each(function(i){$(this).toggleClass('d-none',!(i>=page*nbPerPage&&i<(page+1)*nbPerPage));});if(self.editableMode){return;}
if(page<=0){self.$prev.detach();}else{self.$prev.prependTo(self.$indicator);}
if(page>=nbPages-1){self.$next.detach();}else{self.$next.appendTo(self.$indicator);}}
function update(){index=$lis.index($lis.filter('.active'))||0;page=Math.floor(index/realNbPerPage);hide();}
this.$carousel.on('slide.bs.carousel.gallery_slider',function(){setTimeout(function(){var $item=self.$carousel.find('.carousel-inner .carousel-item-prev, .carousel-inner .carousel-item-next');var index=$item.index();$lis.removeClass('active').filter('[data-slide-to="'+index+'"]').addClass('active');},0);});this.$indicator.on('click.gallery_slider','> li:not([data-slide-to])',function(){page+=($(this).hasClass('o_indicators_left')?-1:1);page=Math.max(0,Math.min(nbPages-1,page));self.$carousel.carousel(page*realNbPerPage);hide();});this.$carousel.on('slid.bs.carousel.gallery_slider',update);return this._super.apply(this,arguments);},destroy:function(){this._super.apply(this,arguments);if(!this.$indicator){return;}
this.$prev.prependTo(this.$indicator);this.$next.appendTo(this.$indicator);this.$carousel.off('.gallery_slider');this.$indicator.off('.gallery_slider');},});registry.socialShare=Animation.extend({selector:'.oe_social_share',xmlDependencies:['/website/static/src/xml/website.share.xml'],read_events:{'mouseenter':'_onMouseEnter',},_bindSocialEvent:function(){this.$('.oe_social_facebook').click($.proxy(this._renderSocial,this,'facebook'));this.$('.oe_social_twitter').click($.proxy(this._renderSocial,this,'twitter'));this.$('.oe_social_linkedin').click($.proxy(this._renderSocial,this,'linkedin'));this.$('.oe_social_google-plus').click($.proxy(this._renderSocial,this,'google-plus'));},_render:function(){this.$target.popover({content:qweb.render('website.social_hover',{medias:this.socialList}),placement:'bottom',container:this.$target,html:true,trigger:'manual',animation:false,}).popover("show");this.$target.off('mouseleave.socialShare').on('mouseleave.socialShare',function(){var self=this;setTimeout(function(){if(!$(".popover:hover").length){$(self).popover('dispose');}},200);});},_renderSocial:function(social){var url=encodeURIComponent(document.URL.split(/[?#]/)[0]);var title=document.title.split(" | ")[0];var hashtags=' #'+document.title.split(" | ")[1].replace(' ','')+' '+this.hashtags;var social_network={'facebook':'https://www.facebook.com/sharer/sharer.php?u='+url,'twitter':'https://twitter.com/intent/tweet?original_referer='+url+'&text='+encodeURIComponent(title+hashtags+' - ')+url,'linkedin':'https://www.linkedin.com/shareArticle?mini=true&url='+url+'&title='+encodeURIComponent(title),'google-plus':'https://plus.google.com/share?url='+url,};if(!_.contains(_.keys(social_network),social)){return;}
var wHeight=500;var wWidth=500;window.open(social_network[social],'','menubar=no, toolbar=no, resizable=yes, scrollbar=yes, height='+wHeight+',width='+wWidth);},_onMouseEnter:function(){var social=this.$target.data('social');this.socialList=social?social.split(','):['facebook','twitter','linkedin','google-plus'];this.hashtags=this.$target.data('hashtags')||'';this._render();this._bindSocialEvent();},});registry.facebookPage=Animation.extend({selector:'.o_facebook_page',start:function(){var def=this._super.apply(this,arguments);var params=_.pick(this.$el.data(),'href','height','tabs','small_header','hide_cover','show_facepile');if(!params.href){return def;}
params.width=utils.confine(Math.floor(this.$el.width()),180,500);var src=$.param.querystring('https://www.facebook.com/plugins/page.php',params);this.$iframe=$('<iframe/>',{src:src,width:params.width,height:params.height,css:{border:'none',overflow:'hidden',},scrolling:'no',frameborder:'0',allowTransparency:'true',});this.$el.append(this.$iframe);return def;},destroy:function(){this._super.apply(this,arguments);if(this.$iframe){this.$iframe.remove();}},});registry._fixAppleCollapse=Animation.extend({selector:'.s_faq_collapse [data-toggle="collapse"]',events:{'click':function(){},},});return{Class:Animation,registry:registry,};});;

/* /website/static/src/js/content/zoomodoo.js defined in bundle 'web.assets_frontend' */
odoo.define('website.content.zoomodoo',function(require){'use strict';var dw,dh,rw,rh,lx,ly;var defaults={linkTag:'a',linkAttribute:'data-zoom-image',event:'click',preventClicks:true,disabledOnMobile:true,beforeShow:$.noop,beforeHide:$.noop,onShow:$.noop,onHide:$.noop,onMove:$.noop};function ZoomOdoo(target,options){this.$target=$(target);this.opts=$.extend({},defaults,options,this.$target.data());if(this.isOpen===undefined){this._init();}}
ZoomOdoo.prototype._init=function(){if(window.outerWidth>467||!this.opts.disabledOnMobile){this.$link=this.$target.find(this.opts.linkTag).length&&this.$target.find(this.opts.linkTag)||this.$target;this.$image=this.$target.find('img').length&&this.$target.find('img')||this.$target;this.$flyout=$('<div class="zoomodoo-flyout" />');var $attach=this.$target;if(this.opts.attach!==undefined&&this.$target.parents(this.opts.attach).length){$attach=this.$target.parents(this.opts.attach);}
$attach.parent().on('mousemove.zoomodoo touchmove.zoomodoo',$.proxy(this._onMove,this));$attach.parent().on('mouseleave.zoomodoo touchend.zoomodoo',$.proxy(this._onLeave,this));this.$target.on(this.opts.event+'.zoomodoo touchstart.zoomodoo',$.proxy(this._onEnter,this));if(this.opts.preventClicks){this.$target.on('click.zoomodoo',function(e){e.preventDefault();});}}};ZoomOdoo.prototype.show=function(e,testMouseOver){var w1,h1,w2,h2;var self=this;if(this.opts.beforeShow.call(this)===false)return;if(!this.isReady){return this._loadImage(this.$link.attr(this.opts.linkAttribute),function(){if(self.isMouseOver||!testMouseOver){self.show(e);}});}
var $attach=this.$target;if(this.opts.attach!==undefined&&this.$target.parents(this.opts.attach).length){$attach=this.$target.parents(this.opts.attach);}
$attach.parent().append(this.$flyout);w1=this.$target.width();h1=this.$target.height();w2=this.$flyout.width();h2=this.$flyout.height();dw=this.$zoom.width()-w2;dh=this.$zoom.height()-h2;if(dw<0)dw=0;if(dh<0)dh=0;rw=dw/w1;rh=dh/h1;this.isOpen=true;this.opts.onShow.call(this);if(e){this._move(e);}};ZoomOdoo.prototype._onEnter=function(e){var touches=e.originalEvent.touches;this.isMouseOver=true;if(!touches||touches.length===1){e.preventDefault();this.show(e,true);}};ZoomOdoo.prototype._onMove=function(e){if(!this.isOpen)return;e.preventDefault();this._move(e);};ZoomOdoo.prototype._onLeave=function(){this.isMouseOver=false;if(this.isOpen){this.hide();}};ZoomOdoo.prototype._onLoad=function(e){if(!e.currentTarget.width)return;this.isReady=true;this.$flyout.html(this.$zoom);if(e.data.call){e.data();}};ZoomOdoo.prototype._loadImage=function(href,callback){var zoom=new Image();this.$zoom=$(zoom).on('load',callback,$.proxy(this._onLoad,this));zoom.style.position='absolute';zoom.src=href;};ZoomOdoo.prototype._move=function(e){if(e.type.indexOf('touch')===0){var touchlist=e.touches||e.originalEvent.touches;lx=touchlist[0].pageX;ly=touchlist[0].pageY;}else{lx=e.pageX||lx;ly=e.pageY||ly;}
var offset=this.$target.offset();var pt=ly-offset.top;var pl=lx-offset.left;var xt=Math.ceil(pt*rh);var xl=Math.ceil(pl*rw);if(xl<0||xt<0||xl>dw||xt>dh){this.hide();}else{var top=xt*-1;var left=xl*-1;this.$zoom.css({top:top,left:left});this.opts.onMove.call(this,top,left);}};ZoomOdoo.prototype.hide=function(){if(!this.isOpen)return;if(this.opts.beforeHide.call(this)===false)return;this.$flyout.detach();this.isOpen=false;this.opts.onHide.call(this);};$.fn.zoomOdoo=function(options){return this.each(function(){var api=$.data(this,'zoomOdoo');if(!api){$.data(this,'zoomOdoo',new ZoomOdoo(this,options));}else if(api.isOpen===undefined){api._init();}});};});;

/* /website/static/src/js/menu/navbar.js defined in bundle 'web.assets_frontend' */
odoo.define('website.navbar',function(require){'use strict';var rootWidget=require('web_editor.root_widget');var concurrency=require('web.concurrency');var Widget=require('web.Widget');var websiteRootData=require('website.WebsiteRoot');var websiteNavbarRegistry=new rootWidget.RootWidgetRegistry();var WebsiteNavbar=rootWidget.RootWidget.extend({events:_.extend({},rootWidget.RootWidget.prototype.events||{},{'click [data-action]':'_onActionMenuClick','mouseover > ul > li.dropdown:not(.show)':'_onMenuHovered','click .o_mobile_menu_toggle':'_onMobileMenuToggleClick',}),custom_events:_.extend({},rootWidget.RootWidget.prototype.custom_events||{},{action_demand:'_onActionDemand',edit_mode:'_onEditMode',ready_to_save:'_onSave',}),init:function(){this._super.apply(this,arguments);this._widgetDefs=[$.Deferred()];},start:function(){var self=this;return this._super.apply(this,arguments).then(function(){self._widgetDefs[0].resolve();});},_attachComponent:function(){var def=this._super.apply(this,arguments);this._widgetDefs.push(def);return def;},_getRegistry:function(){return websiteNavbarRegistry;},_handleAction:function(actionName,params,_i){var self=this;return this._whenReadyForActions().then(function(){var defs=[];_.each(self._widgets,function(w){if(!w.handleAction){return;}
var def=w.handleAction(actionName,params);if(def!==null){defs.push(def);}});if(!defs.length){if(_i>50){console.warn(_.str.sprintf("Action '%s' was not able to be handled.",actionName));return $.Deferred().reject();}
return concurrency.delay(100).then(function(){return self._handleAction(actionName,params,(_i||0)+1);});}
return $.when.apply($,defs);});},_whenReadyForActions:function(){return $.when.apply($,this._widgetDefs);},_onActionMenuClick:function(ev){var $button=$(ev.currentTarget);$button.prop('disabled',true);this._handleAction($button.data('action')).always(function(){$button.prop('disabled',false);});},_onActionDemand:function(ev){var def=this._handleAction(ev.data.actionName,ev.data.params);if(ev.data.onSuccess){def.done(ev.data.onSuccess);}
if(ev.data.onFailure){def.fail(ev.data.onFailure);}},_onEditMode:function(){var self=this;this.$el.addClass('editing_mode');_.delay(function(){self.do_hide();},800);},_onMenuHovered:function(ev){var $opened=this.$('> ul > li.dropdown.show');if($opened.length){$opened.find('.dropdown-toggle').dropdown('toggle');$(ev.currentTarget).find('.dropdown-toggle').dropdown('toggle');}},_onMobileMenuToggleClick:function(){this.$el.parent().toggleClass('o_mobile_menu_opened');},_onSave:function(ev){ev.data.defs.push(this._handleAction('on_save'));},});var WebsiteNavbarActionWidget=Widget.extend({actions:{},handleAction:function(actionName,params){var action=this[this.actions[actionName]];if(action){return $.when(action.apply(this,params||[]));}
return null;},});websiteRootData.websiteRootRegistry.add(WebsiteNavbar,'#oe_main_menu_navbar');return{WebsiteNavbar:WebsiteNavbar,websiteNavbarRegistry:websiteNavbarRegistry,WebsiteNavbarActionWidget:WebsiteNavbarActionWidget,};});;

/* /website/static/src/js/html_editor.test.js defined in bundle 'web.assets_frontend' */
odoo.define('website.test.html_editor',function(require){'use strict';var tour=require('web_tour.tour');var base=require('web_editor.base');tour.register('html_editor_multiple_templates',{test:true,url:'/aboutus',wait_for:base.ready(),},[{content:"enter edit mode",trigger:'a[data-action=edit]',},{content:"drop a snippet",trigger:'#oe_snippets .oe_snippet:has(.s_cover) .oe_snippet_thumbnail',run:"drag_and_drop #oe_structure_test_ui",},{content:"save the page",extra_trigger:'#wrapwrap .s_cover',trigger:"#web_editor-top-edit button[data-action=save]",},{content:"open customize menu",extra_trigger:"body:not(.editor_enable)",trigger:'#customize-menu > a',},{content:"open html editor",trigger:'#html_editor',},{content:"add something in the aboutus view",trigger:'div.ace_line .ace_xml:contains("aboutus")',run:function(){ace.edit('ace-view-editor').getSession().insert({row:3,column:1},'<p>somenewcontent</p>\n');},},{content:"select oe_structure specific view",trigger:'div.ace_line .ace_xml:contains("somenewcontent")',run:function(){var viewId=$('#ace-view-list option:contains("oe_structure")').val();$('#ace-view-list').val(viewId).trigger('change');},},{content:"add something in the oe_structure specific view",extra_trigger:'#ace-view-id:contains("website.aboutus_oe_structure_test_ui")',trigger:'div.ace_line .ace_xml:contains("s_cover")',run:function(){ace.edit('ace-view-editor').getSession().insert({row:2,column:1},'<p>anothernewcontent</p>\n');},},{content:"save the html editor",extra_trigger:'div.ace_line .ace_xml:contains("anothernewcontent")',trigger:".o_ace_view_editor button[data-action=save]",},{content:"check that the page has both modification",extra_trigger:'#wrapwrap:contains("anothernewcontent")',trigger:'#wrapwrap:contains("somenewcontent")',run:function(){},},]);tour.register('test_html_editor_scss',{test:true,url:'/aboutus',wait_for:base.ready(),},[{content:"open customize menu",extra_trigger:'#wrap:visible',trigger:'#customize-menu > a',},{content:"open html editor",trigger:'#html_editor',},{content:"open type switcher",trigger:'.o_ace_type_switcher button',},{content:"select scss files",trigger:'.o_ace_type_switcher_choice[data-type="scss"]',},{content:"select 'website.ui.scss'",trigger:'#ace-scss-list',run:function(){var scssId=$('#ace-scss-list option:contains("website.ui")').val();$('#ace-scss-list').val(scssId).trigger('change');},},{content:"add some scss content in the file",trigger:'div.ace_line .ace_variable:contains("body.o_connected_user")',run:function(){ace.edit('ace-view-editor').getSession().insert({row:2,column:0},'#wrap {display: none;}\n');},},{content:"save the html editor",extra_trigger:'div.ace_line:contains("#wrap {display: none;}")',trigger:".o_ace_view_editor button[data-action=save]",},{content:"check that the scss modification got applied",trigger:'body:has(#wrap:hidden)',run:function(){},},{content:"reset view (after reload, html editor should have been reopened where it was)",trigger:'#ace-view-id button[data-action="reset"]',},{content:"confirm reset warning",trigger:'.modal-footer .btn-primary',},{content:"check that the scss file was reset correctly, wrap content should now be visible again",trigger:'#wrap:visible',run:function(){},},]);});;

/* /website_form/static/src/js/website_form.js defined in bundle 'web.assets_frontend' */
odoo.define('website_form.animation',function(require){'use strict';var core=require('web.core');var time=require('web.time');var ajax=require('web.ajax');var sAnimation=require('website.content.snippets.animation');var _t=core._t;var qweb=core.qweb;sAnimation.registry.form_builder_send=sAnimation.Class.extend({selector:'.s_website_form',willStart:function(){var def;if(!$.fn.datetimepicker){def=ajax.loadJS("/web/static/lib/tempusdominus/tempusdominus.js");}
return $.when(this._super.apply(this,arguments),def);},start:function(editable_mode){if(editable_mode){this.stop();return;}
var self=this;this.templates_loaded=ajax.loadXML('/website_form/static/src/xml/website_form.xml',qweb);this.$target.find('.o_website_form_send').on('click',function(e){self.send(e);});var l10n=_t.database.parameters;var datepickers_options={minDate:moment({y:1900}),maxDate:moment().add(200,"y"),calendarWeeks:true,icons:{time:'fa fa-clock-o',date:'fa-calendar-alt',next:'fa fa-chevron-right',previous:'fa fa-chevron-left',up:'fa fa-chevron-up',down:'fa fa-chevron-down',},locale:moment.locale(),format:time.getLangDatetimeFormat(),};this.$target.find('.o_website_form_datetime').datetimepicker(datepickers_options);datepickers_options.format=time.getLangDateFormat();this.$target.find('.o_website_form_date').datetimepicker(datepickers_options);return this._super.apply(this,arguments);},destroy:function(){this._super.apply(this,arguments);this.$target.find('button').off('click');},send:function(e){e.preventDefault();this.$target.find('.o_website_form_send').off().addClass('disabled');var self=this;self.$target.find('#o_website_form_result').empty();if(!self.check_error_fields({})){self.update_status('invalid');return false;}
this.form_fields=this.$target.serializeArray();_.each(this.$target.find('input[type=file]'),function(input){$.each($(input).prop('files'),function(index,file){self.form_fields.push({name:input.name+'['+index+']',value:file});});});var form_values={};_.each(this.form_fields,function(input){if(input.name in form_values){if(Array.isArray(form_values[input.name])){form_values[input.name].push(input.value);}else{form_values[input.name]=[form_values[input.name],input.value];}}else{if(input.value!==''){form_values[input.name]=input.value;}}});for(var key in this.$target.data()){if(_.str.startsWith(key,'form_field_')){form_values[key.replace('form_field_','')]=this.$target.data(key);}}
ajax.post(this.$target.attr('action')+(this.$target.data('force_action')||this.$target.data('model_name')),form_values).then(function(result_data){result_data=$.parseJSON(result_data);if(!result_data.id){self.update_status('error');if(result_data.error_fields){self.check_error_fields(result_data.error_fields);}}else{var success_page=self.$target.attr('data-success_page');if(success_page){$(window.location).attr('href',success_page);}
else{self.update_status('success');}
self.$target[0].reset();}}).fail(function(result_data){self.update_status('error');});},check_error_fields:function(error_fields){var self=this;var form_valid=true;this.$target.find('.form-field').each(function(k,field){var $field=$(field);var field_name=$field.find('.col-form-label').attr('for');var inputs=$field.find('.o_website_form_input:not(#editable_select)');var invalid_inputs=inputs.toArray().filter(function(input,k,inputs){if(input.required&&input.type==='checkbox'){var checkboxes=_.filter(inputs,function(input){return input.required&&input.type==='checkbox';});return!_.any(checkboxes,function(checkbox){return checkbox.checked;});}else if($(input).hasClass('o_website_form_date')){if(!self.is_datetime_valid(input.value,'date')){return true;}}else if($(input).hasClass('o_website_form_datetime')){if(!self.is_datetime_valid(input.value,'datetime')){return true;}}
return!input.checkValidity();});$field.removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');if(invalid_inputs.length||error_fields[field_name]){$field.addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid')
if(_.isString(error_fields[field_name])){$field.popover({content:error_fields[field_name],trigger:'hover',container:'body',placement:'top'});$field.data("bs.popover").options.content=error_fields[field_name];$field.popover('show');}
form_valid=false;}});return form_valid;},is_datetime_valid:function(value,type_of_date){if(value===""){return true;}else{try{this.parse_date(value,type_of_date);return true;}catch(e){return false;}}},parse_date:function(value,type_of_date,value_if_empty){var date_pattern=time.getLangDateFormat(),time_pattern=time.getLangTimeFormat();var date_pattern_wo_zero=date_pattern.replace('MM','M').replace('DD','D'),time_pattern_wo_zero=time_pattern.replace('HH','H').replace('mm','m').replace('ss','s');switch(type_of_date){case'datetime':var datetime=moment(value,[date_pattern+' '+time_pattern,date_pattern_wo_zero+' '+time_pattern_wo_zero],true);if(datetime.isValid())
return time.datetime_to_str(datetime.toDate());throw new Error(_.str.sprintf(_t("'%s' is not a correct datetime"),value));case'date':var date=moment(value,[date_pattern,date_pattern_wo_zero],true);if(date.isValid())
return time.date_to_str(date.toDate());throw new Error(_.str.sprintf(_t("'%s' is not a correct date"),value));}
return value;},update_status:function(status){var self=this;if(status!=='success'){this.$target.find('.o_website_form_send').on('click',function(e){self.send(e);}).removeClass('disabled');}
var $result=this.$('#o_website_form_result');this.templates_loaded.done(function(){$result.replaceWith(qweb.render("website_form.status_"+status));});},});});;

/* /website_mail/static/src/js/follow.js defined in bundle 'web.assets_frontend' */
odoo.define('website_mail.follow',function(require){'use strict';var sAnimation=require('website.content.snippets.animation');sAnimation.registry.follow=sAnimation.Class.extend({selector:'.js_follow',start:function(){var self=this;this.is_user=false;this._rpc({route:'/website_mail/is_follower',params:{model:this.$target.data('object'),res_id:this.$target.data('id'),},}).always(function(data){self.is_user=data.is_user;self.email=data.email;self.toggle_subscription(data.is_follower,data.email);self.$target.removeClass('d-none');});if(!this.editableMode){$('.js_follow > .input-group-append.d-none').removeClass('d-none');this.$target.find('.js_follow_btn, .js_unfollow_btn').on('click',function(event){event.preventDefault();self._onClick();});}
return this._super.apply(this,arguments);},_onClick:function(){var self=this;var $email=this.$target.find(".js_follow_email");if($email.length&&!$email.val().match(/.+@.+/)){this.$target.addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');return false;}
this.$target.removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');var email=$email.length?$email.val():false;if(email||this.is_user){this._rpc({route:'/website_mail/follow',params:{'id':+this.$target.data('id'),'object':this.$target.data('object'),'message_is_follower':this.$target.attr("data-follow")||"off",'email':email,},}).then(function(follow){self.toggle_subscription(follow,email);});}},toggle_subscription:function(follow,email){follow=follow||(!email&&this.$target.attr('data-unsubscribe'));if(follow){this.$target.find(".js_follow_btn").addClass('d-none');this.$target.find(".js_unfollow_btn").removeClass('d-none');}
else{this.$target.find(".js_follow_btn").removeClass('d-none');this.$target.find(".js_unfollow_btn").addClass('d-none');}
this.$target.find('input.js_follow_email').val(email||"").attr("disabled",email&&(follow||this.is_user)?"disabled":false);this.$target.attr("data-follow",follow?'on':'off');},});});;

/* /website_mail/static/src/js/website_mail.js defined in bundle 'web.assets_frontend' */
odoo.define('website_mail.thread',function(require){'use strict';var ajax=require('web.ajax');var core=require('web.core');var qweb=core.qweb;var PortalChatter=require('portal.chatter').PortalChatter;PortalChatter.include({_loadTemplates:function(){return $.when(this._super(),ajax.loadXML('/website_mail/static/src/xml/website_mail.xml',qweb));},});});;

/* /website_blog/static/src/js/contentshare.js defined in bundle 'web.assets_frontend' */
(function(){$.fn.share=function(options){var option=$.extend($.fn.share.defaults,options);var selected_text="";$.extend($.fn.share,{init:function(shareable){var self=this;$.fn.share.defaults.shareable=shareable;$.fn.share.defaults.shareable.on('mouseup',function(){if($(this).parents('body.editor_enable').length===0){self.popOver();}});$.fn.share.defaults.shareable.on('mousedown',function(){self.destroy();});},getContent:function(){var popover_content='';if($('.blog_title, .blog_content').hasClass('js_comment')){selected_text=this.getSelection('string');popover_content+='<a class="o_share_comment mr12"><i class="fa fa-comment fa-lg mr4 ml4"/></a>';}
if($('.blog_title, .blog_content').hasClass('js_tweet')){var tweet='"%s" - %s';var baseLength=tweet.replace(/%s/g,'').length;var selectedText=this.getSelection('string').substring(0,option.maxLength-baseLength-23);var text=encodeURIComponent(_.str.sprintf(tweet,selectedText,window.location.href));popover_content+='<a onclick="window.open(\''+option.shareLink+text+'\',\'_'+option.target+'\',\'location=yes,height=570,width=520,scrollbars=yes,status=yes\')"><i class="ml4 mr4 fa fa-twitter fa-lg"/></a>';}
return popover_content;},commentEdition:function(){var positionComment=($('#comments').position()).top-50;$(".o_portal_chatter_composer_form textarea").val('"'+selected_text+'" ').focus();$('html, body').stop().animate({'scrollTop':positionComment},500,'swing',function(){window.location.hash='blog_post_comment_quote';});},getSelection:function(share){if(window.getSelection){if(share==='string'){return String(window.getSelection().getRangeAt(0)).replace(/\s{2,}/g,' ');}else{return window.getSelection().getRangeAt(0);}}
else if(document.selection){if(share==='string'){return document.selection.createRange().text.replace(/\s{2,}/g,' ');}else{return document.selection.createRange();}}},popOver:function(){this.destroy();if(this.getSelection('string').length<option.minLength)
return;var data=this.getContent();var range=this.getSelection();var newNode=document.createElement("span");range.insertNode(newNode);newNode.className=option.className;var $pop=$(newNode);$pop.popover({trigger:'manual',placement:option.placement,html:true,content:function(){return data;}}).popover('show');$('.o_share_comment').on('click',this.commentEdition);},destroy:function(){var $span=$('span.'+option.className);$span.popover('hide');$span.remove();}});$.fn.share.init(this);};$.fn.share.defaults={shareLink:"http://twitter.com/intent/tweet?text=",minLength:5,maxLength:140,target:"blank",className:"share",placement:"top",};}());;

/* /website_blog/static/src/js/website_blog.js defined in bundle 'web.assets_frontend' */
odoo.define('website_blog.website_blog',function(require){"use strict";function page_transist(event){event.preventDefault();var newLocation=$('.js_next')[0].href;var top=$('.cover_footer').offset().top;$('.cover_footer').animate({height:$(window).height()+'px'},300);$('html, body').animate({scrollTop:top},300,'swing',function(){window.location.href=newLocation;});}
function animate(event){event.preventDefault();event.stopImmediatePropagation();var target=$(this.hash);$('html, body').stop().animate({'scrollTop':target.offset().top-32},500,'swing',function(){window.location.hash='blog_content';});}
function shareArticle(event){var url='';if($(this).is('*[class*="_complete"]')){var blog_title_complete=$('#blog_post_name').html()||'';if($(this).hasClass('o_twitter_complete')){url='https://twitter.com/intent/tweet?tw_p=tweetbutton&text=Amazing blog article : '+blog_title_complete+"! Check it live: "+window.location.href;}else if($(this).hasClass('o_facebook_complete')){url='https://www.facebook.com/sharer/sharer.php?u='+window.location.href;}else if($(this).hasClass('o_linkedin_complete')){url='https://www.linkedin.com/shareArticle?mini=true&url='+window.location.href+'&title='+blog_title_complete;}else{url='https://plus.google.com/share?url='+window.location.href;}}
else{var blog_post=$(this).parents("[name='blog_post']");var blog_post_title=blog_post.find('.o_blog_post_title').html()||'';var blog_article_link=blog_post.find('.o_blog_post_title').parent('a').attr('href');if($(this).hasClass('o_twitter')){url='https://twitter.com/intent/tweet?tw_p=tweetbutton&text=Amazing blog article : '+blog_post_title+"! "+window.location.host+blog_article_link;}else if($(this).hasClass('o_facebook')){url='https://www.facebook.com/sharer/sharer.php?u='+window.location.host+blog_article_link;}else if($(this).hasClass('o_linkedin')){url='https://www.linkedin.com/shareArticle?mini=true&url='+window.location.host+blog_article_link+'&title='+blog_post_title;}else if($(this).hasClass('o_google')){url='https://plus.google.com/share?url='+window.location.host+blog_article_link;}}
window.open(url,"","menubar=no, width=500, height=400");}
$(document).ready(function(){if($('.website_blog').length){$(".js_tweet, .js_comment").share({});$('.cover_footer').on('click',page_transist);$('a[href^="#blog_content"]').on('click',animate);$('.o_twitter, .o_facebook, .o_linkedin, .o_google, .o_twitter_complete, .o_facebook_complete, .o_linkedin_complete, .o_google_complete').on('click',shareArticle);$('.blog_post_year_collapse').on('click',function(){$(this).find('i.fa').toggleClass('fa-chevron-down fa-chevron-right');});var $activeYear=$('.blog_post_year li.active');if($activeYear.length){var id=$activeYear.closest('ul').attr('id');$("li.blog_post_year_collapse[data-target='#"+id+"']").click();}}
$('div.o_blog_post_complete a').hover(function(){$('div.o_blog_post_complete a').not('#'+this.id).addClass('unhover');},function(){$('div.o_blog_post_complete a').not('#'+this.id).removeClass('unhover');});});});;

/* /website_blog/static/src/js/s_latest_posts_frontend.js defined in bundle 'web.assets_frontend' */
odoo.define('website_blog.s_latest_posts_frontend',function(require){'use strict';var core=require('web.core');var sAnimation=require('website.content.snippets.animation');var _t=core._t;sAnimation.registry.js_get_posts=sAnimation.Class.extend({selector:'.js_get_posts',start:function(){var self=this;var limit=self.$target.data('postsLimit')||3;var blogID=self.$target.data('filterByBlogId');var template=self.$target.data('template')||'website_blog.s_latest_posts_list_template';var loading=self.$target.data('loading');this.$target.empty();this.$target.attr('contenteditable','False');var domain=[['website_published','=',true],['post_date','<=',moment().utc().locale('en').format('YYYY-MM-DD HH:mm:ss')],];if(blogID){domain.push(['blog_id','=',parseInt(blogID)]);}
var def=$.Deferred();this._rpc({route:'/blog/render_latest_posts',params:{template:template,domain:domain,limit:limit,},}).then(function(posts){var $posts=$(posts).filter('.s_latest_posts_post');if(!$posts.length){self.$target.append($('<div/>',{class:'col-md-6 offset-md-3'}).append($('<div/>',{class:'alert alert-warning alert-dismissible text-center',text:_t("No blog post was found. Make sure your posts are published."),})));return;}
if(loading&&loading===true){self._showLoading($posts);}else{self.$target.html($posts);}},function(e){if(self.editableMode){self.$target.append($('<p/>',{class:'text-danger',text:_t("An error occured with this latest posts block. If the problem persists, please consider deleting it and adding a new one"),}));}}).always(def.resolve.bind(def));return $.when(this._super.apply(this,arguments),def);},destroy:function(){this.$target.empty();this._super.apply(this,arguments);},_showLoading:function($posts){var self=this;_.each($posts,function(post){var $post=$(post);var $loadingContainer=$post.find('.loading_container');var $thumb=$post.find('.thumb .o_blog_cover_image');var $progress=$('<div/>',{class:'progress js-loading',}).append($('<div/>',{class:'progress-bar',role:'progressbar','aria-valuenow':'0','aria-valuemin':'0','aria-valuemax':'100',css:{width:0,},}));if(!$loadingContainer.length){$loadingContainer=$post;}
if(!$thumb.length){$thumb=$post;}
$post.addClass('js-loading');$progress.appendTo($loadingContainer);$post.appendTo(self.$target);var m=$thumb.css('background-image').match(/url\(["']?(.+)["']?\)/);var bg=m?m[1]:'none';var loaded=false;var $bar=$progress.find('.progress-bar');$bar.css('width','50%').attr('aria-valuenow','50');var $dummyImg=$('<img/>');var timer=setTimeout(function(){$dummyImg.remove();$post.removeClass('js-loading');$progress.hide();},5000);$dummyImg.load(function(){$bar.css('width','100%').attr('aria-valuenow','100');setTimeout(function(){$post.removeClass('js-loading');$progress.fadeOut(500);},500);$dummyImg.remove();clearTimeout(timer);});$dummyImg.attr('src',bg);});},});});;

/* /website_rating/static/src/js/website_mail.js defined in bundle 'web.assets_frontend' */
odoo.define('website_rating.thread',function(require){'use strict';var ajax=require('web.ajax');var core=require('web.core');var Widget=require('web.Widget');var qweb=core.qweb;var _t=core._t;var PortalChatter=require('portal.chatter').PortalChatter;PortalChatter.include({events:_.extend({},PortalChatter.prototype.events,{"mousemove .stars i":"_onMoveStar","mouseleave .stars i":"_onMoveOutStar","click .stars":"_onClickStar","mouseleave .stars":"_onMouseleaveStar","click .o_website_rating_select":"_onClickStarDomain","click .o_website_rating_select_text":"_onClickStarDomainReset",}),init:function(parent,options){this._super.apply(this,arguments);if(!_.contains(this.options,'display_rating')){this.options=_.defaults(this.options,{'display_rating':false,'rating_default_value':0.0,});}
this.set('rating_card_values',{});this.set('rating_value',false);this.on("change:rating_value",this,this._onChangeRatingDomain);this.labels={'0':"",'1':_t("I hate it"),'2':_t("I don't like it"),'3':_t("It's okay"),'4':_t("I like it"),'5':_t("I love it"),};this.user_click=false;this.set("star_value",this.options.rating_default_value);this.on("change:star_value",this,this._onChangeStarValue);},willStart:function(){var self=this;return this._super.apply(this,arguments).then(function(result){if(result['rating_stats']){var rating_data={'avg':self.round_to_half(result['rating_stats']['avg']),'percent':[],};_.each(_.keys(result['rating_stats']['percent']),function(rating){if(0<rating&&rating<=5){rating_data['percent'].push({'num':rating,'percent':result['rating_stats']['percent'][rating],});}});self.set('rating_card_values',rating_data);}});},start:function(){var self=this;return this._super.apply(this,arguments).then(function(){self.$input=self.$('input[name="rating_value"]');self.$star_list=self.$('.stars').find('i');self.set("star_value",self.options.rating_default_value);});},preprocessMessages:function(messages){var self=this;var messages=this._super.apply(this,arguments);if(this.options['display_rating']){_.each(messages,function(m){m['rating_value']=self.round_to_half(m['rating_value']);});}
return messages;},round_to_half:function(value){var converted=parseFloat(value);var decimal=(converted-parseInt(converted,10));decimal=Math.round(decimal*10);if(decimal===5){return(parseInt(converted,10)+0.5);}
if((decimal<3)||(decimal>7)){return Math.round(converted);}else{return(parseInt(converted,10)+0.5);}},_loadTemplates:function(){return $.when(this._super(),ajax.loadXML('/website_rating/static/src/xml/website_mail.xml',qweb));},_messageFetchPrepareParams:function(){var params=this._super.apply(this,arguments);if(this.options['display_rating']){params['rating_include']=true;}
return params;},_onClickStar:function(e){this.user_click=true;this.$input.val(this.get("star_value"));},_onClickStarDomain:function(e){var $tr=this.$(e.currentTarget);var num=$tr.data('star');if($tr.css('opacity')==1){this.set('rating_value',num);this.$('.o_website_rating_select').css({'opacity':0.5,});this.$('.o_website_rating_select_text[data-star="'+num+'"]').css({'visibility':'visible','opacity':1,});this.$('.o_website_rating_select[data-star="'+num+'"]').css({'opacity':1,});}},_onClickStarDomainReset:function(e){e.stopPropagation();this.set('rating_value',false);this.$('.o_website_rating_select_text').css('visibility','hidden');this.$('.o_website_rating_select').css({'opacity':1,});},_onChangeRatingDomain:function(){var domain=[];if(this.get('rating_value')){domain=[['rating_value','=',this.get('rating_value')]];}
this._changeCurrentPage(1,domain);},_onChangeStarValue:function(){var val=this.get("star_value");var index=Math.floor(val);var decimal=val-index;this.$star_list.removeClass('fa-star fa-star-half-o').addClass('fa-star-o');this.$('.stars').find("i:lt("+index+")").removeClass('fa-star-o fa-star-half-o').addClass('fa-star');if(decimal){this.$('.stars').find("i:eq("+(index)+")").removeClass('fa-star-o fa-star fa-star-half-o').addClass('fa-star-half-o');}
this.$('.rate_text .label').text(this.labels[index]);},_onMouseleaveStar:function(e){this.$('.rate_text').hide();},_onMoveStar:function(e){var index=this.$('.stars i').index(e.currentTarget);this.$('.rate_text').show();this.set("star_value",index+1);},_onMoveOutStar:function(){if(!this.user_click){this.set("star_value",parseInt(this.$input.val()));}
this.user_click=false;},});});;

/* /sale/static/src/js/product_configurator_mixin.js defined in bundle 'web.assets_frontend' */
odoo.define('sale.ProductConfiguratorMixin',function(require){'use strict';var concurrency=require('web.concurrency');var core=require('web.core');var utils=require('web.utils');var ajax=require('web.ajax');var _t=core._t;var ProductConfiguratorMixin={events:{'change .css_attribute_color input':'_onChangeColorAttribute','change .main_product:not(.in_cart) input.js_quantity':'onChangeAddQuantity','change [data-attribute_exclusions]':'onChangeVariant'},isSelectedVariantAllowed:true,computePriceTotal:function(){},onChangeVariant:function(ev){var $parent=$(ev.target).closest('.js_product');if(!$parent.data('uniqueId')){$parent.data('uniqueId',_.uniqueId());}
this._throttledGetCombinationInfo($parent.data('uniqueId'))(ev);},_getCombinationInfo:function(ev){var self=this;var $component;if($(ev.currentTarget).closest('form').length>0){$component=$(ev.currentTarget).closest('form');}else if($(ev.currentTarget).closest('.oe_optional_products_modal').length>0){$component=$(ev.currentTarget).closest('.oe_optional_products_modal');}else if($(ev.currentTarget).closest('.o_product_configurator').length>0){$component=$(ev.currentTarget).closest('.o_product_configurator');}else{$component=$(ev.currentTarget);}
var qty=$component.find('input[name="add_qty"]').val();var $parent=$(ev.target).closest('.js_product');var combination=this.getSelectedVariantValues($parent);var parentCombination=$parent.find('ul[data-attribute_exclusions]').data('attribute_exclusions').parent_combination;var productTemplateId=parseInt($parent.find('.product_template_id').val());self._checkExclusions($parent,combination);return ajax.jsonRpc(this._getUri('/product_configurator/get_combination_info'),'call',{'product_template_id':productTemplateId,'product_id':this._getProductId($parent),'combination':combination,'add_qty':parseInt(qty),'pricelist_id':this.pricelistId||false,'parent_combination':parentCombination,}).then(function(combinationData){self._onChangeCombination(ev,$parent,combinationData);});},handleCustomValues:function($target){var $variantContainer;var $customInput=false;if($target.is('input[type=radio]')&&$target.is(':checked')){$variantContainer=$target.closest('ul').closest('li');$customInput=$target;}else if($target.is('select')){$variantContainer=$target.closest('li');$customInput=$target.find('option[value="'+$target.val()+'"]');}
if($variantContainer){if($customInput&&$customInput.data('is_custom')){var attributeValueId=$customInput.data('value_id');var attributeValueName=$customInput.data('value_name');if($variantContainer.find('.variant_custom_value').length===0||$variantContainer.find('.variant_custom_value').data('attribute_value_id')!==parseInt(attributeValueId)){$variantContainer.find('.variant_custom_value_label').remove();$variantContainer.find('.variant_custom_value').remove();var $input=$('<input>',{type:'text','data-attribute_value_id':attributeValueId,'data-attribute_value_name':attributeValueName,class:'variant_custom_value form-control'});var isRadioInput=$target.is('input[type=radio]')&&$target.closest('label.css_attribute_color').length===0;if(isRadioInput){$input.addClass('custom_value_radio');$target.closest('div').after($input);}else{var $label=$('<label>',{html:attributeValueName+': ',class:'variant_custom_value_label'});$variantContainer.append($label).append($input);}}}else{$variantContainer.find('.variant_custom_value_label').remove();$variantContainer.find('.variant_custom_value').remove();}}},onClickAddCartJSON:function(ev){ev.preventDefault();var $link=$(ev.currentTarget);var $input=$link.closest('.input-group').find("input");var min=parseFloat($input.data("min")||0);var max=parseFloat($input.data("max")||Infinity);var previousQty=parseFloat($input.val()||0,10);var quantity=($link.has(".fa-minus").length?-1:1)+previousQty;var newQty=quantity>min?(quantity<max?quantity:max):min;if(newQty!==previousQty){$input.val(newQty).trigger('change');}
return false;},onChangeAddQuantity:function(ev){var $parent;if($(ev.currentTarget).closest('.oe_optional_products_modal').length>0){$parent=$(ev.currentTarget).closest('.oe_optional_products_modal');}else if($(ev.currentTarget).closest('form').length>0){$parent=$(ev.currentTarget).closest('form');}else{$parent=$(ev.currentTarget).closest('.o_product_configurator');}
this.triggerVariantChange($parent);},triggerVariantChange:function($container){var self=this;$container.find('ul[data-attribute_exclusions]').trigger('change',{$container:$container});$container.find('input.js_variant_change:checked, select.js_variant_change').each(function(){self.handleCustomValues($(this));});},getCustomVariantValues:function($container){var variantCustomValues=[];$container.find('.variant_custom_value').each(function(){var $variantCustomValueInput=$(this);if($variantCustomValueInput.length!==0){variantCustomValues.push({'attribute_value_id':$variantCustomValueInput.data('attribute_value_id'),'attribute_value_name':$variantCustomValueInput.data('attribute_value_name'),'custom_value':$variantCustomValueInput.val(),});}});return variantCustomValues;},getNoVariantAttributeValues:function($container){var noVariantAttributeValues=[];var variantsValuesSelectors=['input.no_variant.js_variant_change:checked','select.no_variant.js_variant_change'];$container.find(variantsValuesSelectors.join(',')).each(function(){var $variantValueInput=$(this);if($variantValueInput.is('select')){$variantValueInput=$variantValueInput.find('option[value='+$variantValueInput.val()+']');}
if($variantValueInput.length!==0){noVariantAttributeValues.push({'attribute_value_id':$variantValueInput.data('value_id'),'attribute_value_name':$variantValueInput.data('value_name'),'value':$variantValueInput.val(),'attribute_name':$variantValueInput.data('attribute_name'),'is_custom':$variantValueInput.data('is_custom')});}});return noVariantAttributeValues;},getSelectedVariantValues:function($container){var values=[];var unchangedValues=$container.find('div.oe_unchanged_value_ids').data('unchanged_value_ids')||[];var variantsValuesSelectors=['input.js_variant_change:checked','select.js_variant_change'];_.each($container.find(variantsValuesSelectors.join(', ')),function(el){values.push(+$(el).val());});return values.concat(unchangedValues);},selectOrCreateProduct:function($container,productId,productTemplateId,useAjax){var self=this;productId=parseInt(productId);productTemplateId=parseInt(productTemplateId);var productReady=$.Deferred();if(productId){productReady.resolve(productId);}else{var params={product_template_id:productTemplateId,product_template_attribute_value_ids:JSON.stringify(self.getSelectedVariantValues($container)),};var route='/product_configurator/create_product_variant';if(useAjax){productReady=ajax.jsonRpc(route,'call',params);}else{productReady=this._rpc({route:route,params:params});}}
return productReady;},_checkExclusions:function($parent,combination){var self=this;var combinationData=$parent.find('ul[data-attribute_exclusions]').data('attribute_exclusions');$parent.find('option, input, label').removeClass('css_not_available');if(combinationData.exclusions){_.each(combination,function(current_ptav){if(combinationData.exclusions.hasOwnProperty(current_ptav)){_.each(combinationData.exclusions[current_ptav],function(excluded_ptav){self._disableInput($parent,excluded_ptav);});}});}
_.each(combinationData.parent_exclusions,function(ptav){self._disableInput($parent,ptav);});},_getProductId:function($parent){return parseInt($parent.find('.product_id').val());},_disableInput:function($parent,attributeValueId){var $input=$parent.find('option[value='+attributeValueId+'], input[value='+attributeValueId+']');$input.addClass('css_not_available');$input.closest('label').addClass('css_not_available');},_onChangeCombination:function(ev,$parent,combination){var self=this;var $price=$parent.find(".oe_price:first .oe_currency_value");var $default_price=$parent.find(".oe_default_price:first .oe_currency_value");var $optional_price=$parent.find(".oe_optional:first .oe_currency_value");var isCombinationPossible=this.isSelectedVariantAllowed;if(combination.is_combination_possible!==undefined){isCombinationPossible=combination.is_combination_possible;}
this._toggleDisable($parent,isCombinationPossible);$price.html(self._priceToStr(combination.price));$default_price.html(self._priceToStr(combination.list_price));var compatibility_check=combination.list_price-combination.price>=0.01;if(combination.has_discounted_price!==undefined?combination.has_discounted_price:compatibility_check){$default_price.closest('.oe_website_sale').addClass("discount");$optional_price.closest('.oe_optional').removeClass('d-none').css('text-decoration','line-through');$default_price.parent().removeClass('d-none');}else{$default_price.closest('.oe_website_sale').removeClass("discount");$optional_price.closest('.oe_optional').addClass('d-none');$default_price.parent().addClass('d-none');}
var rootComponentSelectors=['tr.js_product','.oe_website_sale','.o_product_configurator'];if(combination.product_id!==this.last_product_id){this.last_product_id=combination.product_id;self._updateProductImage($parent.closest(rootComponentSelectors.join(', ')),combination.product_id,combination.product_template_id,combination.carousel,isCombinationPossible);}
$parent.find('.product_id').first().val(combination.product_id||0).trigger('change');$parent.find('.product_display_name').first().val(combination.display_name);$parent.find('.js_raw_price').first().html(combination.price);this.handleCustomValues($(ev.target));},_priceToStr:function(price){var l10n=_t.database.parameters;var precision=2;if($('.decimal_precision').length){precision=parseInt($('.decimal_precision').last().data('precision'));}
var formatted=_.str.sprintf('%.'+precision+'f',price).split('.');formatted[0]=utils.insert_thousand_seps(formatted[0]);return formatted.join(l10n.decimal_point);},_throttledGetCombinationInfo:_.memoize(function(uniqueId){var dropMisordered=new concurrency.DropMisordered();var _getCombinationInfo=_.throttle(this._getCombinationInfo.bind(this),500);return function(ev){return dropMisordered.add(_getCombinationInfo(ev));};}),_toggleDisable:function($parent,isCombinationPossible){$parent.toggleClass('css_not_available',!isCombinationPossible);},_updateProductImage:function($productContainer,productId,productTemplateId){var model=productId?'product.product':'product.template';var modelId=productId||productTemplateId;var imageUrl='/web/image/{0}/{1}/'+(this._productImageField?this._productImageField:'image');var imageSrc=imageUrl.replace("{0}",model).replace("{1}",modelId);var imagesSelectors=['span[data-oe-model^="product."][data-oe-type="image"] img:first','img.product_detail_img','span.variant_image img','img.variant_image',];var $img=$productContainer.find(imagesSelectors.join(', '));$img.attr('src',imageSrc);},_onChangeColorAttribute:function(ev){var $parent=$(ev.target).closest('.js_product');$parent.find('.css_attribute_color').removeClass("active").filter(':has(input:checked)').addClass("active");},_getUri:function(uri){if(this.isWebsite){return uri+'_website';}else{return uri;}}};return ProductConfiguratorMixin;});;

/* /sale/static/src/js/product_configurator_modal.js defined in bundle 'web.assets_frontend' */
odoo.define('sale.OptionalProductsModal',function(require){"use strict";var ajax=require('web.ajax');var Dialog=require('web.Dialog');var ServicesMixin=require('web.ServicesMixin');var ProductConfiguratorMixin=require('sale.ProductConfiguratorMixin');var weContext=require('web_editor.context');var productNameMap={};var optionalProductsMap={};var OptionalProductsModal=Dialog.extend(ServicesMixin,ProductConfiguratorMixin,{events:_.extend({},Dialog.prototype.events,ProductConfiguratorMixin.events,{'click a.js_add, a.js_remove':'_onAddOrRemoveOption','click button.js_add_cart_json':'onClickAddCartJSON','change .in_cart.main_product input.js_quantity':'_onChangeQuantity',}),init:function(parent,params){var self=this;var options=_.extend({size:'large',buttons:[{text:params.okButtonText,click:this._onConfirmButtonClick,classes:'btn-primary'},{text:params.cancelButtonText,click:this._onCancelButtonClick}],technical:!params.isWebsite,},params||{});this._super(parent,options);this.rootProduct=params.rootProduct;this.container=parent;this.pricelistId=params.pricelistId;this.isWebsite=params.isWebsite;this.dialogClass='oe_optional_products_modal'+(params.isWebsite?' oe_website_sale':'');this._productImageField='image_medium';},willStart:function(){var self=this;var uri=this._getUri("/product_configurator/show_optional_products");var getModalContent=ajax.jsonRpc(uri,'call',{product_id:self.rootProduct.product_id,variant_values:self.rootProduct.variant_values,pricelist_id:self.pricelistId||false,add_qty:self.rootProduct.quantity,kwargs:{context:_.extend({'quantity':self.rootProduct.quantity},weContext.get()),}}).then(function(modalContent){if(modalContent){var $modalContent=$(modalContent);$modalContent=self._postProcessContent($modalContent);self.$content=$modalContent;}else{self.trigger('options_empty');self.preventOpening=true;}});var parentInit=self._super.apply(self,arguments);return $.when(getModalContent,parentInit);},open:function(options){$('.tooltip').remove();var self=this;this.appendTo($('<div/>')).then(function(){if(!self.preventOpening){self.$modal.find(".modal-body").replaceWith(self.$el);self.$modal.attr('open',true);self.$modal.removeAttr("aria-hidden");self.$modal.modal().appendTo(self.container);self.$modal.focus();self._opened.resolve();}});if(options&&options.shouldFocusButtons){self._onFocusControlButton();}
return self;},start:function(){var def=this._super.apply(this,arguments);var self=this;this.$el.find('input[name="add_qty"]').val(this.rootProduct.quantity);return def.then(function(){self._opened.then(function(){self.triggerVariantChange(self.$el);});});},computePriceTotal:function(){if($('.js_price_total').length){var price=0;$('.js_product.in_cart').each(function(){var quantity=parseInt($('input[name="add_qty"]').first().val());price+=parseFloat($(this).find('.js_raw_price').html())*quantity;});$('.js_price_total .oe_currency_value').html(this._priceToStr(parseFloat(price)));}
ProductConfiguratorMixin.computePriceTotal.apply(this,arguments);},getSelectedProducts:function(){var self=this;var products=[this.rootProduct];this.$modal.find('.js_product.in_cart:not(.main_product)').each(function(){var quantity=0;var $item=$(this);if($item.find('input[name="add_qty"]').length){quantity=$item.find('input[name="add_qty"]').val();}else{quantity=parseInt($item.find('.optional_product_quantity span.add_qty').html().trim());}
var productCustomVariantValues=self.getCustomVariantValues($(this));var noVariantAttributeValues=self.getNoVariantAttributeValues($(this));products.push({product_id:parseInt($item.find('input.product_id').val()),quantity:quantity,product_custom_attribute_values:productCustomVariantValues,no_variant_attribute_values:noVariantAttributeValues});});return products;},_postProcessContent:function($modalContent){var productId=this.rootProduct.product_id;$modalContent.find('img:first').attr("src","/web/image/product.product/"+productId+"/image_medium");if(this.rootProduct&&(this.rootProduct.product_custom_attribute_values||this.rootProduct.no_variant_attribute_values)){var $productDescription=$modalContent.find('.main_product').find('td.td-product_name div.text-muted.small');var description=$productDescription.html();$.each(this.rootProduct.product_custom_attribute_values,function(){description+='<br/>'+this.attribute_value_name+': '+this.custom_value;});$.each(this.rootProduct.no_variant_attribute_values,function(){if(this.is_custom!=='True'){description+='<br/>'+this.attribute_name+': '+this.attribute_value_name;}});$productDescription.html(description);}
return $modalContent;},_onConfirmButtonClick:function(){this.trigger('confirm');this.close();},_onCancelButtonClick:function(){this.trigger('back');this.close();},_onAddOrRemoveOption:function(ev){ev.preventDefault();var self=this;var $target=$(ev.currentTarget);var $modal=$target.parents('.oe_optional_products_modal');var $parent=$target.parents('.js_product:first');$parent.find("a.js_add, span.js_remove").toggleClass('d-none');$parent.find("input.js_optional_same_quantity").val($target.hasClass("js_add")?1:0);$parent.find(".js_remove");var productTemplateId=$parent.find(".product_template_id").val();if($target.hasClass('js_add')){self._onAddOption($modal,$parent,productTemplateId);}else{self._onRemoveOption($modal,$parent,productTemplateId);}
self.computePriceTotal();},_onAddOption:function($modal,$parent,productTemplateId){var self=this;var $main_product=$modal.find('.js_product:first');var $selectOptionsText=$modal.find('.o_select_options');$parent.addClass('in_cart');$parent.find('.td-qty').addClass('text-center');$parent.find('.td-qty').append($parent.find('.optional_product_quantity'));productNameMap[productTemplateId]=$parent.find(".product-name").html();$parent.find(".product-name").html($parent.find(".product_display_name").val());var productCustomVariantValues=self.getCustomVariantValues($parent);var noVariantAttributeValues=self.getNoVariantAttributeValues($parent);if(productCustomVariantValues||noVariantAttributeValues){var $productDescription=$parent.find('td.td-product_name div.float-left');var description='';$.each(productCustomVariantValues,function(){description+='<br/>'+this.attribute_value_name+': '+this.custom_value;});$.each(noVariantAttributeValues,function(){if(this.is_custom!=='True'){description+='<br/>'+this.attribute_name+': '+this.attribute_value_name;}});var $customAttributeValuesDescription=$('<div>',{class:'custom_attribute_values_description text-muted small',html:description});$productDescription.append($customAttributeValuesDescription);}
var parentProductId=null;for(var productIdKey in optionalProductsMap){if(optionalProductsMap[productIdKey].indexOf(productTemplateId)!==-1){parentProductId=productIdKey;break;}
$('tr:last').after($parent);}
if(parentProductId){$modal.find('.product_template_id').filter(function(){return parentProductId===$(this).val();}).parents('.js_product:first').after($parent);}else{$main_product.after($parent);}
var productReady=this.selectOrCreateProduct($parent,$parent.find('.product_id').val(),productTemplateId,true);productReady.done(function(productId){$parent.find('.product_id').val(productId);ajax.jsonRpc(self._getUri("/product_configurator/optional_product_items"),'call',{'product_id':productId,'pricelist_id':self.pricelistId||false,}).then(function(addedItem){var $addedItem=$(addedItem);$modal.find('tr:last').after($addedItem);self.$el.find('input[name="add_qty"]').trigger('change');self.triggerVariantChange($addedItem);if($addedItem.find(".product_template_id").length>0){optionalProductsMap[productTemplateId]=$addedItem.find(".product_template_id").map(function(){return $(this).val();}).get();}
if($selectOptionsText.nextAll('.js_product').length===0){$selectOptionsText.hide();}});});},_onRemoveOption:function($modal,$parent,productTemplateId){$parent.removeClass('in_cart');$parent.find('.td-qty').removeClass('text-center');$parent.find('.js_remove.d-none').prepend($parent.find('.optional_product_quantity'));$parent.find('.custom_attribute_values_description').remove();var $select_options_text=$modal.find('.o_select_options');$select_options_text.show();$parent.find(".product-name").html(productNameMap[productTemplateId]);delete productNameMap[productTemplateId];this._removeOptionOption($modal,productTemplateId);$modal.find('tr:last').after($parent);},_removeOptionOption:function($modal,optionId){var self=this;if(optionalProductsMap[optionId]){optionalProductsMap[optionId].forEach(function(productId){$modal.find('.product_template_id').filter(function(){return productId===$(this).val();}).parents('.js_product:first').remove();self._removeOptionOption($modal,productId);});delete optionalProductsMap[optionId];}},_onChangeCombination:function(ev,$parent,combination){$parent.find('.td-product_name .product-name').first().text(combination.display_name);ProductConfiguratorMixin._onChangeCombination.apply(this,arguments);this.computePriceTotal();},_onChangeQuantity:function(ev){var $quantity=$(ev.currentTarget);var qty=parseFloat($quantity.val());var $modal=$quantity.parents('.oe_optional_products_modal');if(qty===1){$modal.find(".js_items").addClass('d-none').removeClass('add_qty');$modal.find(".js_item").removeClass('d-none').addClass('add_qty');}else{$modal.find(".js_items").removeClass('d-none').addClass('add_qty').text(qty);$modal.find(".js_item").addClass('d-none').removeClass('add_qty');}
this.rootProduct.quantity=qty;if(!this.isWebsite){this.onChangeAddQuantity(ev);}
this.trigger('update_quantity',qty);}});return OptionalProductsModal;});;

/* /website_sale/static/src/js/website_sale.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale.cart',function(require){'use strict';var sAnimations=require('website.content.snippets.animation');var core=require('web.core');var _t=core._t;var timeout;sAnimations.registry.websiteSaleCartLink=sAnimations.Class.extend({selector:'#top_menu a[href$="/shop/cart"]',read_events:{'mouseenter':'_onMouseEnter','mouseleave':'_onMouseLeave',},start:function(){var def=this._super.apply(this,arguments);if(this.editableMode){return def;}
this.$el.popover({trigger:'manual',animation:true,html:true,title:function(){return _t("My Cart");},container:'body',placement:'auto',template:'<div class="popover mycart-popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'});return def;},_onMouseEnter:function(ev){var self=this;clearTimeout(timeout);$(this.selector).not(ev.currentTarget).popover('hide');timeout=setTimeout(function(){if(!self.$el.is(':hover')||$('.mycart-popover:visible').length){return;}
$.get("/shop/cart",{type:'popover',}).then(function(data){self.$el.data("bs.popover").config.content=data;self.$el.popover("show");$('.popover').on('mouseleave',function(){self.$el.trigger('mouseleave');});});},100);},_onMouseLeave:function(ev){var self=this;setTimeout(function(){if($('.popover:hover').length){return;}
if(!self.$el.is(':hover')){self.$el.popover('hide');}},1000);},});});odoo.define('website_sale.website_sale_category',function(require){'use strict';var sAnimations=require('website.content.snippets.animation');sAnimations.registry.websiteSaleCategory=sAnimations.Class.extend({selector:'#o_shop_collapse_category',read_events:{'click .fa-chevron-right':'_onOpenClick','click .fa-chevron-down':'_onCloseClick',},_onOpenClick:function(ev){var $fa=$(ev.currentTarget);$fa.parent().siblings().find('.fa-chevron-down:first').click();$fa.parents('li').find('ul:first').show('normal');$fa.toggleClass('fa-chevron-down fa-chevron-right');},_onCloseClick:function(ev){var $fa=$(ev.currentTarget);$fa.parent().find('ul:first').hide('normal');$fa.toggleClass('fa-chevron-down fa-chevron-right');},});});odoo.define('website_sale.website_sale',function(require){'use strict';var utils=require('web.utils');var ProductConfiguratorMixin=require('sale.ProductConfiguratorMixin');var core=require('web.core');var config=require('web.config');var sAnimations=require('website.content.snippets.animation');require("website.content.zoomodoo");var _t=core._t;sAnimations.registry.WebsiteSale=sAnimations.Class.extend(ProductConfiguratorMixin,{selector:'.oe_website_sale',read_events:{'change form .js_product:first input[name="add_qty"]':'_onChangeAddQuantity','mouseup .js_publish':'_onMouseupPublish','touchend .js_publish':'_onMouseupPublish','change .oe_cart input.js_quantity[data-product-id]':'_onChangeCartQuantity','click .oe_cart a.js_add_suggested_products':'_onClickSuggestedProduct','click a.js_add_cart_json':'_onClickAddCartJSON','click .a-submit':'_onClickSubmit','change form.js_attributes input, form.js_attributes select':'_onChangeAttribute','mouseup form.js_add_cart_json label':'_onMouseupAddCartLabel','touchend form.js_add_cart_json label':'_onMouseupAddCartLabel','click .show_coupon':'_onClickShowCoupon','submit .o_website_sale_search':'_onSubmitSaleSearch','change select[name="country_id"]':'_onChangeCountry','change #shipping_use_same':'_onChangeShippingUseSame','click .toggle_summary':'_onToggleSummary','click input.js_product_change':'onChangeVariant','change .js_main_product [data-attribute_exclusions]':'onChangeVariant',},init:function(){this._super.apply(this,arguments);this._changeCartQuantity=_.debounce(this._changeCartQuantity.bind(this),500);this._changeCountry=_.debounce(this._changeCountry.bind(this),500);this.isWebsite=true;delete this.events['change .main_product:not(.in_cart) input.js_quantity'];delete this.events['change [data-attribute_exclusions]'];},start:function(){var def=this._super.apply(this,arguments);if(this.editableMode){return def;}
_.each(this.$('div.js_product'),function(product){$('input.js_product_change',product).first().trigger('change');});this.triggerVariantChange(this.$el);this.$('select[name="country_id"]').change();this.$('#checkbox_cgv').trigger('change');core.bus.on('resize',this,function(){if(config.device.size_class===config.device.SIZES.XL){$('.toggle_summary_div').addClass('d-none d-xl-block');}});this._startZoom();return def;},getSelectedVariantValues:function($container){var combination=$container.find('input.js_product_change:checked').data('combination');if(combination){return JSON.parse(combination);}
return ProductConfiguratorMixin.getSelectedVariantValues.apply(this,arguments);},_changeCartQuantity:function($input,value,$dom_optional,line_id,productIDs){_.each($dom_optional,function(elem){$(elem).find('.js_quantity').text(value);productIDs.push($(elem).find('span[data-product-id]').data('product-id'));});$input.data('update_change',true);this._rpc({route:"/shop/cart/update_json",params:{line_id:line_id,product_id:parseInt($input.data('product-id'),10),set_qty:value},}).then(function(data){$input.data('update_change',false);var check_value=parseInt($input.val()||0,10);if(isNaN(check_value)){check_value=1;}
if(value!==check_value){$input.trigger('change');return;}
var $q=$(".my_cart_quantity");if(data.cart_quantity){$q.parents('li:first').removeClass('d-none');}
else{window.location='/shop/cart';}
$q.html(data.cart_quantity).hide().fadeIn(600);$input.val(data.quantity);$('.js_quantity[data-line-id='+line_id+']').val(data.quantity).html(data.quantity);$(".js_cart_lines").first().before(data['website_sale.cart_lines']).end().remove();$(".js_cart_summary").first().before(data['website_sale.short_cart_summary']).end().remove();if(data.warning){var cart_alert=$('.oe_cart').parent().find('#data_warning');if(cart_alert.length===0){$('.oe_cart').prepend('<div class="alert alert-danger alert-dismissable" role="alert" id="data_warning">'+'<button type="button" class="close" data-dismiss="alert" >&times;</button> '+data.warning+'</div>');}
else{cart_alert.html('<button type="button" class="close" data-dismiss="alert" >&times;</button> '+data.warning);}
$input.val(data.quantity);}});},_changeCountry:function(){if(!$("#country_id").val()){return;}
this._rpc({route:"/shop/country_infos/"+$("#country_id").val(),params:{mode:'shipping',},}).then(function(data){var selectStates=$("select[name='state_id']");if(selectStates.data('init')===0||selectStates.find('option').length===1){if(data.states.length){selectStates.html('');_.each(data.states,function(x){var opt=$('<option>').text(x[1]).attr('value',x[0]).attr('data-code',x[2]);selectStates.append(opt);});selectStates.parent('div').show();}else{selectStates.val('').parent('div').hide();}
selectStates.data('init',0);}else{selectStates.data('init',0);}
if(data.fields){if($.inArray('zip',data.fields)>$.inArray('city',data.fields)){$(".div_zip").before($(".div_city"));}else{$(".div_zip").after($(".div_city"));}
var all_fields=["street","zip","city","country_name"];_.each(all_fields,function(field){$(".checkout_autoformat .div_"+field.split('_')[0]).toggle($.inArray(field,data.fields)>=0);});}});},_getProductId:function($parent){if($parent.find('input.js_product_change').length!==0){return parseInt($parent.find('input.js_product_change:checked').val());}
else{return ProductConfiguratorMixin._getProductId.apply(this,arguments);}},_startZoom:function(){if(!config.device.isMobile){var autoZoom=$('.ecom-zoomable').data('ecom-zoom-auto')||false,factorZoom=parseFloat($('.ecom-zoomable').data('ecom-zoom-factor'))||1.5,attach='#o-carousel-product';_.each($('.ecom-zoomable img[data-zoom]'),function(el){onImageLoaded(el,function(){var $img=$(el);if(!_.str.endsWith(el.src,el.dataset.zoomImage)||el.naturalWidth>=$(attach).width()*factorZoom||el.naturalHeight>=$(attach).height()*factorZoom){$img.zoomOdoo({event:autoZoom?'mouseenter':'click',attach:attach});$img.attr('data-zoom',1);}else{$img.removeAttr('data-zoom');$img.attr('data-zoom-image','');}});});}
function onImageLoaded(img,callback){$(img).on('load',function(){callback();});if(img.complete){callback();}}},_updateProductImage:function($productContainer,productId,productTemplateId,new_carousel,isCombinationPossible){var $img;var $carousel=$productContainer.find('#o-carousel-product');if(isCombinationPossible===undefined){isCombinationPossible=this.isSelectedVariantAllowed;}
if(new_carousel){if(window.location.search.indexOf('enable_editor')===-1){var $new_carousel=$(new_carousel);$carousel.after($new_carousel);$carousel.remove();$carousel=$new_carousel;$carousel.carousel(0);this._startZoom();this.trigger_up('animation_start_demand',{$target:$carousel});}}
else{var model=productId?'product.product':'product.template';var modelId=productId||productTemplateId;var imageSrc='/web/image/{0}/{1}/image'.replace("{0}",model).replace("{1}",modelId);$img=$productContainer.find('img.js_variant_img');$img.attr("src",imageSrc);$img.parent().attr('data-oe-model',model).attr('data-oe-id',modelId).data('oe-model',model).data('oe-id',modelId);var $thumbnail=$productContainer.find('img.js_variant_img_small');if($thumbnail.length!==0){$thumbnail.attr("src","/web/image/{0}/{1}/image/90x90".replace('{0}',model).replace('{1}',modelId));$('.carousel').carousel(0);}
$img.filter('[data-zoom-image]').attr('data-zoom-image',$img.attr('src'));if($img.data('zoomOdoo')!==undefined){$img.data('zoomOdoo').isReady=false;}}
$carousel.toggleClass('css_not_available',!isCombinationPossible);},_onClickAddCartJSON:function(ev){this.onClickAddCartJSON(ev);},_onChangeAddQuantity:function(ev){this.onChangeAddQuantity(ev);},_onMouseupPublish:function(ev){$(ev.currentTarget).parents('.thumbnail').toggleClass('disabled');},_onChangeCartQuantity:function(ev){var $input=$(ev.currentTarget);if($input.data('update_change')){return;}
var value=parseInt($input.val()||0,10);if(isNaN(value)){value=1;}
var $dom=$input.closest('tr');var $dom_optional=$dom.nextUntil(':not(.optional_product.info)');var line_id=parseInt($input.data('line-id'),10);var productIDs=[parseInt($input.data('product-id'),10)];this._changeCartQuantity($input,value,$dom_optional,line_id,productIDs);},_onClickSuggestedProduct:function(ev){$(ev.currentTarget).prev('input').val(1).trigger('change');},_onClickSubmit:function(ev,forceSubmit){if($(ev.currentTarget).is('#add_to_cart, #products_grid .a-submit')&&!forceSubmit){return;}
var $aSubmit=$(ev.currentTarget);if(!ev.isDefaultPrevented()&&!$aSubmit.is(".disabled")){ev.preventDefault();$aSubmit.closest('form').submit();}
if($aSubmit.hasClass('a-submit-disable')){$aSubmit.addClass("disabled");}
if($aSubmit.hasClass('a-submit-loading')){var loading='<span class="fa fa-cog fa-spin"/>';var fa_span=$aSubmit.find('span[class*="fa"]');if(fa_span.length){fa_span.replaceWith(loading);}else{$aSubmit.append(loading);}}},_onChangeAttribute:function(ev){if(!ev.isDefaultPrevented()){ev.preventDefault();$(ev.currentTarget).closest("form").submit();}},_onMouseupAddCartLabel:function(ev){var $label=$(ev.currentTarget);var $price=$label.parents("form:first").find(".oe_price .oe_currency_value");if(!$price.data("price")){$price.data("price",parseFloat($price.text()));}
var value=$price.data("price")+parseFloat($label.find(".badge span").text()||0);var dec=value%1;$price.html(value+(dec<0.01?".00":(dec<1?"0":"")));},_onClickShowCoupon:function(ev){$(ev.currentTarget).hide();$('.coupon_form').removeClass('d-none');},_onSubmitSaleSearch:function(ev){if(!this.$('.dropdown_sorty_by').length){return;}
var $this=$(ev.currentTarget);if(!ev.isDefaultPrevented()&&!$this.is(".disabled")){ev.preventDefault();var oldurl=$this.attr('action');oldurl+=(oldurl.indexOf("?")===-1)?"?":"";var search=$this.find('input.search-query');window.location=oldurl+'&'+search.attr('name')+'='+encodeURIComponent(search.val());}},_onChangeCountry:function(ev){if(!this.$('.checkout_autoformat').length){return;}
this._changeCountry();},_onChangeShippingUseSame:function(ev){$('.ship_to_other').toggle(!$(ev.currentTarget).prop('checked'));},_toggleDisable:function($parent,isCombinationPossible){ProductConfiguratorMixin._toggleDisable.apply(this,arguments);$parent.find("#add_to_cart").toggleClass('disabled',!isCombinationPossible);},_onToggleSummary:function(){$('.toggle_summary_div').toggleClass('d-none');$('.toggle_summary_div').removeClass('d-xl-block');},});sAnimations.registry.websiteSaleCart=sAnimations.Class.extend({selector:'.oe_website_sale .oe_cart',read_events:{'click .js_change_shipping':'_onClickChangeShipping','click .js_edit_address':'_onClickEditAddress','click .js_delete_product':'_onClickDeleteProduct',},_onClickChangeShipping:function(ev){var $old=$('.all_shipping').find('.card.border_primary');$old.find('.btn-ship').toggle();$old.addClass('js_change_shipping');$old.removeClass('border_primary');var $new=$(ev.currentTarget).parent('div.one_kanban').find('.card');$new.find('.btn-ship').toggle();$new.removeClass('js_change_shipping');$new.addClass('border_primary');var $form=$(ev.currentTarget).parent('div.one_kanban').find('form.d-none');$.post($form.attr('action'),$form.serialize()+'&xhr=1');},_onClickEditAddress:function(ev){ev.preventDefault();$(ev.currentTarget).closest('div.one_kanban').find('form.d-none').attr('action','/shop/address').submit();},_onClickDeleteProduct:function(ev){ev.preventDefault();$(ev.currentTarget).closest('tr').find('.js_quantity').val(0).trigger('change');},});});;

/* /website_sale/static/src/js/website_sale_utils.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale.utils',function(require){'use strict';function animateClone($cart,$elem,offsetTop,offsetLeft){$cart.find('.o_animate_blink').addClass('o_red_highlight o_shadow_animation').delay(500).queue(function(){$(this).removeClass("o_shadow_animation").dequeue();}).delay(2000).queue(function(){$(this).removeClass("o_red_highlight").dequeue();});var $imgtodrag=$elem.find('img').eq(0);if($imgtodrag.length){var $imgclone=$imgtodrag.clone().offset({top:$imgtodrag.offset().top,left:$imgtodrag.offset().left}).addClass('o_website_sale_animate').appendTo(document.body).animate({top:$cart.offset().top+offsetTop,left:$cart.offset().left+offsetLeft,width:75,height:75,},1000,'easeInOutExpo');$imgclone.animate({width:0,height:0,},function(){$(this).detach();});}}
return{animateClone:animateClone,};});;

/* /website_sale/static/src/js/website_sale_payment.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale.payment',function(require){'use strict';require('web.dom_ready');var $checkbox=$("#checkbox_cgv");if(!$checkbox.length){return;}
var $pay_button=$('button#o_payment_form_pay');$checkbox.on('change',function(ev){$pay_button.data('disabled_reasons',$pay_button.data('disabled_reasons')||{});$pay_button.data('disabled_reasons').cgv=!ev.target.checked;$pay_button.prop('disabled',_.contains($pay_button.data('disabled_reasons'),true));});$checkbox.change();});;

/* /website_sale/static/src/js/website_sale_validate.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale.validate',function(require){'use strict';var sAnimations=require('website.content.snippets.animation');sAnimations.registry.websiteSaleValidate=sAnimations.Class.extend({selector:'div.oe_website_sale_tx_status[data-order-id]',start:function(){var def=this._super.apply(this,arguments);if(this.editableMode){return def;}
this._poll_nbr=0;this._paymentTransationPollStatus();return def;},_paymentTransationPollStatus:function(){var self=this;this._rpc({route:'/shop/payment/get_status/'+parseInt(this.$el.data('order-id')),}).then(function(result){self._poll_nbr+=1;if(result.recall){if(self._poll_nbr<20){setTimeout(function(){self._paymentTransationPollStatus();},Math.ceil(self._poll_nbr/3)*1000);}else{var $message=$(result.message);$message.find('span:first').prepend($("<i title='We are waiting the confirmation of the bank or payment provider' class='fa fa-warning' style='margin-right:10px;'>"));result.message=$message.html();}}
self.$el.html(result.message);});},});});;

/* /website_sale/static/src/js/website_sale_tour_buy.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale.tour',function(require){'use strict';var tour=require("web_tour.tour");var base=require("web_editor.base");tour.register('shop_buy_product',{test:true,url:'/shop',wait_for:base.ready()},[{content:"search conference chair",trigger:'form input[name="search"]',run:"text conference chair",},{content:"search conference chair",trigger:'form:has(input[name="search"]) .oe_search_button',},{content:"select conference chair",trigger:'.oe_product_cart:first a:contains("Conference Chair")',},{content:"select Conference Chair Aluminium",extra_trigger:'#product_detail',trigger:'label:contains(Aluminium) input',},{content:"select Conference Chair Steel",extra_trigger:'#product_detail',trigger:'label:contains(Steel) input',},{content:"click on add to cart",extra_trigger:'label:contains(Steel) input:propChecked',trigger:'#product_detail form[action^="/shop/cart/update"] .btn-primary',},{content:"click in modal on 'Proceed to checkout' button",trigger:'button:contains("Proceed to Checkout")',},{content:"add suggested",extra_trigger:'#wrap:not(:has(#cart_products:contains("Storage Box")))',trigger:'.oe_cart:has(tr:contains("Storage Box")) a:contains("Add to Cart")',},{content:"add one more",extra_trigger:'#cart_products tr:contains("Storage Box")',trigger:'#cart_products tr:contains("Steel") a.js_add_cart_json:eq(1)',},{content:"remove Storage Box",extra_trigger:'#cart_products tr:contains("Steel") input.js_quantity:propValue(2)',trigger:'#cart_products tr:contains("Storage Box") a.js_add_cart_json:first',},{content:"set one",extra_trigger:'#wrap:not(:has(#cart_products tr:contains("Storage Box")))',trigger:'#cart_products input.js_quantity',run:'text 1',},{content:"go to checkout",extra_trigger:'#cart_products input.js_quantity:propValue(1)',trigger:'a[href*="/shop/checkout"]',},{content:"select payment",trigger:'#payment_method label:contains("Wire Transfer")',},{content:"Pay Now",extra_trigger:'#payment_method label:contains("Wire Transfer") input:checked,#payment_method:not(:has("input:radio:visible"))',trigger:'button[id="o_payment_form_pay"]:visible:not(:disabled)',},{content:"finish",trigger:'.oe_website_sale:contains("Pending... The order will be validated after the payment.")',timeout:30000,}]);});;

/* /website_sale/static/src/js/website_sale_tracking.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale.tracking',function(require){var sAnimations=require('website.content.snippets.animation');sAnimations.registry.websiteSaleTracking=sAnimations.Class.extend({selector:'.oe_website_sale',read_events:{'click form[action="/shop/cart/update"] a.a-submit':'_onAddProductIntoCart','click a[href="/shop/checkout"]':'_onCheckoutStart','click div.oe_cart a[href^="/web?redirect"][href$="/shop/checkout"]':'_onCustomerSignin','click form[action="/shop/confirm_order"] a.a-submit':'_onOrder','click form[target="_self"] button[type=submit]':'_onOrderPayment',},start:function(){var self=this;var def=this._super.apply(this,arguments);if(this.editableMode){return def;}
if(this.$el.is('#product_detail')){var productID=this.$('input[name="product_id"]').attr('value');this._vpv('/stats/ecom/product_view/'+productID);}
if(this.$('div.oe_website_sale_tx_status').length){this._trackGA('require','ecommerce');var orderID=this.$('div.oe_website_sale_tx_status').data('order-id');this._vpv('/stats/ecom/order_confirmed/'+orderID);this._rpc({route:'/shop/tracking_last_order/',}).then(function(o){self._trackGA('ecommerce:clear');if(o.transaction&&o.lines){self._trackGA('ecommerce:addTransaction',o.transaction);_.forEach(o.lines,function(line){self._trackGA('ecommerce:addItem',line);});}
self._trackGA('ecommerce:send');});}
return def;},_trackGA:function(){websiteGA=window.ga||function(){};websiteGA.apply(this,arguments);},_vpv:function(page){this._trackGA('send','pageview',{'page':page,'title':document.title,});},_onAddProductIntoCart:function(){var productID=this.$('input[name="product_id"]').attr('value');this._vpv('/stats/ecom/product_add_to_cart/'+productID);},_onCheckoutStart:function(){this._vpv('/stats/ecom/customer_checkout');},_onCustomerSignin:function(){this._vpv('/stats/ecom/customer_signin');},_onOrder:function(){if($('#top_menu [href="/web/login"]').length){this._vpv('/stats/ecom/customer_signup');}
this._vpv('/stats/ecom/order_checkout');},_onOrderPayment:function(){var method=$('#payment_method input[name=acquirer]:checked').nextAll('span:first').text();this._vpv('/stats/ecom/order_payment/'+method);},});});;

/* /website_sale/static/src/js/website_sale_tour_shop_customize.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale.tour_shop_customize',function(require){'use strict';var tour=require("web_tour.tour");var base=require("web_editor.base");tour.register('shop_customize',{test:true,url:'/shop',wait_for:base.ready()},[{content:"open customize menu",trigger:'#customize-menu > a',},{content:"click on 'Product Attribute's Filters'",trigger:"#customize-menu a:contains(Product Attribute's Filters)",},{content:"select product attribute Steel",extra_trigger:'body:not(:has(#customize-menu:visible .dropdown-menu:visible))',trigger:'form.js_attributes label:contains(Steel) input:not(:checked)',},{content:"check the selection",trigger:'form.js_attributes label:contains(Steel) input:checked',run:function(){},},{content:"select product",extra_trigger:'body:not(:has(.oe_website_sale .oe_product_cart:eq(3)))',trigger:'.oe_product_cart a:contains("Test Product")',},{content:"open customize menu",trigger:'#customize-menu',extra_trigger:"#product_detail",run:function(){$('body').addClass('notReady');var ajax=odoo.__DEBUG__.services['web.ajax'];var get_group_payload={model:'ir.model.data',method:'xmlid_to_res_id',args:['product.group_product_variant',false],kwargs:{}};ajax.jsonpRpc('/web/dataset/call_kw','call',get_group_payload).then(function(group_id){ajax.jsonpRpc('/web/dataset/call_kw','call',{model:'res.groups',method:'write',args:[group_id,{'users':[[4,1]]}],kwargs:{}}).then(function(){location.reload(true);});});},},{content:"open customize menu",trigger:'#customize-menu > a',extra_trigger:'body:not(.notReady)',},{content:"check page loaded after enable  variant group",trigger:'#customize-menu a:contains(List View of Variants)',run:function(){},},{content:"check list view of variants is disabled initially",trigger:'body:not(:has(.js_product_change))',run:function(){},},{content:"click on 'List View of Variants'",trigger:"#customize-menu a:contains(List View of Variants)",},{content:"check page loaded after list of variant customization enabled",trigger:'.js_product_change',run:function(){},},{context:"check variant price",trigger:'.custom-radio:contains("Aluminium") .badge:contains("+") .oe_currency_value:contains("50.4")',run:function(){},},{content:"check price is 750",trigger:".product_price .oe_price .oe_currency_value:containsExact(750.00)",run:function(){},},{content:"switch to another variant",trigger:".js_product label:contains('Aluminium')",},{content:"verify that price has changed when changing variant",trigger:".product_price .oe_price .oe_currency_value:containsExact(800.40)",run:function(){},},{content:"open customize menu",trigger:'#customize-menu > a',},{content:"remove 'List View of Variants'",trigger:"#customize-menu a:contains(List View of Variants):has(input:checked)",},{content:"check page loaded after list of variant customization disabled",trigger:".js_product:not(:has(.js_product_change))",run:function(){},},{content:"check price is 750",trigger:".product_price .oe_price .oe_currency_value:containsExact(750.00)",run:function(){},},{content:"switch to Aluminium variant",trigger:'.js_product input[data-value_name="Aluminium"]',},{content:"verify that price has changed when changing variant",trigger:".product_price .oe_price .oe_currency_value:containsExact(800.40)",run:function(){},},{content:"switch back to Steel variant",trigger:".js_product label:contains('Steel')",},{content:"check price is 750",trigger:".product_price .oe_price .oe_currency_value:containsExact(750.00)",run:function(){},},{content:"click on 'Add to Cart' button",trigger:"a:contains(Add to Cart)",},{content:"check quantity",trigger:'.my_cart_quantity:containsExact(1),.o_extra_menu_items .fa-plus',run:function(){},},{content:"click on shop",trigger:"a:contains(Continue Shopping)",extra_trigger:'body:not(:has(#products_grid_before .js_attributes))',},{content:"open customize menu bis",extra_trigger:'#products_grid_before .js_attributes',trigger:'#customize-menu > a',},{content:"remove 'Product Attribute's Filters'",trigger:"#customize-menu a:contains(Product Attribute's Filters):has(input:checked)",},{content:"finish",extra_trigger:'body:not(:has(#products_grid_before .js_attributes))',trigger:'#wrap:not(:has(li:has(.my_cart_quantity):visible))',run:function(){},},]);});;

/* /website_sale/static/src/js/website_sale_tour_shop_custom_attribute_value.js defined in bundle 'web.assets_frontend' */
odoo.define("website_sale.tour_shop_custom_attribute_value",function(require){"use strict";var tour=require("web_tour.tour");var base=require("web_editor.base");var optionVariantImage;tour.register("shop_custom_attribute_value",{url:"/shop?search=Customizable Desk",test:true,wait_for:base.ready()},[{content:"click on Customizable Desk",trigger:'.oe_product_cart a:contains("Customizable Desk")',},{trigger:'li.js_attribute_value span:contains(Custom)',extra_trigger:'li.js_attribute_value',run:'click',},{trigger:'input.variant_custom_value',run:'text Wood',},{trigger:'a:contains(Add to Cart)',run:'click',},{trigger:'div:contains(Custom: Wood)',extra_trigger:'.js_product.in_cart.main_product',run:function(){}},{trigger:'button.js_add_cart_json:has(i.fa-plus)',run:'click',},{trigger:'div.oe_striked_price span:contains(750)',run:function(){},},{trigger:'span.oe_price span:contains(600)',run:function(){},},{trigger:'.oe_optional_products_modal .js_product:eq(1) div:contains("Conference Chair (Steel)")',run:function(){optionVariantImage=$('.oe_optional_products_modal .js_product:eq(1) img.variant_image').attr('src');}},{trigger:'.oe_optional_products_modal .js_product:eq(1) input[data-value_name="Aluminium"]',},{trigger:'.oe_optional_products_modal .js_product:eq(1) div:contains("Conference Chair (Aluminium)")',run:function(){var newVariantImage=$('.oe_optional_products_modal .js_product:eq(1) img.variant_image').attr('src');if(newVariantImage!==optionVariantImage){$('<p>').text('image variant option src changed').insertAfter('.oe_optional_products_modal .js_product:eq(1) .product-name');}}},{extra_trigger:'.oe_optional_products_modal .js_product:eq(1) div:contains("image variant option src changed")',trigger:'.oe_optional_products_modal .js_product:eq(1) input[data-value_name="Steel"]',},{trigger:'li.js_attribute_value span:contains(Aluminium)',extra_trigger:'.oe_optional_products_modal',run:'click'},{trigger:'.oe_price span:contains(22.90)',run:function(){},},{trigger:'.oe_optional_products_modal .js_product:has(strong:contains(Conference Chair)) .js_add',extra_trigger:'.oe_optional_products_modal .js_product:has(strong:contains(Conference Chair))',run:'click'},{trigger:'.oe_optional_products_modal .js_product:has(strong:contains(Chair floor protection)) .js_add',extra_trigger:'.oe_optional_products_modal .js_product:has(strong:contains(Chair floor protection))',run:'click'},{trigger:'span:contains(1,269.80)',run:function(){},},{trigger:'button:has(span:contains(Proceed to Checkout))',run:'click',},{trigger:'span:contains(Custom: Wood)',extra_trigger:'#cart_products',run:function(){},}]);});;

/* /website_sale/static/src/js/website_sale_tour_shop_zoom.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale.tour_shop_zoom',function(require){'use strict';var tour=require('web_tour.tour');var base=require('web_editor.base');var imageSelector='#o-carousel-product .carousel-item.active img';var imageName="A Colorful Image";var nameGreen="Forest Green";tour.register('shop_zoom',{test:true,url:'/shop?search='+imageName,wait_for:base.ready(),},[{content:"select "+imageName,trigger:'.oe_product_cart a:containsExact("'+imageName+'")',},{content:"click on the image",trigger:imageSelector,run:'clicknoleave',},{content:"check there is no zoom on that small image",trigger:'body:not(:has(.zoomodoo-flyout img))',},{content:"change variant",trigger:'input[data-attribute_name="Beautiful Color"][data-value_name="'+nameGreen+'"]',run:'click',},{content:"wait for variant to be loaded",trigger:'.oe_currency_value:contains("21.00")'},{content:"click on the image",trigger:imageSelector,run:'clicknoleave',},{content:"check there is a zoom on that big image",trigger:'.zoomodoo-flyout img',},]);});;

/* /website_sale/static/src/js/website_sale_tour_shop_dynamic_variants.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale.tour_shop_dynamic_variants',function(require){'use strict';var tour=require('web_tour.tour');var base=require('web_editor.base');tour.register('tour_shop_dynamic_variants',{test:true,url:'/shop?search=Dynamic Product',wait_for:base.ready(),},[{content:"select Dynamic Product",trigger:'.oe_product_cart a:containsExact("Dynamic Product")',},{content:"click on the second variant",trigger:'input[data-attribute_name="Dynamic Attribute"][data-value_name="Dynamic Value 2"]',},{content:"wait for variant to be loaded",trigger:'.oe_price .oe_currency_value:contains("0.00")',run:function(){},},{content:"click add to cart",extra_trigger:'body:has(input[type="hidden"][name="product_id"][value=0])',trigger:'#add_to_cart',},{content:"check the variant is in the cart",trigger:'td.td-product_name:contains(Dynamic Product (Dynamic Value 2))',},]);});;

/* /website_sale/static/src/js/website_sale_tour_shop_deleted_archived_variants.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale.tour_shop_deleted_archived_variants',function(require){'use strict';var tour=require('web_tour.tour');var base=require('web_editor.base');tour.register('tour_shop_deleted_archived_variants',{test:true,url:'/shop?search=Test Product 2',wait_for:base.ready(),},[{content:"check price on /shop (template price)",trigger:'.oe_product_cart .oe_currency_value:contains("1.00")',},{content:"select Test Product 2",trigger:'.oe_product_cart a:containsExact("Test Product 2")',},{content:"check price (3rd variant)",trigger:'.oe_currency_value:contains("31.00")'},{content:"click on the second variant",trigger:'input[data-attribute_name="My Attribute"][data-value_name="My Value 2"]',},{content:"check combination is not possible",trigger:'.js_main_product.css_not_available .css_not_available_msg:contains("This combination does not exist.")'},{content:"click on the 3rd variant to reset the warning",trigger:'input[data-attribute_name="My Attribute"][data-value_name="My Value 3"]',},{content:"check price (3rd variant)",trigger:'.oe_currency_value:contains("31.00")'},{content:"click on the first variant",trigger:'input[data-attribute_name="My Attribute"][data-value_name="My Value 1"]',},{content:"check combination is not possible",trigger:'.js_main_product.css_not_available .css_not_available_msg:contains("This combination does not exist.")'},{content:"check add to cart not possible",trigger:'#add_to_cart.disabled',run:function(){},}]);});;

/* /website_sale/static/src/js/website_sale_tour_shop_list_view_b2c.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale.tour_shop_list_view_b2c',function(require){'use strict';var base=require('web_editor.base');var rpc=require('web.rpc');var tour=require('web_tour.tour');tour.register('shop_list_view_b2c',{test:true,url:'/shop?search=Test Product',wait_for:base.ready()},[{content:"activate b2c",trigger:'body',run:function(){return rpc.query({model:'res.config.settings',method:'create',args:[{'auth_signup_uninvited':'b2c','show_line_subtotals_tax_selection':'tax_included','group_show_line_subtotals_tax_excluded':false,'group_show_line_subtotals_tax_included':true,}],}).then(function(resId){return rpc.query({model:'res.config.settings',method:'execute',args:[[resId]],}).then(function(){window.location.reload();});});},},{content:"check price on /shop",trigger:'.oe_product_cart .oe_currency_value:contains("825.00")',run:function(){},},{content:"select product",trigger:'.oe_product_cart a:contains("Test Product")',},{content:"check list view of variants is disabled initially (when on /product page)",trigger:'body:not(:has(.js_product_change))',extra_trigger:'#product_details',run:function(){},},{content:"open customize menu",trigger:'#customize-menu > a',extra_trigger:'body:not(.notReady)',},{content:"click on 'List View of Variants'",trigger:'#customize-menu a:contains(List View of Variants)',},{content:"check page loaded after list of variant customization enabled",trigger:'.js_product_change',run:function(){},},{context:"check variant price",trigger:'.custom-radio:contains("Aluminium") .badge:contains("+") .oe_currency_value:contains("55.44")',run:function(){},},{content:"check price is 825",trigger:'.product_price .oe_price .oe_currency_value:containsExact("825.00")',run:function(){},},{content:"switch to another variant",trigger:'.js_product label:contains("Aluminium")',},{content:"verify that price has changed when changing variant",trigger:'.product_price .oe_price .oe_currency_value:containsExact("880.44")',run:function(){},},{content:"click on 'Add to Cart' button",trigger:'a:contains(Add to Cart)',},{content:"check price on /cart",trigger:'#cart_products .oe_currency_value:containsExact("880.44")',run:function(){},},]);});;

/* /website_sale/static/src/js/website_sale_tour_shop_no_variant_attribute.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale.tour_shop_no_variant_attribute',function(require){'use strict';var tour=require('web_tour.tour');var base=require('web_editor.base');tour.register('tour_shop_no_variant_attribute',{test:true,url:'/shop?search=Test Product 3',wait_for:base.ready(),},[{content:"select Test Product 3",trigger:'.oe_product_cart a:containsExact("Test Product 3")',},{content:"check price",trigger:'.oe_currency_value:contains("1.00")',run:function(){},},{content:"add to cart",trigger:'a:contains(Add to Cart)',},{content:"check no_variant value is present",trigger:'.td-product_name:contains(No Variant Attribute: No Variant Value)',extra_trigger:'#cart_products',run:function(){},},{content:"check price is correct",trigger:'.td-price:contains(11.0)',run:function(){},},]);});;

/* /website_sale/static/src/js/website_sale_options.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale_options.website_sale',function(require){'use strict';var core=require('web.core');var _t=core._t;var OptionalProductsModal=require('sale.OptionalProductsModal');var weContext=require('web_editor.context');var sAnimations=require('website.content.snippets.animation');var ProductConfiguratorMixin=require('sale.ProductConfiguratorMixin');require('website_sale.website_sale');sAnimations.registry.WebsiteSaleOptions=sAnimations.Class.extend(ProductConfiguratorMixin,{selector:'.oe_website_sale',read_events:{'click #add_to_cart, #products_grid .product_price .a-submit':'async _onClickAdd',},init:function(){this._super.apply(this,arguments);this.isWebsite=true;delete this.events['change .css_attribute_color input'];delete this.events['change .main_product:not(.in_cart) input.js_quantity'];delete this.events['change [data-attribute_exclusions]'];},_onClickAdd:function(ev){ev.preventDefault();return this._handleAdd($(ev.currentTarget).closest('form'));},_handleAdd:function($form){var self=this;this.$form=$form;this.isWebsite=true;var productSelector=['input[type="hidden"][name="product_id"]','input[type="radio"][name="product_id"]:checked'];var productReady=this.selectOrCreateProduct($form,parseInt($form.find(productSelector.join(', ')).first().val(),10),$form.find('.product_template_id').val(),false);return productReady.done(function(productId){$form.find(productSelector.join(', ')).val(productId);self.rootProduct={product_id:productId,quantity:parseFloat($form.find('input[name="add_qty"]').val()||1),product_custom_attribute_values:self.getCustomVariantValues($form.find('.js_product')),variant_values:self.getSelectedVariantValues($form.find('.js_product')),no_variant_attribute_values:self.getNoVariantAttributeValues($form.find('.js_product'))};self.optionalProductsModal=new OptionalProductsModal($form,{rootProduct:self.rootProduct,isWebsite:true,okButtonText:_t('Proceed to Checkout'),cancelButtonText:_t('Continue Shopping'),title:_t('Add to cart')}).open();self.optionalProductsModal.on('options_empty',null,self._onModalOptionsEmpty.bind(self));self.optionalProductsModal.on('update_quantity',null,self._onOptionsUpdateQuantity.bind(self));self.optionalProductsModal.on('confirm',null,self._onModalConfirm.bind(self));self.optionalProductsModal.on('back',null,self._onModalBack.bind(self));return self.optionalProductsModal.opened();});},_onModalOptionsEmpty:function(){var $productCustomVariantValues=$('<input>',{name:'product_custom_attribute_values',type:"hidden",value:JSON.stringify(this.rootProduct.product_custom_attribute_values)});this.$form.append($productCustomVariantValues);var $productNoVariantAttributeValues=$('<input>',{name:'no_variant_attribute_values',type:"hidden",value:JSON.stringify(this.rootProduct.no_variant_attribute_values)});this.$form.append($productNoVariantAttributeValues);this.$form.trigger('submit',[true]);},_onOptionsUpdateQuantity:function(quantity){var $qtyInput=this.$form.find('.js_main_product input[name="add_qty"]').first();if($qtyInput.length){$qtyInput.val(quantity).trigger('change');}else{this.optionalProductsModal.triggerVariantChange(this.optionalProductsModal.$el);}},_onModalBack:function(){this._onModalSubmit(false);},_onModalConfirm:function(){this._onModalSubmit(true);},_onModalSubmit:function(goToShop){var customValues=JSON.stringify(this.optionalProductsModal.getSelectedProducts());this.$form.ajaxSubmit({url:'/shop/cart/update_option',data:{lang:weContext.get().lang,custom_values:customValues},success:function(quantity){if(goToShop){var path=window.location.pathname.replace(/shop([\/?].*)?$/,"shop/cart");window.location.pathname=path;}
var $quantity=$(".my_cart_quantity");$quantity.parent().parent().removeClass("d-none",!quantity);$quantity.html(quantity).hide().fadeIn(600);}});},});return sAnimations.registry.WebsiteSaleOptions;});;

/* /website_sale_comparison/static/src/js/website_sale_comparison.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale_comparison.comparison',function(require){'use strict';var concurrency=require('web.concurrency');var core=require('web.core');var utils=require('web.utils');var Widget=require('web.Widget');var ProductConfiguratorMixin=require('sale.ProductConfiguratorMixin');var sAnimations=require('website.content.snippets.animation');var website_sale_utils=require('website_sale.utils');var qweb=core.qweb;var _t=core._t;var ProductComparison=Widget.extend(ProductConfiguratorMixin,{xmlDependencies:['/website_sale_comparison/static/src/xml/comparison.xml'],template:'product_comparison_template',events:{'click .o_product_panel_header':'_onClickPanelHeader',},init:function(){this._super.apply(this,arguments);this.product_data={};this.comparelist_product_ids=JSON.parse(utils.get_cookie('comparelist_product_ids')||'[]');this.product_compare_limit=4;this.guard=new concurrency.Mutex();},start:function(){var self=this;self._loadProducts(this.comparelist_product_ids).then(function(){self._updateContent('hide');});self._updateComparelistView();$('#comparelist .o_product_panel_header').popover({trigger:'manual',animation:true,html:true,title:function(){return _t("Compare Products");},container:'.o_product_feature_panel',placement:'top',template:qweb.render('popover'),content:function(){return $('#comparelist .o_product_panel_content').html();}});$(document.body).on('click.product_comparaison_widget','.comparator-popover .o_comparelist_products .o_remove',function(ev){ev.preventDefault();self._removeFromComparelist(ev);});$(document.body).on('click.product_comparaison_widget','.o_comparelist_remove',function(ev){self._removeFromComparelist(ev);var new_link='/shop/compare/?products='+self.comparelist_product_ids.toString();window.location.href=_.isEmpty(self.comparelist_product_ids)?'/shop':new_link;});return this._super.apply(this,arguments);},destroy:function(){this._super.apply(this,arguments);$(document.body).off('.product_comparaison_widget');},handleCompareAddition:function($elem){var self=this;if(this.comparelist_product_ids.length<this.product_compare_limit){var productId=$elem.data('product-product-id');if($elem.hasClass('o_add_compare_dyn')){productId=$elem.parent().find('.product_id').val();if(!productId){productId=$elem.parent().find('input:checked').first().val();}}
var productReady=this.selectOrCreateProduct($elem.closest('form'),productId,$elem.closest('form').find('.product_template_id').val(),false);productReady.done(function(productId){productId=parseInt(productId,10);if(!productId){return;}
self._addNewProducts(productId);website_sale_utils.animateClone($('#comparelist .o_product_panel_header'),$elem.closest('form'),-50,10);});}else{this.$('.o_comparelist_limit_warning').show();$('#comparelist .o_product_panel_header').popover('show');}},_loadProducts:function(product_ids){var self=this;return this._rpc({route:'/shop/get_product_data',params:{product_ids:product_ids,cookies:JSON.parse(utils.get_cookie('comparelist_product_ids')||'[]'),},}).then(function(data){self.comparelist_product_ids=JSON.parse(data.cookies);delete data.cookies;_.each(data,function(product){self.product_data[product.product.id]=product;});});},_togglePanel:function(){$('#comparelist .o_product_panel_header').popover('toggle');},_addNewProducts:function(product_id){this.guard.exec(this._addNewProductsImpl.bind(this,product_id));},_addNewProductsImpl:function(product_id){var self=this;$('.o_product_feature_panel').addClass('d-md-block');if(!_.contains(self.comparelist_product_ids,product_id)){self.comparelist_product_ids.push(product_id);if(_.has(self.product_data,product_id)){self._updateContent();}else{return self._loadProducts([product_id]).then(function(){self._updateContent();self._updateCookie();});}}
self._updateCookie();},_updateContent:function(force){var self=this;this.$('.o_comparelist_products .o_product_row').remove();_.each(this.comparelist_product_ids,function(res){var $template=self.product_data[res].render;self.$('.o_comparelist_products').append($template);});if(force!=='hide'&&(this.comparelist_product_ids.length>1||force==='show')){$('#comparelist .o_product_panel_header').popover('show');}
else{$('#comparelist .o_product_panel_header').popover('hide');}},_removeFromComparelist:function(e){this.guard.exec(this._removeFromComparelistImpl.bind(this,e));},_removeFromComparelistImpl:function(e){this.comparelist_product_ids=_.without(this.comparelist_product_ids,$(e.currentTarget).data('product_product_id'));$(e.currentTarget).parents('.o_product_row').remove();this._updateCookie();$('.o_comparelist_limit_warning').hide();this._updateContent('show');},_updateCookie:function(){document.cookie='comparelist_product_ids='+JSON.stringify(this.comparelist_product_ids)+'; path=/';this._updateComparelistView();},_updateComparelistView:function(){this.$('.o_product_circle').text(this.comparelist_product_ids.length);this.$('.o_comparelist_button').removeClass('d-md-block');if(_.isEmpty(this.comparelist_product_ids)){$('.o_product_feature_panel').removeClass('d-md-block');}else{$('.o_product_feature_panel').addClass('d-md-block');this.$('.o_comparelist_products').addClass('d-md-block');if(this.comparelist_product_ids.length>=2){this.$('.o_comparelist_button').addClass('d-md-block');this.$('.o_comparelist_button a').attr('href','/shop/compare/?products='+this.comparelist_product_ids.toString());}}},_onClickPanelHeader:function(){this._togglePanel();},});sAnimations.registry.ProductComparison=sAnimations.Class.extend({selector:'.oe_website_sale',read_events:{'click .o_add_compare, .o_add_compare_dyn':'_onClickAddCompare','click #o_comparelist_table tr':'_onClickComparelistTr',},start:function(){var def=this._super.apply(this,arguments);if(this.editableMode){return def;}
this.productComparison=new ProductComparison(this);return $.when(def,this.productComparison.appendTo(this.$el));},_onClickAddCompare:function(ev){this.productComparison.handleCompareAddition($(ev.currentTarget));},_onClickComparelistTr:function(ev){var $target=$(ev.currentTarget);$($target.data('target')).children().slideToggle(100);$target.find('.fa-chevron-circle-down, .fa-chevron-circle-right').toggleClass('fa-chevron-circle-down fa-chevron-circle-right');},});});;

/* /website_sale_comparison/static/src/js/website_sale_tour_comparison.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale_comparison.tour_comparison',function(require){'use strict';var tour=require('web_tour.tour');var rpc=require('web.rpc');tour.register('product_comparison',{test:true,url:"/shop",},[{content:"add first product 'Three-Seat Sofa' in a comparison list",trigger:'.oe_product_cart:contains("Three-Seat Sofa") .o_add_compare',},{content:"check compare button contains one product",trigger:'.o_product_circle:contains(1)',run:function(){},},{content:"check popover is closed when only one product",trigger:'body:not(:has(.comparator-popover))',run:function(){},},{content:"add second product 'Conference Chair' in a comparison list",trigger:'.oe_product_cart:contains("Conference Chair") .o_add_compare',},{content:"check popover is now open and compare button contains two products",extra_trigger:'.comparator-popover',trigger:' .o_product_circle:contains(2)',run:function(){},},{content:"check products name are correct in the comparelist",extra_trigger:'.o_product_row:contains("Three-Seat Sofa")',trigger:'.o_product_row:contains("Conference Chair")',run:function(){},},{content:"go to product page of customizable desk(with variants)",trigger:'.oe_product_cart a:contains("Customizable Desk")',},{content:"check compare button is still there and contains 2 products",extra_trigger:'#product_details',trigger:'.o_product_circle:contains(2)',run:function(){},},{content:"check popover is closed after changing page",trigger:'body:not(:has(.comparator-popover))',run:function(){},},{content:"add first variant to comparelist",trigger:'.o_add_compare_dyn',},{content:"check the comparelist is now open and contains 3rd product with correct variant",extra_trigger:'.comparator-popover',trigger:'.o_product_row:contains("Customizable Desk (Steel, White)")',run:function(){},},{content:"select 2nd variant(Black Color)",trigger:'.variant_attribute[data-attribute_name="Color"] input[data-value_name="Black"]',},{content:"click on compare button to add in comparison list when variant changed",extra_trigger:'.carousel-indicators li:eq(1)',trigger:'.o_add_compare_dyn',},{content:"comparelist contains 4th product with correct variant",extra_trigger:'.o_product_circle:contains(4)',trigger:'.o_product_row:contains("Customizable Desk (Steel, Black)")',run:function(){},},{content:"check limit is not reached",trigger:':not(.o_comparelist_limit_warning)',run:function(){},},{content:"select 3nd variant(Custom)",trigger:'.variant_attribute[data-attribute_name="Legs"] input[data-value_name="Custom"]',},{content:"click on compare button to add in comparison list when variant changed",extra_trigger:'body:not(:has(.carousel-indicators))',trigger:'.o_add_compare_dyn',},{content:"check limit is reached",trigger:'.o_comparelist_limit_warning',run:function(){},},{content:"click on compare button",trigger:'.o_comparelist_button a',},{content:"check 1st product contains correct variant",trigger:'.o_product_comparison_table:contains("Conference Chair (Steel)")',run:function(){},},{content:"check 2nd product contains correct variant",trigger:'.o_product_comparison_table:contains("Customizable Desk (Steel, White)")',run:function(){},},{content:"check 3rd product is correctly added",trigger:'.o_product_comparison_table:contains("Customizable Desk (Steel, Black)")',run:function(){},},{content:"check 4th product is correctly added",trigger:'.o_product_comparison_table:contains("Three-Seat Sofa")',run:function(){},},{content:"remove one product from compare table",trigger:'#o_comparelist_table',run:function(){$('#o_comparelist_table td:contains("Customizable Desk (Steel, Black)") .o_comparelist_remove').click();},},{content:"check customizable table with black variant is removed",trigger:'#o_comparelist_table:not(:contains("Customizable Desk (Steel, Black)"))',run:function(){},},{content:"open compare menu",extra_trigger:'body:has(.o_product_row:contains("Three-Seat Sofa") .o_remove)',trigger:'.o_product_panel_header',},{content:"remove product",trigger:'.o_product_row:contains("Three-Seat Sofa") .o_remove',},{content:"click on compare button to reload",trigger:'.o_comparelist_button a',},{content:"check product 'Three-Seat Sofa' is removed",trigger:'#o_comparelist_table:not(:contains("Three-Seat Sofa"))',run:function(){},},{content:"add product 'Conference Chair' to cart",trigger:'.product_summary:contains("Conference Chair") .a-submit:contains("Add to Cart")',},{content:"check product correctly added to cart",trigger:'#cart_products:contains("Conference Chair") .js_quantity[value="1"]',run:function(){},},{content:"create product with newly created attribute and its values and set alternative product",trigger:'body',run:function(){rpc.query({model:'product.attribute',method:'create',args:[{'name':'color','type':'color','create_variant':'dynamic',}],}).then(function(attributeId){rpc.query({model:'product.template',method:'create',args:[{'name':'Basic Chair','is_published':true,'attribute_line_ids':[[0,0,{'attribute_id':attributeId,'value_ids':[[0,0,{'name':'red','attribute_id':attributeId,'sequence':1}],[0,0,{'name':'blue','attribute_id':attributeId,'sequence':2}],],}]],}],}).then(function(productId){rpc.query({model:'product.template',method:'create',args:[{'name':'Classic Chair','is_published':true,'attribute_line_ids':[[0,0,{'attribute_id':attributeId,'value_ids':[[0,0,{'name':'green','attribute_id':attributeId,'sequence':3}],[0,0,{'name':'yellow','attribute_id':attributeId,'sequence':4}],],}]],'alternative_product_ids':[[6,0,[productId]]],}],}).then(function(){window.location.href='/shop?search=Classic Chair';});});});},},{content:"click on product",trigger:'.oe_product_cart a:contains("Classic Chair")',},{content:"click on compare button",trigger:'.btn.btn-primary:not(.btn-block):contains("Compare")',},{content:"check product 'Classic Chair' with first variant (green) is on compare page",trigger:'.o_product_comparison_table:contains("Classic Chair (green)")',run:function(){},},{content:"check alternative product 'Basic Chair' with first variant (red) is on compare page",trigger:'.o_product_comparison_table:contains("Basic Chair (red)")',run:function(){},},{content:"check there is the correct attribute",trigger:'.Uncategorized:contains("color"):contains("red")',run:function(){},},]);});;

/* /website_sale_wishlist/static/src/js/website_sale_wishlist.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale_wishlist.wishlist',function(require){"use strict";var sAnimations=require('website.content.snippets.animation');var wSaleUtils=require('website_sale.utils');var ProductConfiguratorMixin=require('sale.ProductConfiguratorMixin');sAnimations.registry.ProductWishlist=sAnimations.Class.extend(ProductConfiguratorMixin,{selector:'.oe_website_sale',read_events:{'click #my_wish':'_onClickMyWish','click .o_add_wishlist, .o_add_wishlist_dyn':'_onClickAddWish','change input.product_id':'_onChangeVariant','change input.js_product_change':'_onChangeProduct','click .wishlist-section .o_wish_rm':'_onClickWishRemove','click .wishlist-section .o_wish_add':'_onClickWishAdd',},events:sAnimations.Class.events,init:function(parent){this._super.apply(this,arguments);this.wishlistProductIDs=[];},willStart:function(){var self=this;var def=this._super.apply(this,arguments);if(this.editableMode){return def;}
var wishDef=$.get('/shop/wishlist',{count:1,}).then(function(res){self.wishlistProductIDs=JSON.parse(res);});return $.when(def,wishDef);},start:function(){var def=this._super.apply(this,arguments);if(this.editableMode){return def;}
this._updateWishlistView();if(this.$('input.js_product_change').length){this.$('input.js_product_change:checked').first().trigger('change');}else{this.$('input.product_id').first().trigger('change');}
return def;},_addNewProducts:function($el){var self=this;var productID=$el.data('product-product-id');if($el.hasClass('o_add_wishlist_dyn')){productID=$el.parent().find('.product_id').val();if(!productID){productID=$el.parent().find('input:checked').first().val();}
productID=parseInt(productID,10);}
var $form=$el.closest('form');var templateId=$form.find('.product_template_id').val();if(!templateId){templateId=$el.data('product-template-id');}
$el.prop("disabled",true).addClass('disabled');var productReady=this.selectOrCreateProduct($el.closest('form'),productID,templateId,false);productReady.done(function(productId){productId=parseInt(productId,10);if(productId&&!_.contains(self.wishlistProductIDs,productId)){return self._rpc({route:'/shop/wishlist/add',params:{product_id:productId,},}).then(function(){self.wishlistProductIDs.push(productId);self._updateWishlistView();wSaleUtils.animateClone($('#my_wish'),$el.closest('form'),25,40);}).fail(function(){$el.prop("disabled",false).removeClass('disabled');});}}).fail(function(){$el.prop("disabled",false).removeClass('disabled');});},_updateWishlistView:function(){if(this.wishlistProductIDs.length>0){$('#my_wish').show();$('.my_wish_quantity').text(this.wishlistProductIDs.length);}else{$('#my_wish').hide();}},_removeWish:function(e,deferred_redirect){var tr=$(e.currentTarget).parents('tr');var wish=tr.data('wish-id');var product=tr.data('product-id');var self=this;this._rpc({route:'/shop/wishlist/remove/'+wish,}).done(function(){$(tr).hide();});this.wishlistProductIDs=_.without(this.wishlistProductIDs,product);if(this.wishlistProductIDs.length===0){deferred_redirect=deferred_redirect?deferred_redirect:$.Deferred();deferred_redirect.then(function(){self._redirectNoWish();});}
this._updateWishlistView();},_addOrMoveWish:function(e){var tr=$(e.currentTarget).parents('tr');var product=tr.data('product-id');$('#my_cart').removeClass('d-none');wSaleUtils.animateClone($('#my_cart'),tr,25,40);if($('#b2b_wish').is(':checked')){return this._addToCart(product,tr.find('add_qty').val()||1);}else{var adding_deffered=this._addToCart(product,tr.find('add_qty').val()||1);this._removeWish(e,adding_deffered);return adding_deffered;}},_addToCart:function(productID,qty_id){return this._rpc({route:"/shop/cart/update_json",params:{product_id:parseInt(productID,10),add_qty:parseInt(qty_id,10),display:false,},}).then(function(resp){if(resp.warning){if(!$('#data_warning').length){$('.wishlist-section').prepend('<div class="mt16 alert alert-danger alert-dismissable" role="alert" id="data_warning"></div>');}
var cart_alert=$('.wishlist-section').parent().find('#data_warning');cart_alert.html('<button type="button" class="close" data-dismiss="alert" >&times;</button> '+resp.warning);}
$('.my_cart_quantity').html(resp.cart_quantity||'<i class="fa fa-warning" /> ');});},_redirectNoWish:function(){window.location.href='/shop/cart';},_onClickMyWish:function(){if(this.wishlistProductIDs.length===0){this._updateWishlistView();this._redirectNoWish();return;}
window.location='/shop/wishlist';},_onClickAddWish:function(ev){this._addNewProducts($(ev.currentTarget));},_onChangeVariant:function(ev){var $input=$(ev.target);var $parent=$input.closest('.js_product');var $el=$parent.find("[data-action='o_wishlist']");if(!_.contains(this.wishlistProductIDs,parseInt($input.val(),10))){$el.prop("disabled",false).removeClass('disabled').removeAttr('disabled');}else{$el.prop("disabled",true).addClass('disabled').attr('disabled','disabled');}
$el.data('product-product-id',parseInt($input.val(),10));},_onChangeProduct:function(ev){var productID=ev.currentTarget.value;var $el=$(ev.target).closest('.js_add_cart_variants').find("[data-action='o_wishlist']");if(!_.contains(this.wishlistProductIDs,parseInt(productID,10))){$el.prop("disabled",false).removeClass('disabled').removeAttr('disabled');}else{$el.prop("disabled",true).addClass('disabled').attr('disabled','disabled');}
$el.data('product-product-id',productID);},_onClickWishRemove:function(ev){this._removeWish(ev,false);},_onClickWishAdd:function(ev){var self=this;this.$('.wishlist-section .o_wish_add').addClass('disabled');this._addOrMoveWish(ev).then(function(){self.$('.wishlist-section .o_wish_add').removeClass('disabled');});},});});;

/* /website_sale_wishlist/static/src/js/website_sale_tour_wishlist.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale_wishlist.tour',function(require){'use strict';var rpc=require('web.rpc');var tour=require("web_tour.tour");var base=require("web_editor.base");tour.register('shop_wishlist',{test:true,url:'/shop',wait_for:base.ready(),},[{content:"click on add to wishlist",trigger:'.o_add_wishlist',},{content:"go to wishlist",extra_trigger:'a[href="/shop/wishlist"] .badge:contains(1)',trigger:'a[href="/shop/wishlist"]',},{content:"remove first item in whishlist",trigger:'.o_wish_rm:first',},{content:"go back to the store",trigger:"a[href='/shop']"},{content:"click on add to wishlist",trigger:'.o_add_wishlist',},{content:"check value of wishlist and go to login",extra_trigger:".my_wish_quantity:contains(1)",trigger:'a[href="/web/login"]',},{content:"submit login",trigger:".oe_login_form",run:function(){$('.oe_login_form input[name="login"]').val("admin");$('.oe_login_form input[name="password"]').val("admin");$('.oe_login_form input[name="redirect"]').val("/shop");$('.oe_login_form').submit();},},{content:"check that logged in",trigger:"li span:contains('Mitchell Admin')",run:function(){},},{content:"click on Customizable Desk",trigger:'.oe_product_cart a:contains("Customizable Desk")',},{content:"check the first variant is already in wishlist",trigger:'#product_detail .o_add_wishlist_dyn:disabled',run:function(){},},{content:"change variant",extra_trigger:'#product_detail label:contains(Aluminium) input',trigger:'label:contains(Aluminium) input',},{content:"wait button enable and click on add to wishlist",extra_trigger:'#product_detail .o_add_wishlist_dyn:not(:disabled)',trigger:'#product_detail .o_add_wishlist_dyn',},{content:"check that wishlist contains 2 items and go to wishlist",extra_trigger:'a[href="/shop/wishlist"] .badge:contains(2)',trigger:'a[href="/shop/wishlist"]',},{content:"remove Customizable Desk",trigger:'tr:contains("Customizable Desk") .o_wish_rm:first',},{content:"check that wishlist contains 1 item",trigger:".my_wish_quantity:contains(1)",run:function(){},},{content:"check B2B wishlist mode",trigger:"input#b2b_wish",},{content:"add item to cart",trigger:'.o_wish_add:eq(1)',},{content:"check that cart contains 1 item",trigger:".my_cart_quantity:contains(1)",run:function(){},},{content:"check that wishlist contains 1 item",trigger:".my_wish_quantity:contains(1)",run:function(){},},{content:"remove B2B wishlist mode",trigger:"input#b2b_wish",},{content:"add last item to cart",trigger:'.o_wish_add:eq(1)',},{content:"check that user is redirect - wishlist is empty",trigger:"#wrap #cart_products",run:function(){},},{content:"check that cart contains 2 items",trigger:".my_cart_quantity:contains(2)",run:function(){},},{content:"check that wishlist is empty and no more visible",trigger:":not(:has(.my_wish_quantity:visible))",run:function(){},},{content:"Create a product with dynamic attribute and its values.",trigger:'body',run:function(){rpc.query({model:'product.attribute',method:'create',args:[{'name':"color",'type':'color','create_variant':'dynamic'}],}).then(function(attributeId){return rpc.query({model:'product.template',method:'create',args:[{'name':"Bottle",'is_published':true,'attribute_line_ids':[[0,0,{'attribute_id':attributeId,'value_ids':[[0,0,{'name':"red",'attribute_id':attributeId,}],[0,0,{'name':"blue",'attribute_id':attributeId,}],[0,0,{'name':"black",'attribute_id':attributeId,}],]}]],}],});}).then(function(){window.location.href='/web/session/logout?redirect=/shop?search=Bottle';});},},{content:"Add Bottle to wishlist from /shop",extra_trigger:'.oe_product_cart:contains("Bottle")',trigger:'.oe_product_cart:contains("Bottle") .o_add_wishlist',},{content:"Check that wishlist contains 1 item",trigger:'.my_wish_quantity:contains(1)',run:function(){},},{content:"Click on product",extra_trigger:'.oe_product_cart:contains("Bottle") .o_add_wishlist.disabled',trigger:'.oe_product_cart a:contains("Bottle")',},{content:"Select Bottle with second variant from /product",trigger:'.js_variant_change[data-value_name="blue"]',},{content:"Add product in wishlist",extra_trigger:'#product_detail .o_add_wishlist_dyn:not(".disabled")',trigger:'#product_detail .o_add_wishlist_dyn',},{content:"Select Bottle with third variant from /product",trigger:'.js_variant_change[data-value_name="black"]',},{content:"Add product in wishlist",extra_trigger:'#product_detail .o_add_wishlist_dyn:not(".disabled")',trigger:'#product_detail .o_add_wishlist_dyn',},{content:"Check that wishlist contains 3 items and go to wishlist",trigger:'.my_wish_quantity:contains(3)',run:function(){window.location.href='/shop/wishlist';},},{content:"Check wishlist contains first variant",trigger:'#o_comparelist_table tr:contains("red")',run:function(){},},{content:"Check wishlist contains second variant",trigger:'#o_comparelist_table tr:contains("blue")',run:function(){},},{content:"Check wishlist contains third variant, then go to login",trigger:'#o_comparelist_table tr:contains("black")',run:function(){window.location.href="/web/login";},},{content:"Submit login as admin",trigger:'.oe_login_form',run:function(){$('.oe_login_form input[name="login"]').val("admin");$('.oe_login_form input[name="password"]').val("admin");$('.oe_login_form input[name="redirect"]').val("/");$('.oe_login_form').submit();},},{content:"Archive the first variant",trigger:'#top_menu:contains("Mitchell Admin")',run:function(){rpc.query({model:'product.product',method:'search',args:[[['name','=',"Bottle"]]],}).then(function(productIds){return rpc.query({model:'product.product',method:'write',args:[productIds[0],{active:false}],});}).then(function(){window.location.href='/web/session/logout?redirect=/shop?search=Bottle';});},},{content:"Check there is wishlist button on product from /shop",extra_trigger:'.js_sale',trigger:'.oe_product_cart:contains("Bottle") .o_add_wishlist',run:function(){},},{content:"Click on product",trigger:'.oe_product_cart a:contains("Bottle")',},{content:"Select Bottle with first variant (red) from /product",trigger:'.js_variant_change[data-value_name="red"]',},{content:"Check there is no wishlist button when selecting impossible variant",trigger:'#product_detail:not(:has(.o_add_wishlist))',run:function(){},},{content:"Select Bottle with second variant (blue) from /product",trigger:'.js_variant_change[data-value_name="blue"]',},{content:"Click on wishlist when selecting a possible variant from /product",trigger:'#product_detail .o_add_wishlist_dyn:not(.disabled)',},{content:"Check product added to wishlist and go to login",trigger:'.my_wish_quantity:contains(1)',run:function(){window.location.href="/web/login";},},{content:"Submit login",trigger:'.oe_login_form',run:function(){$('.oe_login_form input[name="login"]').val("admin");$('.oe_login_form input[name="password"]').val("admin");$('.oe_login_form input[name="redirect"]').val("/");$('.oe_login_form').submit();},},{content:"Archive all variants",trigger:'#top_menu:contains("Mitchell Admin")',run:function(){rpc.query({model:'product.product',method:'search',args:[[['name','=',"Bottle"]]],}).then(function(productIds){return rpc.query({model:'product.product',method:'write',args:[productIds,{active:false}],});}).then(function(){window.location.href='/web/session/logout?redirect=/shop?search=Bottle';});}},{content:"Check that there is no wishlist button from /shop",extra_trigger:'.js_sale',trigger:'.oe_product_cart:contains("Bottle"):not(:has(.o_add_wishlist))',run:function(){},},{content:"Click on product",trigger:'.oe_product_cart a:contains("Bottle")',},{content:"Check that there is no wishlist button from /product",trigger:'#product_detail:not(:has(.o_add_wishlist_dyn))',run:function(){},},]);});;

/* /website_event/static/src/js/website_geolocation.js defined in bundle 'web.assets_frontend' */
odoo.define('website_event.geolocation',function(require){'use strict';var sAnimation=require('website.content.snippets.animation');sAnimation.registry.visitor=sAnimation.Class.extend({selector:".oe_country_events, .country_events",start:function(){var defs=[this._super.apply(this,arguments)];var self=this;var $eventList=this.$('.country_events_list');this._originalContent=$eventList[0].outerHTML;defs.push(this._rpc({route:'/event/get_country_event_list'}).then(function(data){if(data){self._$loadedContent=$(data);$eventList.replaceWith(self._$loadedContent);}}));return $.when.apply($,defs);},destroy:function(){this._super.apply(this,arguments);this._$loadedContent.replaceWith(this._originalContent);},});});;

/* /website_event/static/src/js/website_event.js defined in bundle 'web.assets_frontend' */
odoo.define('website_event.registration_form.instance',function(require){'use strict';require('web_editor.ready');var EventRegistrationForm=require('website_event.website_event');var $form=$('#registration_form');if(!$form.length){return null;}
var instance=new EventRegistrationForm();return instance.appendTo($form).then(function(){return instance;});});odoo.define('website_event.website_event',function(require){var ajax=require('web.ajax');var core=require('web.core');var Widget=require('web.Widget');var _t=core._t;var EventRegistrationForm=Widget.extend({start:function(){var self=this;var res=this._super.apply(this.arguments).then(function(){$('#registration_form .a-submit').off('click').removeClass('a-submit').click(function(ev){self.on_click(ev);});});return res;},on_click:function(ev){ev.preventDefault();ev.stopPropagation();var $form=$(ev.currentTarget).closest('form');var $button=$(ev.currentTarget).closest('[type="submit"]');var post={};$('#registration_form table').siblings('.alert').remove();$('#registration_form select').each(function(){post[$(this).attr('name')]=$(this).val();});var tickets_ordered=_.some(_.map(post,function(value,key){return parseInt(value);}));if(!tickets_ordered){$('<div class="alert alert-info"/>').text(_t('Please select at least one ticket.')).insertAfter('#registration_form table');return $.Deferred();}else{$button.attr('disabled',true);return ajax.jsonRpc($form.attr('action'),'call',post).then(function(modal){var $modal=$(modal);$modal.modal({backdrop:'static',keyboard:false});$modal.find('.modal-body > div').removeClass('container');$modal.appendTo('body').modal();$modal.on('click','.js_goto_event',function(){$modal.modal('hide');$button.prop('disabled',false);});$modal.on('click','.close',function(){$button.prop('disabled',false);});});}},});return EventRegistrationForm;});;

/* /mail/static/src/js/thread_windows/abstract_thread_window.js defined in bundle 'web.assets_frontend' */
odoo.define('mail.AbstractThreadWindow',function(require){"use strict";var ThreadWidget=require('mail.widget.Thread');var config=require('web.config');var core=require('web.core');var Widget=require('web.Widget');var QWeb=core.qweb;var _t=core._t;var AbstractThreadWindow=Widget.extend({template:'mail.AbstractThreadWindow',custom_events:{escape_pressed:'_onEscapePressed',document_viewer_closed:'_onDocumentViewerClose',},events:{'click .o_thread_window_close':'_onClickClose','click .o_thread_window_title':'_onClickFold','click .o_composer_text_field':'_onComposerClick','click .o_mail_thread':'_onThreadWindowClicked','keydown .o_composer_text_field':'_onKeydown','keypress .o_composer_text_field':'_onKeypress',},FOLD_ANIMATION_DURATION:200,HEIGHT_OPEN:'400px',HEIGHT_FOLDED:'34px',init:function(parent,thread,options){this._super(parent);this.options=_.defaults(options||{},{autofocus:true,displayStars:true,displayReplyIcons:false,displayEmailIcons:false,placeholder:_t("Say something"),});this._hidden=false;this._thread=thread||null;this._debouncedOnScroll=_.debounce(this._onScroll.bind(this),100);if(!this.hasThread()){this._folded=false;}},start:function(){var self=this;this.$input=this.$('.o_composer_text_field');this.$header=this.$('.o_thread_window_header');this._threadWidget=new ThreadWidget(this,{displayMarkAsRead:false,displayStars:this.options.displayStars,});if(this.isFolded()){this.$el.css('height',this.HEIGHT_FOLDED);}else if(this.options.autofocus){this._focusInput();}
if(!config.device.isMobile){var margin_dir=_t.database.parameters.direction==="rtl"?"margin-left":"margin-right";this.$el.css(margin_dir,$.position.scrollbarWidth());}
var def=this._threadWidget.replace(this.$('.o_thread_window_content')).then(function(){self._threadWidget.$el.on('scroll',self,self._debouncedOnScroll);});return $.when(this._super(),def);},do_hide:function(){this._hidden=true;this._super.apply(this,arguments);},do_show:function(){this._hidden=false;this._super.apply(this,arguments);},do_toggle:function(display){this._hidden=_.isBoolean(display)?!display:!this._hidden;this._super.apply(this,arguments);},close:function(){},getID:function(){return this._getThreadID();},getThreadStatus:function(){if(!this.hasThread()){return undefined;}
return this._thread.getStatus();},getTitle:function(){if(!this.hasThread()){return _t("Undefined");}
return this._thread.getTitle();},getUnreadCounter:function(){if(!this.hasThread()){return 0;}
return this._thread.getUnreadCounter();},hasThread:function(){return!!this._thread;},isAtBottom:function(){return this._threadWidget.isAtBottom();},isFolded:function(){if(!this.hasThread()){return this._folded;}
return this._thread.isFolded();},isMobile:function(){return config.device.isMobile;},isHidden:function(){return this._hidden;},needsComposer:function(){return this.hasThread();},render:function(){this.renderHeader();if(this.hasThread()){this._threadWidget.render(this._thread,{displayLoadMore:false});}},renderHeader:function(){var options=this._getHeaderRenderingOptions();this.$header.html(QWeb.render('mail.AbstractThreadWindow.HeaderContent',options));},renderTypingNotificationBar:function(){this._threadWidget.renderTypingNotificationBar(this._thread);},scrollToBottom:function(){this._threadWidget.scrollToBottom();},toggleFold:function(folded){if(!_.isBoolean(folded)){folded=!this.isFolded();}
this._updateThreadFoldState(folded);},updateVisualFoldState:function(){if(!this.isFolded()){this._threadWidget.scrollToBottom();if(this.options.autofocus){this._focusInput();}}
this._animateFold();},_animateFold:function(){this.$el.animate({height:this.isFolded()?this.HEIGHT_FOLDED:this.HEIGHT_OPEN},this.FOLD_ANIMATION_DURATION);},_focusInput:function(){if(config.device.touch&&config.device.size_class<=config.device.SIZES.SM){return;}
this.$input.focus();},_getHeaderRenderingOptions:function(){return{status:this.getThreadStatus(),title:this.getTitle(),unreadCounter:this.getUnreadCounter(),widget:this,};},_getThreadID:function(){if(!this.hasThread()){return'_blank';}
return this._thread.getID();},_hasFocus:function(){return this.$input.is(':focus');},_postMessage:function(messageData){var self=this;if(!this.hasThread()){return;}
this._thread.postMessage(messageData).then(function(){self._threadWidget.scrollToBottom();});},_updateThreadFoldState:function(folded){if(this.hasThread()){this._thread.fold(folded);}else{this._folded=folded;this.updateVisualFoldState();}},_onClickClose:function(ev){ev.stopPropagation();ev.preventDefault();if(this.hasThread()&&this._thread.getUnreadCounter()>0&&!this.isFolded()){this._thread.markAsRead();}
this.close();},_onClickFold:function(){if(!config.device.isMobile){this.toggleFold();}},_onComposerClick:function(ev){if($(ev.target).closest('a, button').length){return;}
this._focusInput();},_onDocumentViewerClose:function(){this._focusInput();},_onEscapePressed:function(){if(!this.isFolded()){this.close();}},_onKeydown:function(ev){ev.stopPropagation();if(ev.which===13){var content=_.str.trim(this.$input.val());var messageData={content:content,attachment_ids:[],partner_ids:[],};this.$input.val('');if(content){this._postMessage(messageData);}}},_onKeypress:function(ev){ev.stopPropagation();},_onScroll:function(){if(this.hasThread()&&this.isAtBottom()){this._thread.markAsRead();}},_onThreadWindowClicked:function(){var selectObj=window.getSelection();if(selectObj.anchorOffset===selectObj.focusOffset){this.$input.focus();}},});return AbstractThreadWindow;});;

/* /im_livechat/static/src/js/website_livechat_window.js defined in bundle 'web.assets_frontend' */
odoo.define('im_livechat.WebsiteLivechatWindow',function(require){"use strict";var AbstractThreadWindow=require('mail.AbstractThreadWindow');var LivechatWindow=AbstractThreadWindow.extend({events:_.extend(AbstractThreadWindow.prototype.events,{'input .o_composer_text_field':'_onInput',}),init:function(parent,thread){this._super.apply(this,arguments);this._thread=thread;},close:function(){this.trigger_up('close_chat_window');},replaceContentWith:function($element){$element.replace(this._threadWidget.$el);},toggleFold:function(){this._super.apply(this,arguments);this.trigger_up('save_chat_window');this.updateVisualFoldState();},_postMessage:function(messageData){this.trigger_up('post_message_chat_window',{messageData:messageData});this._super.apply(this,arguments);},_onInput:function(){if(this.hasThread()&&this._thread.hasTypingNotification()){var isTyping=this.$input.val().length>0;this._thread.setMyselfTyping({typing:isTyping});}},});return LivechatWindow;});;

/* /bus/static/src/js/longpolling_bus.js defined in bundle 'web.assets_frontend' */
odoo.define('bus.Longpolling',function(require){"use strict";var Bus=require('web.Bus');var ServicesMixin=require('web.ServicesMixin');var LongpollingBus=Bus.extend(ServicesMixin,{PARTNERS_PRESENCE_CHECK_PERIOD:30000,ERROR_RETRY_DELAY:10000,POLL_ROUTE:'/longpolling/poll',_isActive:null,_lastNotificationID:0,_isOdooFocused:true,_pollRetryTimeout:null,init:function(parent,params){this._super.apply(this,arguments);this._id=_.uniqueId('bus');this._longPollingBusId=this._id;this._options={};this._channels=[];this._lastPresenceTime=new Date().getTime();this._lastPartnersPresenceCheck=this._lastPresenceTime;$(window).on("focus."+this._longPollingBusId,this._onFocusChange.bind(this,{focus:true}));$(window).on("blur."+this._longPollingBusId,this._onFocusChange.bind(this,{focus:false}));$(window).on("unload."+this._longPollingBusId,this._onFocusChange.bind(this,{focus:false}));$(window).on("click."+this._longPollingBusId,this._onPresence.bind(this));$(window).on("keydown."+this._longPollingBusId,this._onPresence.bind(this));$(window).on("keyup."+this._longPollingBusId,this._onPresence.bind(this));},destroy:function(){this.stopPolling();$(window).off("focus."+this._longPollingBusId);$(window).off("blur."+this._longPollingBusId);$(window).off("unload."+this._longPollingBusId);$(window).off("click."+this._longPollingBusId);$(window).off("keydown."+this._longPollingBusId);$(window).off("keyup."+this._longPollingBusId);this._super();},addChannel:function(channel){if(this._channels.indexOf(channel)===-1){this._channels.push(channel);if(this._pollRpc){this._pollRpc.abort();}else{this.startPolling();}}},deleteChannel:function(channel){var index=this._channels.indexOf(channel);if(index!==-1){this._channels.splice(index,1);if(this._pollRpc){this._pollRpc.abort();}}},isOdooFocused:function(){return this._isOdooFocused;},startPolling:function(){if(this._isActive===null){this._poll=this._poll.bind(this);}
if(!this._isActive){this._isActive=true;this._poll();}},stopPolling:function(){this._isActive=false;this._channels=[];clearTimeout(this._pollRetryTimeout);if(this._pollRpc){this._pollRpc.abort();}},updateOption:function(key,value){this._options[key]=value;},_getLastPresence:function(){return this._lastPresenceTime;},_poll:function(){var self=this;if(!this._isActive){return;}
var now=new Date().getTime();var options=_.extend({},this._options,{bus_inactivity:now-this._getLastPresence(),});if(this._lastPartnersPresenceCheck+this.PARTNERS_PRESENCE_CHECK_PERIOD>now){options=_.omit(options,'bus_presence_partner_ids');}else{this._lastPartnersPresenceCheck=now;}
var data={channels:this._channels,last:this._lastNotificationID,options:options};this._pollRpc=this._rpc({route:this.POLL_ROUTE,params:data},{shadow:true,timeout:60000});this._pollRpc.then(function(result){self._pollRpc=false;self._onPoll(result);self._poll();},function(error,ev){self._pollRpc=false;ev.preventDefault();if(error&&error.message==="XmlHttpRequestError abort"){self._poll();}else{self._pollRetryTimeout=setTimeout(self._poll,self.ERROR_RETRY_DELAY+(Math.floor((Math.random()*20)+1)*1000));}});},_onFocusChange:function(params){this._isOdooFocused=params.focus;if(params.focus){this._lastPresenceTime=new Date().getTime();this.trigger('window_focus',this._isOdooFocused);}},_onPoll:function(notifications){var self=this;var notifs=_.map(notifications,function(notif){if(notif.id>self._lastNotificationID){self._lastNotificationID=notif.id;}
return[notif.channel,notif.message];});this.trigger("notification",notifs);return notifs;},_onPresence:function(){this._lastPresenceTime=new Date().getTime();},});return LongpollingBus;});;

/* /bus/static/src/js/crosstab_bus.js defined in bundle 'web.assets_frontend' */
odoo.define('bus.CrossTab',function(require){"use strict";var Longpolling=require('bus.Longpolling');var session=require('web.session');var CrossTabBus=Longpolling.extend({TAB_HEARTBEAT_PERIOD:10000,MASTER_TAB_HEARTBEAT_PERIOD:1500,HEARTBEAT_OUT_OF_DATE_PERIOD:5000,HEARTBEAT_KILL_OLD_PERIOD:15000,LOCAL_STORAGE_PREFIX:'bus',_isMasterTab:false,_isRegistered:false,init:function(){this._super.apply(this,arguments);var now=new Date().getTime();this._sanitizedOrigin=session.origin.replace(/:\/{0,2}/g,'_');this._id=_.uniqueId(this.LOCAL_STORAGE_PREFIX)+':'+now;if(this._callLocalStorage('getItem','last_ts',0)+50000<now){this._callLocalStorage('removeItem','last');}
this._lastNotificationID=this._callLocalStorage('getItem','last',0);this.call('local_storage','onStorage',this,this._onStorage);},destroy:function(){this._super();clearTimeout(this._heartbeatTimeout);},addChannel:function(){this._super.apply(this,arguments);this._callLocalStorage('setItem','channels',this._channels);},deleteChannel:function(){this._super.apply(this,arguments);this._callLocalStorage('setItem','channels',this._channels);},isMasterTab:function(){return this._isMasterTab;},startPolling:function(){if(this._isActive===null){this._heartbeat=this._heartbeat.bind(this);}
if(!this._isRegistered){this._isRegistered=true;var peers=this._callLocalStorage('getItem','peers',{});peers[this._id]=new Date().getTime();this._callLocalStorage('setItem','peers',peers);$(window).on('unload.'+this._id,this._onUnload.bind(this));if(!this._callLocalStorage('getItem','master')){this._startElection();}
this._heartbeat();if(this._isMasterTab){this._callLocalStorage('setItem','channels',this._channels);this._callLocalStorage('setItem','options',this._options);}else{this._channels=this._callLocalStorage('getItem','channels',this._channels);this._options=this._callLocalStorage('getItem','options',this._options);}
return;}
if(this._isMasterTab){this._super.apply(this,arguments);}},updateOption:function(){this._super.apply(this,arguments);this._callLocalStorage('setItem','options',this._options);},_callLocalStorage:function(method,key,param){return this.call('local_storage',method,this._generateKey(key),param);},_generateKey:function(key){return this.LOCAL_STORAGE_PREFIX+'.'+this._sanitizedOrigin+'.'+key;},_getLastPresence:function(){return this._callLocalStorage('getItem','lastPresence')||this._super();},_heartbeat:function(){var now=new Date().getTime();var heartbeatValue=parseInt(this._callLocalStorage('getItem','heartbeat',0));var peers=this._callLocalStorage('getItem','peers',{});if((heartbeatValue+this.HEARTBEAT_OUT_OF_DATE_PERIOD)<now){this._startElection();heartbeatValue=parseInt(this._callLocalStorage('getItem','heartbeat',0));}
if(this._isMasterTab){var cleanedPeers={};for(var peerName in peers){if(peers[peerName]+this.HEARTBEAT_KILL_OLD_PERIOD>now){cleanedPeers[peerName]=peers[peerName];}}
if(heartbeatValue!==this.lastHeartbeat){this._isMasterTab=false;this.lastHeartbeat=0;peers[this._id]=now;this._callLocalStorage('setItem','peers',peers);this.stopPolling();this.trigger('no_longer_master');}else{this.lastHeartbeat=now;this._callLocalStorage('setItem','heartbeat',now);this._callLocalStorage('setItem','peers',cleanedPeers);}}else{peers[this._id]=now;this._callLocalStorage('setItem','peers',peers);}
var hbPeriod=this._isMasterTab?this.MASTER_TAB_HEARTBEAT_PERIOD:this.TAB_HEARTBEAT_PERIOD;if(this._lastPresenceTime+hbPeriod>now){this._callLocalStorage('setItem','lastPresence',this._lastPresenceTime);}
this._heartbeatTimeout=setTimeout(this._heartbeat,hbPeriod);},_startElection:function(){if(this._isMasterTab){return;}
var now=new Date().getTime();var peers=this._callLocalStorage('getItem','peers',{});var heartbeatKillOld=now-this.HEARTBEAT_KILL_OLD_PERIOD;var newMaster;for(var peerName in peers){if(peers[peerName]<heartbeatKillOld){continue;}
newMaster=peerName;break;}
if(newMaster===this._id){this.lastHeartbeat=now;this._callLocalStorage('setItem','heartbeat',this.lastHeartbeat);this._callLocalStorage('setItem','master',true);this._isMasterTab=true;this.startPolling();this.trigger('become_master');delete peers[newMaster];this._callLocalStorage('setItem','peers',peers);}},_onFocusChange:function(params){this._super.apply(this,arguments);this._callLocalStorage('setItem','focus',params.focus);},_onPoll:function(notifications){var notifs=this._super(notifications);if(this._isMasterTab&&notifs.length){this._callLocalStorage('setItem','last',this._lastNotificationID);this._callLocalStorage('setItem','last_ts',new Date().getTime());this._callLocalStorage('setItem','notification',notifs);}},_onStorage:function(e){var value=JSON.parse(e.newValue);var key=e.key;if(this._isRegistered&&key===this._generateKey('master')&&!value){this._startElection();}
if(key===this._generateKey('last')){this._lastNotificationID=value||0;}
else if(key===this._generateKey('notification')){if(!this._isMasterTab){this.trigger("notification",value);}}
else if(key===this._generateKey('channels')){var channels=value;_.each(_.difference(this._channels,channels),this.deleteChannel.bind(this));_.each(_.difference(channels,this._channels),this.addChannel.bind(this));}
else if(key===this._generateKey('options')){this._options=value;}
else if(key===this._generateKey('focus')){this._isOdooFocused=value;this.trigger('window_focus',this._isOdooFocused);}},_onUnload:function(){var peers=this._callLocalStorage('getItem','peers',{});delete peers[this._id];this._callLocalStorage('setItem','peers',peers);if(this._isMasterTab){this._callLocalStorage('removeItem','master');}},});return CrossTabBus;});;

/* /bus/static/src/js/services/bus_service.js defined in bundle 'web.assets_frontend' */
odoo.define('bus.BusService',function(require){"use strict";var CrossTab=require('bus.CrossTab');var core=require('web.core');var ServicesMixin=require('web.ServicesMixin');var BusService=CrossTab.extend(ServicesMixin,{dependencies:['local_storage'],_audio:null,start:function(){},sendNotification:function(title,content,callback){if(window.Notification&&Notification.permission==="granted"){if(this.isMasterTab()){this._sendNativeNotification(title,content,callback);}}else{this.do_notify(title,content);if(this.isMasterTab()){this._beep();}}},onNotification:function(){this.on.apply(this,["notification"].concat(Array.prototype.slice.call(arguments)));},_beep:function(){if(typeof(Audio)!=="undefined"){if(!this._audio){this._audio=new Audio();var ext=this._audio.canPlayType("audio/ogg; codecs=vorbis")?".ogg":".mp3";var session=this.getSession();this._audio.src=session.url("/mail/static/src/audio/ting"+ext);}
this._audio.play();}},_sendNativeNotification:function(title,content,callback){var notification=new Notification(title,{body:content,icon:"/mail/static/src/img/odoobot.png"});notification.onclick=function(){window.focus();if(this.cancel){this.cancel();}else if(this.close){this.close();}
if(callback){callback();}};},});core.serviceRegistry.add('bus_service',BusService);return BusService;});;

/* /mail/static/src/js/document_viewer.js defined in bundle 'web.assets_frontend' */
odoo.define('mail.DocumentViewer',function(require){"use strict";var core=require('web.core');var Widget=require('web.Widget');var QWeb=core.qweb;var SCROLL_ZOOM_STEP=0.1;var ZOOM_STEP=0.5;var DocumentViewer=Widget.extend({template:"DocumentViewer",events:{'click .o_download_btn':'_onDownload','click .o_split_btn':'_onSplitPDF','click .o_viewer_img':'_onImageClicked','click .o_viewer_video':'_onVideoClicked','click .move_next':'_onNext','click .move_previous':'_onPrevious','click .o_rotate':'_onRotate','click .o_zoom_in':'_onZoomIn','click .o_zoom_out':'_onZoomOut','click .o_zoom_reset':'_onZoomReset','click .o_close_btn, .o_viewer_img_wrapper':'_onClose','click .o_print_btn':'_onPrint','DOMMouseScroll .o_viewer_content':'_onScroll','mousewheel .o_viewer_content':'_onScroll','keydown':'_onKeydown','keyup':'_onKeyUp','mousedown .o_viewer_img':'_onStartDrag','mousemove .o_viewer_content':'_onDrag','mouseup .o_viewer_content':'_onEndDrag'},init:function(parent,attachments,activeAttachmentID){this._super.apply(this,arguments);this.attachment=_.filter(attachments,function(attachment){var match=attachment.type=='url'?attachment.url.match("(youtu|.png|.jpg|.gif)"):attachment.mimetype.match("(image|video|application/pdf|text)");if(match){attachment.type=match[1];if(match[1].match("(.png|.jpg|.gif)")){attachment.type='image';}
if(match[1]==='youtu'){var youtube_array=attachment.url.split('/');var youtube_token=youtube_array[youtube_array.length-1];if(youtube_token.indexOf('watch')!==-1){youtube_token=youtube_token.split('v=')[1];var amp=youtube_token.indexOf('&')
if(amp!==-1){youtube_token=youtube_token.substring(0,amp);}}
attachment.youtube=youtube_token;}
return true;}});this.activeAttachment=_.findWhere(attachments,{id:activeAttachmentID});this._reset();},start:function(){this.$el.modal('show');this.$el.on('hidden.bs.modal',_.bind(this._onDestroy,this));this.$('.o_viewer_img').load(_.bind(this._onImageLoaded,this));this.$('[data-toggle="tooltip"]').tooltip({delay:0});return this._super.apply(this,arguments);},destroy:function(){if(this.isDestroyed()){return;}
this.trigger_up('document_viewer_closed');this.$el.modal('hide');this.$el.remove();this._super.apply(this,arguments);},_next:function(){var index=_.findIndex(this.attachment,this.activeAttachment);index=(index+1)%this.attachment.length;this.activeAttachment=this.attachment[index];this._updateContent();},_previous:function(){var index=_.findIndex(this.attachment,this.activeAttachment);index=index===0?this.attachment.length-1:index-1;this.activeAttachment=this.attachment[index];this._updateContent();},_reset:function(){this.scale=1;this.dragStartX=this.dragstopX=0;this.dragStartY=this.dragstopY=0;},_updateContent:function(){this.$('.o_viewer_content').html(QWeb.render('DocumentViewer.Content',{widget:this}));this.$('.o_viewer_img').load(_.bind(this._onImageLoaded,this));this.$('[data-toggle="tooltip"]').tooltip({delay:0});this._reset();},_getTransform:function(scale,angle){return'scale3d('+scale+', '+scale+', 1) rotate('+angle+'deg)';},_rotate:function(angle){this._reset();var new_angle=(this.angle||0)+angle;this.$('.o_viewer_img').css('transform',this._getTransform(this.scale,new_angle));this.$('.o_viewer_img').css('max-width',new_angle%180!==0?$(document).height():'100%');this.$('.o_viewer_img').css('max-height',new_angle%180!==0?$(document).width():'100%');this.angle=new_angle;},_zoom:function(scale){if(scale>0.5){this.$('.o_viewer_img').css('transform',this._getTransform(scale,this.angle||0));this.scale=scale;}
this.$('.o_zoom_reset').add('.o_zoom_out').toggleClass('disabled',scale===1);},_onClose:function(e){e.preventDefault();this.destroy();},_onDestroy:function(){this.destroy();},_onDownload:function(e){e.preventDefault();window.location='/web/content/'+this.activeAttachment.id+'?download=true';},_onDrag:function(e){e.preventDefault();if(this.enableDrag){var $image=this.$('.o_viewer_img');var $zoomer=this.$('.o_viewer_zoomer');var top=$image.prop('offsetHeight')*this.scale>$zoomer.height()?e.clientY-this.dragStartY:0;var left=$image.prop('offsetWidth')*this.scale>$zoomer.width()?e.clientX-this.dragStartX:0;$zoomer.css("transform","translate3d("+left+"px, "+top+"px, 0)");$image.css('cursor','move');}},_onEndDrag:function(e){e.preventDefault();if(this.enableDrag){this.enableDrag=false;this.dragstopX=e.clientX-this.dragStartX;this.dragstopY=e.clientY-this.dragStartY;this.$('.o_viewer_img').css('cursor','');}},_onImageClicked:function(e){e.stopPropagation();},_onImageLoaded:function(){this.$('.o_loading_img').hide();},_onKeydown:function(e){switch(e.which){case $.ui.keyCode.RIGHT:e.preventDefault();this._next();break;case $.ui.keyCode.LEFT:e.preventDefault();this._previous();break;}},_onKeyUp:function(e){switch(e.which){case $.ui.keyCode.ESCAPE:e.preventDefault();this._onClose(e);break;}},_onNext:function(e){e.preventDefault();this._next();},_onPrevious:function(e){e.preventDefault();this._previous();},_onPrint:function(e){e.preventDefault();var src=this.$('.o_viewer_img').prop('src');var script=QWeb.render('PrintImage',{src:src});var printWindow=window.open('about:blank',"_new");printWindow.document.open();printWindow.document.write(script);printWindow.document.close();},_onScroll:function(e){var scale;if(e.originalEvent.wheelDelta>0||e.originalEvent.detail<0){scale=this.scale+SCROLL_ZOOM_STEP;this._zoom(scale);}else{scale=this.scale-SCROLL_ZOOM_STEP;this._zoom(scale);}},_onSplitPDF:function(e){e.stopPropagation();var self=this;var indices=$("input[name=Indices]").val();var remainder=$("input[type=checkbox][name=remainder]").is(":checked");this._rpc({model:'ir.attachment',method:'split_pdf',args:[this.activeAttachment.id,indices,remainder],}).always(function(){self.trigger_up('document_viewer_attachment_changed');self.destroy();});},_onStartDrag:function(e){e.preventDefault();this.enableDrag=true;this.dragStartX=e.clientX-(this.dragstopX||0);this.dragStartY=e.clientY-(this.dragstopY||0);},_onVideoClicked:function(e){e.stopPropagation();var videoElement=e.target;if(videoElement.paused){videoElement.play();}else{videoElement.pause();}},_onRotate:function(e){e.preventDefault();this._rotate(90);},_onZoomIn:function(e){e.preventDefault();var scale=this.scale+ZOOM_STEP;this._zoom(scale);},_onZoomOut:function(e){e.preventDefault();var scale=this.scale-ZOOM_STEP;this._zoom(scale);},_onZoomReset:function(e){e.preventDefault();this.$('.o_viewer_zoomer').css("transform","");this._zoom(1);},});return DocumentViewer;});;

/* /mail/static/src/js/thread_widget.js defined in bundle 'web.assets_frontend' */
odoo.define('mail.widget.Thread',function(require){"use strict";var DocumentViewer=require('mail.DocumentViewer');var mailUtils=require('mail.utils');var core=require('web.core');var time=require('web.time');var Widget=require('web.Widget');var QWeb=core.qweb;var _t=core._t;var _lt=core._lt;var ORDER={ASC:1,DESC:-1,};var READ_MORE=_lt("read more");var READ_LESS=_lt("read less");var ThreadWidget=Widget.extend({className:'o_mail_thread',events:{'click a':'_onClickRedirect','click img':'_onClickRedirect','click strong':'_onClickRedirect','click .o_thread_show_more':'_onClickShowMore','click .o_attachment_download':'_onAttachmentDownload','click .o_attachment_view':'_onAttachmentView','click .o_attachment_delete_cross':'_onDeleteAttachment','click .o_thread_message_needaction':'_onClickMessageNeedaction','click .o_thread_message_star':'_onClickMessageStar','click .o_thread_message_reply':'_onClickMessageReply','click .oe_mail_expand':'_onClickMailExpand','click .o_thread_message':'_onClickMessage','click':'_onClick','click .o_thread_message_email_exception':'_onClickEmailException','click .o_thread_message_email_bounce':'_onClickEmailException','click .o_thread_message_moderation':'_onClickMessageModeration','change .moderation_checkbox':'_onChangeModerationCheckbox',},init:function(parent,options){this._super.apply(this,arguments);this._enabledOptions=_.defaults(options||{},{displayOrder:ORDER.ASC,displayMarkAsRead:true,displayModerationCommands:false,displayStars:true,displayDocumentLinks:true,displayAvatars:true,squashCloseMessages:true,displayEmailIcons:true,displayReplyIcons:false,loadMoreOnScroll:false,});this._disabledOptions={displayOrder:this._enabledOptions.displayOrder,displayMarkAsRead:false,displayModerationCommands:false,displayStars:false,displayDocumentLinks:false,displayAvatars:this._enabledOptions.displayAvatars,squashCloseMessages:false,displayEmailIcons:false,displayReplyIcons:false,loadMoreOnScroll:this._enabledOptions.loadMoreOnScroll,};this._selectedMessageID=null;this._currentThreadID=null;this._messageMailPopover=null;},destroy:function(){clearInterval(this._updateTimestampsInterval);if(this._messageMailPopover){this._messageMailPopover.popover('hide');}
this._super();},render:function(thread,options){var self=this;var shouldScrollToBottomAfterRendering=false;if(this._currentThreadID===thread.getID()&&this.isAtBottom()){shouldScrollToBottomAfterRendering=true;}
this._currentThreadID=thread.getID();var messages=_.clone(thread.getMessages({domain:options.domain||[]}));var modeOptions=options.isCreateMode?this._disabledOptions:this._enabledOptions;this.attachments=_.uniq(_.flatten(_.map(messages,function(message){return message.getAttachments();})));options=_.extend({},modeOptions,options,{selectedMessageID:this._selectedMessageID,});var displayAuthorMessages={};var prevMessage;_.each(messages,function(message){if(!prevMessage||(Math.abs(message.getDate().diff(prevMessage.getDate()))>60000)||prevMessage.getType()!=='comment'||message.getType()!=='comment'||(prevMessage.getAuthorID()!==message.getAuthorID())||((prevMessage.isLinkedToDocumentThread()&&message.isLinkedToDocumentThread())&&(prevMessage.getDocumentModel()!==message.getDocumentModel()||prevMessage.getDocumentID()!==message.getDocumentID()))){displayAuthorMessages[message.getID()]=true;}else{displayAuthorMessages[message.getID()]=!options.squashCloseMessages;}
prevMessage=message;});if(modeOptions.displayOrder===ORDER.DESC){messages.reverse();}
this.$el.html(QWeb.render('mail.widget.Thread',{thread:thread,displayAuthorMessages:displayAuthorMessages,options:options,ORDER:ORDER,dateFormat:time.getLangDatetimeFormat(),}));if(thread.hasTypingNotification()){this.renderTypingNotificationBar(thread);}
_.each(messages,function(message){var $message=self.$('.o_thread_message[data-message-id="'+message.getID()+'"]');$message.find('.o_mail_timestamp').data('date',message.getDate());self._insertReadMore($message);});if(shouldScrollToBottomAfterRendering){this.scrollToBottom();}
if(!this._updateTimestampsInterval){this.updateTimestampsInterval=setInterval(function(){self._updateTimestamps();},1000*60);}
this._renderMessageMailPopover(messages);},getScrolltop:function(){return this.$el.scrollTop();},isAtBottom:function(){var fullHeight=this.el.scrollHeight;var topHiddenHeight=this.$el.scrollTop();var visibleHeight=this.$el.outerHeight();var bottomHiddenHeight=fullHeight-topHiddenHeight-visibleHeight;return bottomHiddenHeight<5;},removeMessageAndRender:function(messageID,thread,options){var self=this;var done=$.Deferred();this.$('.o_thread_message[data-message-id="'+messageID+'"]').fadeOut({done:function(){self.render(thread,options);done.resolve();},duration:200,});return done;},renderTypingNotificationBar:function(thread){if(this._currentThreadID===thread.getID()){var shouldScrollToBottomAfterRendering=this.isAtBottom();var $typingBar=this.$('.o_thread_typing_notification_bar');var text=thread.getTypingMembersToText();$typingBar.toggleClass('o_hidden',!text);$typingBar.text(text);if(shouldScrollToBottomAfterRendering){this.scrollToBottom();}}},scrollToBottom:function(){this.$el.scrollTop(this.el.scrollHeight);},scrollToMessage:function(options){var $target=this.$('.o_thread_message[data-message-id="'+options.msgID+'"]');if(options.onlyIfNecessary){var delta=$target.parent().height()-$target.height();var offset=delta<0?0:delta-($target.offset().top-$target.offsetParent().offset().top);offset=-Math.min(offset,0);this.$el.scrollTo("+="+offset+"px",options.duration);}else if($target.length){this.$el.scrollTo($target);}},scrollToPosition:function(position){if(position){this.$el.scrollTop(position);}else{this.scrollToBottom();}},toggleModerationCheckboxes:function(checked){this.$('.moderation_checkbox').prop('checked',checked);},unselectMessage:function(){this.$('.o_thread_message').removeClass('o_thread_selected_message');this._selectedMessageID=null;},_insertReadMore:function($element){var self=this;var groups=[];var readMoreNodes;var $children=$element.contents().filter(function(){return this.nodeType===1||this.nodeType===3&&this.nodeValue.trim();});_.each($children,function(child){var $child=$(child);if(child.nodeType===3&&$child.prevAll('[id*="stopSpelling"]').length>0){$child=$('<span>',{text:child.textContent,'data-o-mail-quote':'1',});child.parentNode.replaceChild($child[0],child);}
if($child.attr('data-o-mail-quote')||($child.get(0).nodeName==='BR'&&$child.prev('[data-o-mail-quote="1"]').length>0)){if(!readMoreNodes){readMoreNodes=[];groups.push(readMoreNodes);}
$child.hide();readMoreNodes.push($child);}else{readMoreNodes=undefined;self._insertReadMore($child);}});_.each(groups,function(group){var $readMore=$('<a>',{class:'o_mail_read_more',href:'#',text:READ_MORE,}).insertBefore(group[0]);var isReadMore=true;$readMore.click(function(e){e.preventDefault();isReadMore=!isReadMore;_.each(group,function($child){$child.hide();$child.toggle(!isReadMore);});$readMore.text(isReadMore?READ_MORE:READ_LESS);});});},_onDeleteAttachment:function(ev){ev.stopPropagation();var $target=$(ev.currentTarget);this.trigger_up('delete_attachment',{attachmentId:$target.data('id'),attachmentName:$target.data('name')});},_redirect:_.debounce(function(options){if('channelID'in options){this.trigger('redirect_to_channel',options.channelID);}else{this.trigger('redirect',options.model,options.id);}},500,true),_renderMessageMailPopover:function(messages){if(this._messageMailPopover){this._messageMailPopover.popover('hide');}
if(!this.$('.o_thread_tooltip').length){return;}
this._messageMailPopover=this.$('.o_thread_tooltip').popover({html:true,boundary:'viewport',placement:'auto',trigger:'hover',offset:'0, 1',content:function(){var messageID=$(this).data('message-id');var message=_.find(messages,function(message){return message.getID()===messageID;});return QWeb.render('mail.widget.Thread.Message.MailTooltip',{data:message.hasCustomerEmailData()?message.getCustomerEmailData():[],});},});},_updateTimestamps:function(){var isAtBottom=this.isAtBottom();this.$('.o_mail_timestamp').each(function(){var date=$(this).data('date');$(this).html(mailUtils.timeFromNow(date));});if(isAtBottom&&!this.isAtBottom()){this.scrollToBottom();}},_onAttachmentDownload:function(event){event.stopPropagation();},_onAttachmentView:function(event){event.stopPropagation();var activeAttachmentID=$(event.currentTarget).data('id');if(activeAttachmentID){var attachmentViewer=new DocumentViewer(this,this.attachments,activeAttachmentID);attachmentViewer.appendTo($('body'));}},_onChangeModerationCheckbox:function(ev){this.trigger_up('update_moderation_buttons');},_onClick:function(){if(this._selectedMessageID){this.unselectMessage();this.trigger('unselect_message');}},_onClickEmailException:function(ev){var messageID=$(ev.currentTarget).data('message-id');this.do_action('mail.mail_resend_message_action',{additional_context:{mail_message_to_resend:messageID}});},_onClickMailExpand:function(ev){ev.preventDefault();},_onClickMessage:function(ev){$(ev.currentTarget).toggleClass('o_thread_selected_message');},_onClickMessageNeedaction:function(ev){var messageID=$(ev.currentTarget).data('message-id');this.trigger('mark_as_read',messageID);},_onClickMessageReply:function(ev){this._selectedMessageID=$(ev.currentTarget).data('message-id');this.$('.o_thread_message').removeClass('o_thread_selected_message');this.$('.o_thread_message[data-message-id="'+this._selectedMessageID+'"]').addClass('o_thread_selected_message');this.trigger('select_message',this._selectedMessageID);ev.stopPropagation();},_onClickMessageStar:function(ev){var messageID=$(ev.currentTarget).data('message-id');this.trigger('toggle_star_status',messageID);},_onClickMessageModeration:function(ev){var $button=$(ev.currentTarget);var messageID=$button.data('message-id');var decision=$button.data('decision');this.trigger_up('message_moderation',{messageID:messageID,decision:decision,});},_onClickRedirect:function(ev){if($(ev.target).data('oe-field')!==undefined){return;}
var id=$(ev.target).data('oe-id');if(id){ev.preventDefault();var model=$(ev.target).data('oe-model');var options;if(model&&(model!=='mail.channel')){options={model:model,id:id};}else{options={channelID:id};}
this._redirect(options);}},_onClickShowMore:function(){this.trigger('load_more_messages');},});ThreadWidget.ORDER=ORDER;return ThreadWidget;});;

/* /mail/static/src/js/utils.js defined in bundle 'web.assets_frontend' */
odoo.define('mail.utils',function(require){"use strict";var core=require('web.core');var _t=core._t;function parseAndTransform(htmlString,transformFunction){var openToken="OPEN"+Date.now();var string=htmlString.replace(/&lt;/g,openToken);var children;try{children=$('<div>').html(string).contents();}catch(e){children=$('<div>').html('<pre>'+string+'</pre>').contents();}
return _parseAndTransform(children,transformFunction).replace(new RegExp(openToken,"g"),"&lt;");}
function _parseAndTransform(nodes,transformFunction){return _.map(nodes,function(node){return transformFunction(node,function(){return _parseAndTransform(node.childNodes,transformFunction);});}).join("");}
var urlRegexp=/\b(?:https?:\/\/\d{1,3}(?:\.\d{1,3}){3}|(?:https?:\/\/|(?:www\.))[-a-z0-9@:%._+~#=]{2,256}\.[a-z]{2,13})\b(?:[-a-z0-9@:%_+.~#?&'$//=;]*)/gi;function linkify(text,attrs){attrs=attrs||{};if(attrs.target===undefined){attrs.target='_blank';}
attrs=_.map(attrs,function(value,key){return key+'="'+_.escape(value)+'"';}).join(' ');return text.replace(urlRegexp,function(url){var href=(!/^https?:\/\//i.test(url))?"http://"+url:url;return'<a '+attrs+' href="'+href+'">'+url+'</a>';});}
function addLink(node,transformChildren){if(node.nodeType===3){return linkify(node.data);}
if(node.tagName==="A")return node.outerHTML;node.innerHTML=transformChildren();return node.outerHTML;}
function stripHTML(node,transformChildren){if(node.nodeType===3)return node.data;if(node.tagName==="BR")return"\n";return transformChildren();}
function inline(node,transform_children){if(node.nodeType===3)return node.data;if(node.nodeType===8)return"";if(node.tagName==="BR")return" ";if(node.tagName.match(/^(A|P|DIV|PRE|BLOCKQUOTE)$/))return transform_children();node.innerHTML=transform_children();return node.outerHTML;}
function parseEmail(text){if(text){var result=text.match(/(.*)<(.*@.*)>/);if(result){return[_.str.trim(result[1]),_.str.trim(result[2])];}
result=text.match(/(.*@.*)/);if(result){return[_.str.trim(result[1]),_.str.trim(result[1])];}
return[text,false];}}
function getTextToHTML(text){return text.replace(/((?:https?|ftp):\/\/[\S]+)/g,'<a href="$1">$1</a> ').replace(/[\n\r]/g,'<br/>');}
var accentedLettersMapping={'a':'[]','ae':'','c':'','e':'[]','i':'[]','n':'','o':'[]','oe':'','u':'[]','y':'[]',};function unaccent(str){_.each(accentedLettersMapping,function(value,key){str=str.replace(new RegExp(value,'g'),key);});return str;}
function timeFromNow(date){if(moment().diff(date,'seconds')<45){return _t("now");}
return date.fromNow();}
return{addLink:addLink,getTextToHTML:getTextToHTML,inline:inline,linkify:linkify,parseAndTransform:parseAndTransform,parseEmail:parseEmail,stripHTML:stripHTML,timeFromNow:timeFromNow,unaccent:unaccent,};});;

/* /im_livechat/static/src/js/im_livechat.js defined in bundle 'web.assets_frontend' */
odoo.define('im_livechat.im_livechat',function(require){"use strict";require('bus.BusService');var concurrency=require('web.concurrency');var config=require('web.config');var core=require('web.core');var session=require('web.session');var time=require('web.time');var utils=require('web.utils');var Widget=require('web.Widget');var WebsiteLivechat=require('im_livechat.model.WebsiteLivechat');var WebsiteLivechatMessage=require('im_livechat.model.WebsiteLivechatMessage');var WebsiteLivechatWindow=require('im_livechat.WebsiteLivechatWindow');var _t=core._t;var QWeb=core.qweb;var LIVECHAT_COOKIE_HISTORY='im_livechat_history';var HISTORY_LIMIT=15;var RATING_TO_EMOJI={"10":"","5":"","1":""};var page=window.location.href.replace(/^.*\/\/[^/]+/,'');var pageHistory=utils.get_cookie(LIVECHAT_COOKIE_HISTORY);var urlHistory=[];if(pageHistory){urlHistory=JSON.parse(pageHistory)||[];}
if(!_.contains(urlHistory,page)){urlHistory.push(page);while(urlHistory.length>HISTORY_LIMIT){urlHistory.shift();}
utils.set_cookie(LIVECHAT_COOKIE_HISTORY,JSON.stringify(urlHistory),60*60*24);}
var LivechatButton=Widget.extend({className:'openerp o_livechat_button d-print-none',custom_events:{'close_chat_window':'_onCloseChatWindow','post_message_chat_window':'_onPostMessageChatWindow','save_chat_window':'_onSaveChatWindow','updated_typing_partners':'_onUpdatedTypingPartners','updated_unread_counter':'_onUpdatedUnreadCounter',},events:{'click':'_openChat'},init:function(parent,serverURL,options){this._super(parent);this.options=_.defaults(options||{},{input_placeholder:_t("Ask something ..."),default_username:_t("Visitor"),button_text:_t("Chat with one of our collaborators"),default_message:_t("How may I help you?"),});this._history=null;this._livechat=null;this._chatWindow=null;this._messages=[];this._serverURL=serverURL;},willStart:function(){var self=this;var cookie=utils.get_cookie('im_livechat_session');var ready;if(!cookie){ready=session.rpc('/im_livechat/init',{channel_id:this.options.channel_id}).then(function(result){if(!result.available_for_me){return $.Deferred().reject();}
self._rule=result.rule;});}else{var channel=JSON.parse(cookie);ready=session.rpc('/mail/chat_history',{uuid:channel.uuid,limit:100}).then(function(history){self._history=history;});}
return ready.then(this._loadQWebTemplate.bind(this));},start:function(){this.$el.text(this.options.button_text);if(this._history){_.each(this._history.reverse(),this._addMessage.bind(this));this._openChat();}else if(!config.device.isMobile&&this._rule.action==='auto_popup'){var autoPopupCookie=utils.get_cookie('im_livechat_auto_popup');if(!autoPopupCookie||JSON.parse(autoPopupCookie)){this._autoPopupTimeout=setTimeout(this._openChat.bind(this),this._rule.auto_popup_timer*1000);}}
this.call('bus_service','onNotification',this,this._onNotification);return this._super();},_addMessage:function(data,options){options=_.extend({},this.options,options,{serverURL:this._serverURL,});var message=new WebsiteLivechatMessage(this,data,options);if(this._livechat){this._livechat.addMessage(message);}
if(options&&options.prepend){this._messages.unshift(message);}else{this._messages.push(message);}},_askFeedback:function(){this._chatWindow.$('.o_thread_composer input').prop('disabled',true);var feedback=new Feedback(this,this._livechat);this._chatWindow.replaceContentWith(feedback);feedback.on('send_message',this,this._sendMessage);feedback.on('feedback_sent',this,this._closeChat);},_closeChat:function(){this._chatWindow.destroy();utils.set_cookie('im_livechat_session',"",-1);},_handleNotification:function(notification){if(this._livechat&&(notification[0]===this._livechat.getUUID())){if(notification[1]._type==='history_command'){var cookie=utils.get_cookie(LIVECHAT_COOKIE_HISTORY);var history=cookie?JSON.parse(cookie):[];session.rpc('/im_livechat/history',{pid:this._livechat.getOperatorPID()[0],channel_uuid:this._livechat.getUUID(),page_history:history,});}else if(notification[1].info==='typing_status'){var isWebsiteUser=notification[1].is_website_user;if(isWebsiteUser){return;}
var partnerID=notification[1].partner_id;if(notification[1].is_typing){this._livechat.registerTyping({partnerID:partnerID});}else{this._livechat.unregisterTyping({partnerID:partnerID});}}else{this._addMessage(notification[1]);this._renderMessages();if(this._chatWindow.isFolded()||!this._chatWindow.isAtBottom()){this._livechat.incrementUnreadCounter();}}}},_loadQWebTemplate:function(){var xml_files=['/mail/static/src/xml/abstract_thread_window.xml','/mail/static/src/xml/thread.xml','/im_livechat/static/src/xml/im_livechat.xml'];var defs=_.map(xml_files,function(tmpl){return session.rpc('/web/proxy/load',{path:tmpl}).then(function(xml){QWeb.add_template(xml);});});return $.when.apply($,defs);},_openChat:_.debounce(function(){if(this._openingChat){return;}
var self=this;var cookie=utils.get_cookie('im_livechat_session');var def;this._openingChat=true;clearTimeout(this._autoPopupTimeout);if(cookie){def=$.when(JSON.parse(cookie));}else{this._messages=[];def=session.rpc('/im_livechat/get_session',{channel_id:this.options.channel_id,anonymous_name:this.options.default_username,},{shadow:true});}
def.then(function(livechatData){if(!livechatData||!livechatData.operator_pid){alert(_t("None of our collaborators seems to be available, please try again later."));}else{self._livechat=new WebsiteLivechat({parent:self,data:livechatData});self._openChatWindow();self._sendWelcomeMessage();self._renderMessages();self.call('bus_service','addChannel',self._livechat.getUUID());self.call('bus_service','startPolling');utils.set_cookie('im_livechat_session',JSON.stringify(self._livechat.toData()),60*60);utils.set_cookie('im_livechat_auto_popup',JSON.stringify(false),60*60);}}).always(function(){self._openingChat=false;});},200,true),_openChatWindow:function(){var self=this;var options={displayStars:false,placeholder:this.options.input_placeholder||"",};this._chatWindow=new WebsiteLivechatWindow(this,this._livechat,options);this._chatWindow.appendTo($('body')).then(function(){var cssProps={bottom:0};cssProps[_t.database.parameters.direction==='rtl'?'left':'right']=0;self._chatWindow.$el.css(cssProps);self.$el.hide();});},_renderMessages:function(){var shouldScroll=!this._chatWindow.isFolded()&&this._chatWindow.isAtBottom();this._livechat.setMessages(this._messages);this._chatWindow.render();if(shouldScroll){this._chatWindow.scrollToBottom();}},_sendMessage:function(message){var self=this;return session.rpc('/mail/chat_post',{uuid:this._livechat.getUUID(),message_content:message.content}).then(function(){self._chatWindow.scrollToBottom();});},_sendWelcomeMessage:function(){if(this.options.default_message){this._addMessage({id:'_welcome',attachment_ids:[],author_id:this._livechat.getOperatorPID(),body:this.options.default_message,channel_ids:[this._livechat.getID()],date:time.datetime_to_str(new Date()),tracking_value_ids:[],},{prepend:true});}},_onCloseChatWindow:function(ev){ev.stopPropagation();var isComposerDisabled=this._chatWindow.$('.o_thread_composer input').prop('disabled');var shouldAskFeedback=!isComposerDisabled&&_.find(this._messages,function(message){return message.getID()!=='_welcome';});if(shouldAskFeedback){this._chatWindow.toggleFold(false);this._askFeedback();}else{this._closeChat();}},_onNotification:function(notifications){var self=this;_.each(notifications,function(notification){self._handleNotification(notification);});},_onPostMessageChatWindow:function(ev){ev.stopPropagation();var self=this;var messageData=ev.data.messageData;this._sendMessage(messageData).fail(function(error,e){e.preventDefault();return self._sendMessage(messageData);});},_onSaveChatWindow:function(ev){ev.stopPropagation();utils.set_cookie('im_livechat_session',JSON.stringify(this._livechat.toData()),60*60);},_onUpdatedTypingPartners:function(ev){ev.stopPropagation();this._chatWindow.renderTypingNotificationBar();},_onUpdatedUnreadCounter:function(ev){ev.stopPropagation();this._chatWindow.renderHeader();},});var Feedback=Widget.extend({template:'im_livechat.FeedBack',events:{'click .o_livechat_rating_choices img':'_onClickSmiley','click .o_livechat_no_feedback span':'_onClickNoFeedback','click .o_rating_submit_button':'_onClickSend',},init:function(parent,livechat){this._super(parent);this._livechat=livechat;this.server_origin=session.origin;this.rating=undefined;this.dp=new concurrency.DropPrevious();},_sendFeedback:function(options){var self=this;var args={uuid:this._livechat.getUUID(),rate:this.rating,reason:options.reason};this.dp.add(session.rpc('/im_livechat/feedback',args)).then(function(){if(options.close){var emoji=RATING_TO_EMOJI[self.rating]||"??";var content=_.str.sprintf(_t("Rating: %s"),emoji);if(options.reason){content+=" \n"+options.reason;}
self.trigger('send_message',{content:content});self.trigger('feedback_sent');}});},_onClickNoFeedback:function(){this.trigger('feedback_sent');},_onClickSend:function(){if(_.isNumber(this.rating)){this._sendFeedback({reason:this.$('textarea').val(),close:true});}},_onClickSmiley:function(ev){this.rating=parseInt($(ev.currentTarget).data('value'));this.$('.o_livechat_rating_choices img').removeClass('selected');this.$('.o_livechat_rating_choices img[data-value="'+this.rating+'"]').addClass('selected');var shouldCloseChatWindow=false;if(this.rating!==10){this.$('.o_livechat_rating_reason').show();}else{this.$('.o_livechat_rating_reason').hide();shouldCloseChatWindow=true;}
this._sendFeedback({close:shouldCloseChatWindow});},});return{LivechatButton:LivechatButton,Feedback:Feedback,};});;

/* /mail/static/src/js/models/threads/abstract_thread.js defined in bundle 'web.assets_frontend' */
odoo.define('mail.model.AbstractThread',function(require){"use strict";var Class=require('web.Class');var Mixins=require('web.mixins');var AbstractThread=Class.extend(Mixins.EventDispatcherMixin,{init:function(params){Mixins.EventDispatcherMixin.init.call(this,arguments);this.setParent(params.parent);this._folded=false;this._id=params.data.id;this._name=params.data.name;this._status=params.data.status||'';this._unreadCounter=0;},addMessage:function(message){this._addMessage.apply(this,arguments);this.trigger('message_added',message);},fold:function(folded){this._folded=folded;},getID:function(){return this._id;},getMessages:function(){},getName:function(){return this._name;},getStatus:function(){return this._status;},getTitle:function(){return this.getName();},getUnreadCounter:function(){return this._unreadCounter;},hasMessages:function(){return!_.isEmpty(this.getMessages());},hasTypingNotification:function(){return false;},isFolded:function(){return this._folded;},markAsRead:function(){if(this._unreadCounter>0){return this._markAsRead();}
return $.when();},postMessage:function(){return this._postMessage.apply(this,arguments).then(this.trigger.bind(this,'message_posted'));},resetUnreadCounter:function(){this._unreadCounter=0;this._warnUpdatedUnreadCounter();},_addMessage:function(message){},_incrementUnreadCounter:function(){this._unreadCounter++;},_markAsRead:function(){this.resetUnreadCounter();return $.when();},_postMessage:function(){return $.when();},_warnUpdatedUnreadCounter:function(){},});return AbstractThread;});;

/* /im_livechat/static/src/js/models/website_livechat.js defined in bundle 'web.assets_frontend' */
odoo.define('im_livechat.model.WebsiteLivechat',function(require){"use strict";var AbstractThread=require('mail.model.AbstractThread');var ThreadTypingMixin=require('mail.model.ThreadTypingMixin');var session=require('web.session');var WebsiteLivechat=AbstractThread.extend(ThreadTypingMixin,{init:function(params){this._super.apply(this,arguments);ThreadTypingMixin.init.call(this,arguments);this._members=[];this._operatorPID=params.data.operator_pid;this._uuid=params.data.uuid;if(params.data.message_unread_counter!==undefined){this._unreadCounter=params.data.message_unread_counter;}
if(_.isBoolean(params.data.folded)){this._folded=params.data.folded;}else{this._folded=params.data.state==='folded';}
this._members.push({id:this._operatorPID[0],name:this._operatorPID[1]});},getMessages:function(){return this._messages;},getOperatorPID:function(){return this._operatorPID;},getUUID:function(){return this._uuid;},incrementUnreadCounter:function(){this._incrementUnreadCounter();},setMessages:function(messages){this._messages=messages;},toData:function(){return{folded:this.isFolded(),id:this.getID(),message_unread_counter:this.getUnreadCounter(),operator_pid:this.getOperatorPID(),name:this.getName(),uuid:this.getUUID(),};},_isTypingMyselfInfo:function(params){return params.isWebsiteUser;},_notifyMyselfTyping:function(params){return session.rpc('/im_livechat/notify_typing',{uuid:this.getUUID(),is_typing:params.typing,},{shadow:true});},_warnUpdatedTypingPartners:function(){this.trigger_up('updated_typing_partners');},_warnUpdatedUnreadCounter:function(){this.trigger_up('updated_unread_counter');},_onTypingMessageAdded:function(message){var operatorID=this.getOperatorPID()[0];if(message.hasAuthor()&&message.getAuthorID()===operatorID){this.unregisterTyping({partnerID:operatorID});}},});return WebsiteLivechat;});;

/* /mail/static/src/js/models/threads/thread_typing_mixin/thread_typing_mixin.js defined in bundle 'web.assets_frontend' */
odoo.define('mail.model.ThreadTypingMixin',function(require){"use strict";var CCThrottleFunction=require('mail.model.CCThrottleFunction');var Timer=require('mail.model.Timer');var Timers=require('mail.model.Timers');var core=require('web.core');var _t=core._t;var ThreadTypingMixin={_DEFAULT_TYPING_PARTNER_ID:'_default',_DEFAULT_TYPING_PARTNER_NAME:'Someone',init:function(){this._lastNotifiedMyselfTyping=false;this._myselfLongTypingTimer=new Timer({duration:50*1000,onTimeout:this._onMyselfLongTypingTimeout.bind(this),});this._myselfTypingInactivityTimer=new Timer({duration:5*1000,onTimeout:this._onMyselfTypingInactivityTimeout.bind(this),});this._othersTypingTimers=new Timers({duration:60*1000,onTimeout:this._onOthersTypingTimeout.bind(this),});this._throttleNotifyMyselfTyping=CCThrottleFunction({duration:2.5*1000,func:this._onNotifyMyselfTyping.bind(this),});this._typingPartnerIDs=[];this.on('message_added',this,this._onTypingMessageAdded);this.on('message_posted',this,this._onTypingMessagePosted);},getTypingMembersToText:function(){var typingPartnerIDs=this._typingPartnerIDs;var typingMembers=_.filter(this._members,function(member){return _.contains(typingPartnerIDs,member.id);});var sortedTypingMembers=_.sortBy(typingMembers,function(member){return _.indexOf(typingPartnerIDs,member.id);});var displayableTypingMembers=sortedTypingMembers.slice(0,3);if(displayableTypingMembers.length===0){return'';}else if(displayableTypingMembers.length===1){return _.str.sprintf(_t("%s is typing..."),displayableTypingMembers[0].name);}else if(displayableTypingMembers.length===2){return _.str.sprintf(_t("%s and %s are typing..."),displayableTypingMembers[0].name,displayableTypingMembers[1].name);}else{return _.str.sprintf(_t("%s, %s and more are typing..."),displayableTypingMembers[0].name,displayableTypingMembers[1].name);}},hasTypingNotification:function(){return true;},registerTyping:function(params){if(this._isTypingMyselfInfo(params)){return;}
this._othersTypingTimers.registerTimer({timeoutCallbackArguments:[params.partnerID],timerID:params.partnerID,});this._typingPartnerIDs.push(params.partnerID);this._warnUpdatedTypingPartners();},setMyselfTyping:function(params){var typing=params.typing;if(this._lastNotifiedMyselfTyping===typing){this._throttleNotifyMyselfTyping.cancel();}else{this._throttleNotifyMyselfTyping(params);}
if(typing){this._myselfTypingInactivityTimer.reset();}else{this._myselfTypingInactivityTimer.clear();}},unregisterTyping:function(params){var partnerID=params.partnerID;this._othersTypingTimers.unregisterTimer({timerID:partnerID});this._typingPartnerIDs=_.reject(this._typingPartnerIDs,function(id){return id===partnerID;});this._warnUpdatedTypingPartners();},_isTypingMyselfInfo:function(params){return false;},_notifyMyselfTyping:function(params){return $.when();},_warnUpdatedTypingPartners:function(){},_onMyselfLongTypingTimeout:function(){this._throttleNotifyMyselfTyping.clear();this._throttleNotifyMyselfTyping({typing:true});},_onMyselfTypingInactivityTimeout:function(){this._throttleNotifyMyselfTyping.clear();this._throttleNotifyMyselfTyping({typing:false});},_onNotifyMyselfTyping:function(params){var typing=params.typing;this._lastNotifiedMyselfTyping=typing;this._notifyMyselfTyping(params);if(typing){this._myselfLongTypingTimer.reset();}else{this._myselfLongTypingTimer.clear();}},_onOthersTypingTimeout:function(partnerID){this.unregisterTyping({partnerID:partnerID});},_onTypingMessageAdded:function(message){var partnerID=message.hasAuthor()?message.getAuthorID():this._DEFAULT_TYPING_PARTNER_ID;this.unregisterTyping({partnerID:partnerID});},_onTypingMessagePosted:function(){this._lastNotifiedMyselfTyping=false;this._throttleNotifyMyselfTyping.clear();this._myselfLongTypingTimer.clear();this._myselfTypingInactivityTimer.clear();},};return ThreadTypingMixin;});;

/* /mail/static/src/js/models/threads/thread_typing_mixin/timer.js defined in bundle 'web.assets_frontend' */
odoo.define('mail.model.Timer',function(require){"use strict";var Class=require('web.Class');var Timer=Class.extend({init:function(params){this._duration=params.duration;this._timeout=undefined;this._timeoutCallback=params.onTimeout;},clear:function(){clearTimeout(this._timeout);},reset:function(){this.clear();this.start();},start:function(){this._timeout=setTimeout(this._onTimeout.bind(this),this._duration);},_onTimeout:function(){this._timeoutCallback();},});return Timer;});;

/* /mail/static/src/js/models/threads/thread_typing_mixin/timers.js defined in bundle 'web.assets_frontend' */
odoo.define('mail.model.Timers',function(require){"use strict";var Timer=require('mail.model.Timer');var Class=require('web.Class');var Timers=Class.extend({init:function(params){this._duration=params.duration;this._timeoutCallback=params.onTimeout;this._timers={};},registerTimer:function(params){var timerID=params.timerID;if(this._timers[timerID]){this._timers[timerID].clear();}
var timerParams={duration:this._duration,onTimeout:this._timeoutCallback,};if('timeoutCallbackArguments'in params){timerParams.onTimeout=this._timeoutCallback.bind.apply(this._timeoutCallback,[null].concat(params.timeoutCallbackArguments));}else{timerParams.onTimeout=this._timeoutCallback;}
this._timers[timerID]=new Timer(timerParams);this._timers[timerID].start();},unregisterTimer:function(params){var timerID=params.timerID;if(this._timers[timerID]){this._timers[timerID].clear();delete this._timers[timerID];}},});return Timers;});;

/* /mail/static/src/js/models/threads/thread_typing_mixin/cc_throttle_function.js defined in bundle 'web.assets_frontend' */
odoo.define('mail.model.CCThrottleFunctionObject',function(require){"use strict";var Class=require('web.Class');var CCThrottleFunctionObject=Class.extend({init:function(params){this._arguments=undefined;this._cooldownTimeout=undefined;this._duration=params.duration;this._func=params.func;this._shouldCallFunctionAfterCD=false;},cancel:function(){this._arguments=undefined;this._shouldCallFunctionAfterCD=false;},clear:function(){if(this._cooldownTimeout){clearTimeout(this._cooldownTimeout);this._onCooldownTimeout();}},do:function(){this._arguments=Array.prototype.slice.call(arguments);if(this._cooldownTimeout===undefined){this._callFunction();}else{this._shouldCallFunctionAfterCD=true;}},_callFunction:function(){this._func.apply(null,this._arguments);this._cooldown();},_cooldown:function(){this.cancel();this._cooldownTimeout=setTimeout(this._onCooldownTimeout.bind(this),this._duration);},_onCooldownTimeout:function(){if(this._shouldCallFunctionAfterCD){this._callFunction();}else{this._cooldownTimeout=undefined;}},});return CCThrottleFunctionObject;});odoo.define('mail.model.CCThrottleFunction',function(require){"use strict";var CCThrottleFunctionObject=require('mail.model.CCThrottleFunctionObject');var CCThrottleFunction=function(params){var duration=params.duration;var func=params.func;var throttleFunctionObject=new CCThrottleFunctionObject({duration:duration,func:func,});var callable=function(){return throttleFunctionObject.do.apply(throttleFunctionObject,arguments);};callable.cancel=function(){throttleFunctionObject.cancel();};callable.clear=function(){throttleFunctionObject.clear();};return callable;};return CCThrottleFunction;});;

/* /mail/static/src/js/models/messages/abstract_message.js defined in bundle 'web.assets_frontend' */
odoo.define('mail.model.AbstractMessage',function(require){"use strict";var mailUtils=require('mail.utils');var Class=require('web.Class');var core=require('web.core');var session=require('web.session');var time=require('web.time');var _t=core._t;var AbstractMessage=Class.extend({init:function(parent,data){this._attachmentIDs=data.attachment_ids||[];this._body=data.body||"";this._date=data.date?moment(time.str_to_datetime(data.date)):moment();this._id=data.id;this._isDiscussion=data.is_discussion;this._isNotification=data.is_notification;this._serverAuthorID=data.author_id;this._type=data.message_type||undefined;this._processAttachmentURL();},getAttachments:function(){return this._attachmentIDs;},getAuthorID:function(){if(!this.hasAuthor()){return-1;}
return this._serverAuthorID[0];},getAvatarSource:function(){},getBody:function(){return this._body;},getDate:function(){return this._date;},getDateDay:function(){var date=this.getDate().format('YYYY-MM-DD');if(date===moment().format('YYYY-MM-DD')){return _t("Today");}else if(date===moment().subtract(1,'days').format('YYYY-MM-DD')){return _t("Yesterday");}
return this.getDate().format('LL');},getDisplayedAuthor:function(){return this.hasAuthor()?this._getAuthorName():null;},getID:function(){return this._id;},getImageAttachments:function(){return _.filter(this.getAttachments(),function(attachment){return attachment.mimetype&&attachment.mimetype.split('/')[0]==='image';});},getNonImageAttachments:function(){return _.difference(this.getAttachments(),this.getImageAttachments());},getTimeElapsed:function(){return mailUtils.timeFromNow(this.getDate());},getType:function(){return this._type;},hasAttachments:function(){return this.getAttachments().length>0;},hasAuthor:function(){return!!(this._serverAuthorID&&this._serverAuthorID[0]);},hasCustomerEmailData:function(){return false;},hasEmailFrom:function(){return false;},hasImageAttachments:function(){return _.some(this.getAttachments(),function(attachment){return attachment.mimetype&&attachment.mimetype.split('/')[0]==='image';});},hasNonImageAttachments:function(){return _.some(this.getAttachments(),function(attachment){return!(attachment.mimetype&&attachment.mimetype.split('/')[0]==='image');});},originatesFromChannel:function(){return false;},hasSubject:function(){return false;},hasSubtypeDescription:function(){return false;},hasTrackingValues:function(){return false;},isDiscussion:function(){return this._isDiscussion;},isLinkedToDocumentThread:function(){return false;},isNeedaction:function(){return false;},isNote:function(){return this._isNote;},isNotification:function(){return this._isNotification;},isStarred:function(){return false;},isSystemNotification:function(){return false;},needsModeration:function(){return false;},removeAttachments:function(attachmentIDs){this._attachmentIDs=_.reject(this._attachmentIDs,function(attachment){return _.contains(attachmentIDs,attachment.id);});},shouldRedirectToAuthor:function(){return!this._isMyselfAuthor();},_getAuthorName:function(){if(!this.hasAuthor()){return"";}
return this._serverAuthorID[1];},_isMyselfAuthor:function(){return this.hasAuthor()&&(this.getAuthorID()===session.partner_id);},_processAttachmentURL:function(){_.each(this.getAttachments(),function(attachment){attachment.url='/web/content/'+attachment.id+'?download=true';});},});return AbstractMessage;});;

/* /im_livechat/static/src/js/models/website_livechat_message.js defined in bundle 'web.assets_frontend' */
odoo.define('im_livechat.model.WebsiteLivechatMessage',function(require){"use strict";var AbstractMessage=require('mail.model.AbstractMessage');var WebsiteLivechatMessage=AbstractMessage.extend({init:function(parent,data,options){this._super.apply(this,arguments);this._defaultUsername=options.default_username;this._serverURL=options.serverURL;},getAvatarSource:function(){var source=this._serverURL;if(this.hasAuthor()){source+='/web/image/res.partner/'+this.getAuthorID()+'/image_small';}else{source+='/mail/static/src/img/smiley/avatar.jpg';}
return source;},getDisplayedAuthor:function(){return this._super.apply(this,arguments)||this._defaultUsername;},});return WebsiteLivechatMessage;});;

/* /website_slides/static/src/js/slides.js defined in bundle 'web.assets_frontend' */
odoo.define('website_slides.slides',function(require){"use strict";var ajax=require('web.ajax');var core=require('web.core');var time=require('web.time');var Widget=require('web.Widget');var local_storage=require('web.local_storage');require('root.widget');var _t=core._t;var page_widgets={};(function(){var widget_parent=$('body');$("timeago.timeago").each(function(index,el){var datetime=$(el).attr('datetime'),datetime_obj=time.str_to_datetime(datetime),display_str="";if(datetime_obj&&new Date().getTime()-datetime_obj.getTime()>7*24*60*60*1000){display_str=moment(datetime_obj).format('ll');}else{display_str=moment(datetime_obj).fromNow();}
$(el).text(display_str);});$('.o_slides_hide_channel_settings').on('click',function(ev){var channel_id=$(this).data("channelId");ev.preventDefault();document.cookie="slides_channel_"+channel_id+" = closed";return true;});var LikeButton=Widget.extend({setElement:function($el){this._super.apply(this,arguments);this.$el.on('click',this,_.bind(this.apply_action,this));},apply_action:function(ev){var button=$(ev.currentTarget);var slide_id=button.data('slide-id');var user_id=button.data('user-id');var is_public=button.data('public-user');var href=button.data('href');if(is_public){this.popover_alert(button,_.str.sprintf(_t('Please <a href="/web?redirect=%s">login</a> to vote this slide'),(document.URL)));}else{var target=button.find('.o_wslides_like_dislike_count');if(local_storage.getItem('slide_vote_'+slide_id)!==user_id.toString()){ajax.jsonRpc(href,'call',{slide_id:slide_id}).then(function(data){target.text(data);local_storage.setItem('slide_vote_'+slide_id,user_id);});}else{this.popover_alert(button,_t('You have already voted for this slide'));}}},popover_alert:function($el,message){$el.popover({trigger:'focus',placement:'bottom',container:'body',html:true,content:function(){return message;}}).popover('show');},});page_widgets['likeButton']=new LikeButton(widget_parent).setElement($('.oe_slide_js_like'));page_widgets['dislikeButton']=new LikeButton(widget_parent).setElement($('.oe_slide_js_unlike'));var SlideSocialEmbed=Widget.extend({events:{'change input':'change_page',},init:function(parent,max_page){this._super(parent);this.max_page=max_page||false;},change_page:function(ev){ev.preventDefault();var input=this.$('input');var page=parseInt(input.val());if(this.max_page&&!(page>0&&page<=this.max_page)){page=1;}
this.update_embedded_code(page);},update_embedded_code:function(page){var embed_input=this.$('.slide_embed_code');var new_code=embed_input.val().replace(/(page=).*?([^\d]+)/,'$1'+page+'$2');embed_input.val(new_code);},});$('iframe.o_wslides_iframe_viewer').ready(function(){var $iframe=$(this);var max_page=$iframe.contents().find('#page_count').val();new SlideSocialEmbed($iframe,max_page).setElement($('.oe_slide_js_embed_code_widget'));});var ShareMail=Widget.extend({events:{'click button':'send_mail',},send_mail:function(){var self=this;var input=this.$('input');var slide_id=this.$('button').data('slide-id');if(input.val()&&input[0].checkValidity()){this.$el.removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');ajax.jsonRpc('/slides/slide/send_share_email','call',{slide_id:slide_id,email:input.val(),}).then(function(){self.$el.html($('<div class="alert alert-info" role="alert"><strong>Thank you!</strong> Mail has been sent.</div>'));});}else{this.$el.addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');input.focus();}},});page_widgets['share_mail']=new ShareMail(widget_parent).setElement($('.oe_slide_js_share_email'));if($('div#statistic').length){var slide_url=$("div#statistic").attr('slide-url');var social_urls={'linkedin':'https://www.linkedin.com/countserv/count/share?url=','twitter':'https://cdn.api.twitter.com/1/urls/count.json?url=','facebook':'https://graph.facebook.com/?id=','gplus':'https://clients6.google.com/rpc'}
var update_statistics=function(social_site,slide_url){if(social_site=='gplus'){$.ajax({url:social_urls['gplus'],type:"POST",dataType:'json',contentType:'application/json',data:JSON.stringify([{"method":"pos.plusones.get","id":"p","params":{"nolog":true,"id":slide_url,"source":"widget","userId":"@viewer","groupId":"@self"},"jsonrpc":"2.0","apiVersion":"v1"}]),success:function(data){$('#google-badge').text(data[0].result.metadata.globalCounts.count||0);$('#total-share').text(parseInt($('#total-share').text())+parseInt($('#google-badge').text()));},});}else{$.ajax({url:social_urls[social_site]+slide_url,dataType:'jsonp',success:function(data){var shareCount=(social_site==='facebook'?data.shares:data.count)||0;$('#'+social_site+'-badge').text(shareCount);$('#total-share').text(parseInt($('#total-share').text())+parseInt($('#'+social_site+'-badge').text()));},});}};$.each(social_urls,function(key,value){update_statistics(key,slide_url);});$("a.o_slides_social_share").on('click',function(ev){ev.preventDefault();var key=$(ev.currentTarget).attr('social-key');var popUpURL=$(ev.currentTarget).attr('href');var popUp=window.open(popUpURL,'Share Dialog','width=626,height=436');$(window).on('focus',function(){if(popUp.closed){update_statistics(key,slide_url);$(window).off('focus');}});});}})();return{page_widgets:page_widgets,};});;

/* /website_slides/static/src/js/slides_upload.js defined in bundle 'web.assets_frontend' */
odoo.define('website_slides.upload',function(require){"use strict";var ajax=require('web.ajax');var core=require('web.core');var Widget=require('web.Widget');require('web.dom_ready');var weContext=require("web_editor.context");var slides=require('website_slides.slides');var qweb=core.qweb;var _t=core._t;if(!$('.oe_slide_js_upload').length){return $.Deferred().reject("DOM doesn't contain '.oe_slide_js_upload'");}
ajax.loadXML('/website_slides/static/src/xml/website_slides.xml',qweb);var SlideDialog=Widget.extend({template:'website.slide.upload',events:{'hidden.bs.modal':'destroy','click button.save':'save','click button[data-dismiss="modal"]':'cancel','change input#upload':'slide_upload','change input#url':'slide_url','click .list-group-item':function(ev){this.$('.list-group-item').removeClass('active');$(ev.target).closest('li').addClass('active');}},init:function(el,channel_id){this._super(el,channel_id);this.channel_id=parseInt(channel_id,10);this.file={};this.index_content="";},start:function(){this.$el.modal({backdrop:'static'});this.set_category_id();this.set_tag_ids();},slide_url:function(ev){var self=this,value={'url':$(ev.target).val(),'channel_id':self.channel_id};this.$('.alert-warning').remove();this.is_valid_url=false;this.$('.save').button('loading');ajax.jsonRpc('/slides/dialog_preview/','call',value).then(function(data){self.$('.save').button('reset');if(data.error){self.display_alert(data.error);}else{self.$("#slide-image").attr("src",data.url_src);self.$('#name').val(data.title);self.$('#description').val(data.description);self.is_valid_url=true;}});},check_unique_slide:function(file_name){var self=this;return ajax.jsonRpc('/web/dataset/call_kw','call',{model:'slide.slide',method:'search_count',args:[[['channel_id','=',self.channel_id],['name','=',file_name]]],kwargs:{context:weContext.get(),}});},slide_upload:function(ev){var self=this,file=ev.target.files[0],is_image=/^image\/.*/.test(file.type),loaded=false;this.file.name=file.name;this.file.type=file.type;if(!(is_image||this.file.type==='application/pdf')){this.display_alert(_t("Invalid file type. Please select pdf or image file"));this.reset_file();return;}
if(file.size/1024/1024>25){this.display_alert(_t("File is too big. File size cannot exceed 25MB"));this.reset_file();return;}
this.$('.alert-warning').remove();var BinaryReader=new FileReader();BinaryReader.readAsDataURL(file);BinaryReader.onloadend=function(upload){var buffer=upload.target.result;if(is_image){self.$("#slide-image").attr("src",buffer);}
buffer=buffer.split(',')[1];self.file.data=buffer;};if(file.type==='application/pdf'){var ArrayReader=new FileReader();this.$('.save').button('loading');ArrayReader.readAsArrayBuffer(file);ArrayReader.onload=function(evt){var buffer=evt.target.result;var passwordNeeded=function(){self.display_alert(_t("You can not upload password protected file."));self.reset_file();self.$('.save').button('reset');};PDFJS.getDocument(new Uint8Array(buffer),null,passwordNeeded).then(function getPdf(pdf){pdf.getPage(1).then(function getFirstPage(page){var scale=1;var viewport=page.getViewport(scale);var canvas=document.getElementById('data_canvas');var context=canvas.getContext('2d');canvas.height=viewport.height;canvas.width=viewport.width;page.render({canvasContext:context,viewport:viewport}).then(function(){var image_data=self.$('#data_canvas')[0].toDataURL();self.$("#slide-image").attr("src",image_data);if(loaded){self.$('.save').button('reset');}
loaded=true;});});var maxPages=pdf.pdfInfo.numPages;var page,j;self.index_content="";for(j=1;j<=maxPages;j+=1){page=pdf.getPage(j);page.then(function(page_obj){var page_number=page_obj.pageIndex+1;page_obj.getTextContent().then(function(data){var page_content='';_.each(data.items,function(obj){page_content=page_content+obj.str+" ";});page_content=page_content.replace(/\0/g,"");self.index_content=self.index_content+page_number+". "+page_content+'\n';if(maxPages===page_number){if(loaded){self.$('.save').button('reset');}
loaded=true;}});});}});};}
var input=file.name;var input_val=input.substr(0,input.lastIndexOf('.'))||input;this.check_unique_slide(input_val).then(function(exist){if(exist){var message=_t("Channel contains the given title, please change before Save or Publish.");self.display_alert(message);}
self.$('#name').val(input_val);});},reset_file:function(){var control=this.$('#upload');control.replaceWith(control=control.clone(true));this.file.name=false;},display_alert:function(message){this.$('.alert-warning').remove();$('<div class="alert alert-warning" role="alert">'+message+'</div>').insertBefore(this.$('form'));},select2_wrapper:function(tag,multi,fetch_fnc){return{width:'100%',placeholder:tag,allowClear:true,formatNoMatches:false,multiple:multi,selection_data:false,fetch_rpc_fnc:fetch_fnc,formatSelection:function(data){if(data.tag){data.text=data.tag;}
return data.text;},createSearchChoice:function(term,data){var added_tags=$(this.opts.element).select2('data');if(_.filter(_.union(added_tags,data),function(tag){return tag.text.toLowerCase().localeCompare(term.toLowerCase())===0;}).length===0){return{id:_.uniqueId('tag_'),create:true,tag:term,text:_.str.sprintf(_t("Create new tag '%s'"),term),};}},fill_data:function(query,data){var that=this,tags={results:[]};_.each(data,function(obj){if(that.matcher(query.term,obj.name)){tags.results.push({id:obj.id,text:obj.name});}});query.callback(tags);},query:function(query){var that=this;if(!this.selection_data){this.fetch_rpc_fnc().then(function(data){that.fill_data(query,data);that.selection_data=data;});}else{this.fill_data(query,this.selection_data);}}};},set_category_id:function(){var self=this;$('#category_id').select2(this.select2_wrapper(_t('Category'),false,function(){return ajax.jsonRpc("/web/dataset/call_kw",'call',{model:'slide.category',method:'search_read',args:[],kwargs:{fields:['name'],domain:[['channel_id','=',self.channel_id]],context:weContext.get(),}});}));},get_category_id:function(){var value=$('#category_id').select2('data');if(value&&value.create){return[0,{'name':value.text}];}
return[value?value.id:null];},set_tag_ids:function(){$('#tag_ids').select2(this.select2_wrapper(_t('Tags'),true,function(){return ajax.jsonRpc("/web/dataset/call_kw",'call',{model:'slide.tag',method:'search_read',args:[],kwargs:{fields:['name'],context:weContext.get(),}});}));},get_tag_ids:function(){var res=[];_.each($('#tag_ids').select2('data'),function(val){if(val.create){res.push([0,0,{'name':val.text}]);}else{res.push([4,val.id]);}});return res;},svg_to_png:function(){var img=this.$el.find("img#slide-image")[0];var canvas=document.createElement("canvas");canvas.width=img.width;canvas.height=img.height;canvas.getContext("2d").drawImage(img,0,0);return canvas.toDataURL("image/png").split(',')[1];},get_value:function(){var canvas=this.$('#data_canvas')[0],values={'channel_id':this.channel_id||'','name':this.$('#name').val(),'url':this.$('#url').val(),'description':this.$('#description').val(),'tag_ids':this.get_tag_ids(),'category_id':this.get_category_id()};if(this.file.type==='application/pdf'){_.extend(values,{'image':canvas.toDataURL().split(',')[1],'index_content':this.index_content,'slide_type':canvas.height>canvas.width?'document':'presentation','mime_type':this.file.type,'datas':this.file.data});}
if(/^image\/.*/.test(this.file.type)){_.extend(values,{'slide_type':'infographic','mime_type':this.file.type==='image/svg+xml'?'image/png':this.file.type,'datas':this.file.type==='image/svg+xml'?this.svg_to_png():this.file.data});}
return values;},validate:function(){this.$('.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');if(!this.$('#name').val()){this.$('#name').closest('.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');return false;}
var url=this.$('#url').val()?this.is_valid_url:false;if(!(this.file.name||url)){this.$('#url').closest('.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');return false;}
return true;},save:function(ev){var self=this;if(this.validate()){var values=this.get_value();if($(ev.target).data('published')){values.website_published=true;}
this.$('.oe_slides_upload_loading').show();this.$('.modal-footer, .modal-body').hide();ajax.jsonRpc("/slides/add_slide",'call',values).then(function(data){if(data.error){self.display_alert(data.error);self.$('.oe_slides_upload_loading').hide();self.$('.modal-footer, .modal-body').show();}else{window.location=data.url;}});}},cancel:function(){this.trigger("cancel");}});$('.oe_slide_js_upload').on('click',function(){var channel_id=$(this).attr('channel_id');slides.page_widgets['upload_dialog']=new SlideDialog(this,channel_id).appendTo(document.body);});if($.deparam.querystring().enable_slide_upload!==undefined){$('.oe_slide_js_upload').click();}});;

/* /website_event_sale/static/src/js/website.tour.event_sale.js defined in bundle 'web.assets_frontend' */
odoo.define('website_event_sale.tour',function(require){'use strict';var tour=require('web_tour.tour');var base=require("web_editor.base");tour.register('event_buy_tickets',{test:true,url:'/event',wait_for:base.ready()},[{content:"Go to the `Events` page",trigger:'a[href*="/event"]:contains("Conference for Architects"):first',},{content:"Select 1 unit of `Standard` ticket type",extra_trigger:'#wrap:not(:has(a[href*="/event"]:contains("Conference for Architects")))',trigger:'select:eq(0)',run:'text 1',},{content:"Select 2 units of `VIP` ticket type",extra_trigger:'select:eq(0):has(option:contains(1):propSelected)',trigger:'select:eq(1)',run:'text 2',},{content:"Click on `Order Now` button",extra_trigger:'select:eq(1):has(option:contains(2):propSelected)',trigger:'.btn-primary:contains("Register Now")',},{content:"Fill attendees details",trigger:'form[id="attendee_registration"] .btn:contains("Continue")',run:function(){$("input[name='1-name']").val("Att1");$("input[name='1-phone']").val("111 111");$("input[name='1-email']").val("att1@example.com");$("input[name='2-name']").val("Att2");$("input[name='2-phone']").val("222 222");$("input[name='2-email']").val("att2@example.com");$("input[name='3-name']").val("Att3");$("input[name='3-phone']").val("333 333");$("input[name='3-email']").val("att3@example.com");},},{content:"Validate attendees details",extra_trigger:"input[name='1-name'], input[name='2-name'], input[name='3-name']",trigger:'button:contains("Continue")',},{content:"Check that the cart contains exactly 3 triggers",trigger:'a:has(.my_cart_quantity:containsExact(3)),.o_extra_menu_items .fa-plus',run:function(){},},{content:"go to cart",trigger:'a:contains(Return to Cart)',},{content:"Modify the cart to add 1 unit of `VIP` ticket type",extra_trigger:"#cart_products:contains(Standard):contains(VIP)",trigger:"#cart_products tr:contains(VIP) .fa-plus",},{content:"Now click on `Process Checkout`",extra_trigger:'a:has(.my_cart_quantity):contains(4),#cart_products input.js_quantity[value="3"]',trigger:'.btn-primary:contains("Process Checkout")'},{content:"Check that the subtotal is 5,500.00 USD",trigger:'#order_total_untaxed .oe_currency_value:contains("5,500.00")',run:function(){},},{content:"Select `Wire Transfer` payment method",trigger:'#payment_method label:contains("Wire Transfer")',},{content:"Pay",extra_trigger:'#payment_method label:contains("Wire Transfer") input:checked,#payment_method:not(:has("input:radio:visible"))',trigger:'button[id="o_payment_form_pay"]:visible',},{content:"Last step",trigger:'.oe_website_sale:contains("Pending... The order will be validated after the payment.")',timeout:30000,}]);});;

/* /website_mail_channel/static/src/js/website_mail_channel.js defined in bundle 'web.assets_frontend' */
odoo.define('website_mail_channel',function(require){"use strict";var ajax=require('web.ajax');$(document).ready(function(){$('.o_mg_link_hide').on('click',function(ev){ev.preventDefault();var $link=$(ev.currentTarget);var $container=$link.parents('div').first();$container.find('.o_mg_link_hide').first().hide();$container.find('.o_mg_link_show').first().show();$container.find('.o_mg_link_content').first().show();return false;});$('.o_mg_link_show').on('click',function(ev){ev.preventDefault();var $link=$(ev.currentTarget);var $container=$link.parents('div').first();$container.find('.o_mg_link_hide').first().show();$container.find('.o_mg_link_show').first().hide();$container.find('.o_mg_link_content').first().hide();return false;});$('body').on('click','button.o_mg_read_more',function(ev){var $link=$(ev.target);return ajax.jsonRpc($link.data('href'),'call',{'last_displayed_id':$link.data('msg-id'),}).then(function(data){if(!data){return true;}
var $thread_container=$link.parents('.o_mg_replies').first().find('ul.list-unstyled');if($thread_container){var $last_msg=$thread_container.find('li.media').last();$(data).find('li.media').insertAfter($last_msg);$(data).find('p.well').appendTo($thread_container);}
var $show_more=$link.parents('p.well').first();$show_more.remove();return true;});});});});;

/* /website_mail_channel/static/src/js/website_mail_channel.snippet.js defined in bundle 'web.assets_frontend' */
odoo.define('website_mail_channel.snippet',function(require){'use strict';var sAnimation=require('website.content.snippets.animation');sAnimation.registry.follow_alias=sAnimation.Class.extend({selector:".js_follow_alias",start:function(){var self=this;this.is_user=false;var unsubscribePage=window.location.search.slice(1).split('&').indexOf("unsubscribe")>=0;this._rpc({route:'/groups/is_member',params:{model:this.$target.data('object'),channel_id:this.$target.data('id'),get_alias_info:true,},}).always(function(data){self.is_user=data.is_user;self.email=data.email;self.$target.find('.js_mg_link').attr('href','/groups/'+self.$target.data('id'));if(unsubscribePage&&self.is_user){self.$target.find(".js_mg_follow_form").remove();}
self.toggle_subscription(data.is_member?'on':'off',data.email);self.$target.removeClass('d-none');});if(!this.editableMode){this.$('> .alert').addClass('d-none');this.$('> .input-group-append.d-none').removeClass('d-none');this.$('.js_follow_btn, .js_unfollow_btn').on('click',function(event){event.preventDefault();self._onClick();});this.$('.js_follow_btn').on('click',function(ev){if($(ev.currentTarget).closest('.js_mg_follow_form').length){self.$('.js_follow_email').val($(ev.currentTarget).closest('.js_mg_follow_form').find('.js_follow_email').val());}});}
return this._super.apply(this,arguments);},_onClick:function(){var self=this;var $email=this.$target.find(".js_follow_email");if($email.length&&!$email.val().match(/.+@.+/)){this.$target.addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');return false;}
this.$target.removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');var subscription_action=this.$target.attr("data-follow")||"off";if(window.location.search.slice(1).split('&').indexOf("unsubscribe")>=0){subscription_action='on';}
this._rpc({route:'/groups/subscription',params:{'channel_id':+this.$target.data('id'),'object':this.$target.data('object'),'subscription':subscription_action,'email':$email.length?$email.val():false,},}).then(function(follow){self.toggle_subscription(follow,self.email);});},toggle_subscription:function(follow,email){var alias_done=this.get_alias_info();if(follow==="on"){this.$target.find(".js_mg_follow_form").addClass('d-none');this.$target.find(".js_mg_details").removeClass('d-none');this.$target.find(".js_mg_confirmation").addClass('d-none');}else if(follow==="off"){this.$target.find(".js_mg_follow_form").removeClass('d-none');this.$target.find(".js_mg_details").addClass('d-none');this.$target.find(".js_mg_confirmation").addClass('d-none');}else if(follow==="email"){this.$target.find(".js_mg_follow_form").addClass('d-none');this.$target.find(".js_mg_details").addClass('d-none');this.$target.find(".js_mg_confirmation").removeClass('d-none');}else{console.error("Unknown subscription action",follow);}
this.$target.find('input.js_follow_email').val(email?email:"").attr("disabled",follow==="on"||(email.length&&this.is_user)?"disabled":false);this.$target.attr("data-follow",follow);return $.when(alias_done);},get_alias_info:function(){var self=this;if(!this.$target.data('id')){return $.Deferred().resolve();}
return this._rpc({route:'/groups/'+this.$target.data('id')+'/get_alias_info'}).then(function(data){if(data.alias_name){self.$target.find('.js_mg_email').attr('href','mailto:'+data.alias_name);self.$target.find('.js_mg_email').removeClass('d-none');}
else{self.$target.find('.js_mg_email').addClass('d-none');}});}});});;

/* /website_crm_partner_assign/static/src/js/crm_partner_assign.js defined in bundle 'web.assets_frontend' */
odoo.define('crm.partner_assign',function(require){'use strict';var rpc=require('web.rpc');var weContext=require('web_editor.context');require('web.dom_ready');var interested_form=$('.interested_partner_assign_form');var desinterested_form=$('.desinterested_partner_assign_form');var opp_stage_buttons=$('.opp-stage-button');var new_opp_form=$('.new_opp_form');if(!interested_form.length&&!desinterested_form.length&&!opp_stage_buttons.length&&!new_opp_form.length){return $.Deferred().reject("DOM doesn't contain website_crm_partner_assign elements");}
$('.interested_partner_assign_confirm').on('click',function(e){var $btn=$(this);if($('.interested_partner_assign_form .comment_interested').val()&&$('.interested_partner_assign_form .contacted_interested').prop('checked')){$btn.prop('disabled',true);rpc.query({model:'crm.lead',method:"partner_interested",args:[[parseInt($('.interested_partner_assign_form .assign_lead_id').val())],$('.interested_partner_assign_form .comment_interested').val()],context:weContext.get(),}).then(function(){window.location.href='/my/leads';}).always(function(){$btn.prop('disabled',false);});}else{$('.interested_partner_assign_form .error_partner_assign_interested').css('display','block');}
return false;});$('.desinterested_partner_assign_confirm').on('click',function(){var $btn=$(this);$btn.prop('disabled',true);rpc.query({model:'crm.lead',method:'partner_desinterested',args:[[parseInt($('.desinterested_partner_assign_form .assign_lead_id').val())],$('.desinterested_partner_assign_form .comment_desinterested').val(),$('.desinterested_partner_assign_form .contacted_desinterested').prop('checked'),$('.desinterested_partner_assign_form .customer_mark_spam').prop('checked'),],context:weContext.get(),}).then(function(){window.location.href='/my/leads';}).always(function(){$btn.prop('disabled',false);});return false;});opp_stage_buttons.on('click',function(e){var $btn=$(this);$btn.prop('disabled',true);rpc.query({model:'crm.lead',method:'write',args:[[parseInt(e.currentTarget.getAttribute('opp'))],{stage_id:parseInt(e.currentTarget.getAttribute('data')),},],context:_.extend({website_partner_assign:1},weContext.get()),}).fail(function(){$btn.prop('disabled',false);}).done(function(){window.location.reload();});});$('.edit_contact_form .country_id').on('change',function(){var country_id=$('.edit_contact_form .country_id').find(":selected").attr('value');$(".edit_contact_form .state[country!="+country_id+"]").css('display','none');$(".edit_contact_form .state[country="+country_id+"]").css('display','block');});$('.edit_contact_confirm').on('click',function(){var $btn=$(this);$btn.prop('disabled',true);rpc.query({model:'crm.lead',method:"write",args:[[parseInt($('.edit_contact_form .opportunity_id').val())],{partner_name:$('.edit_contact_form .partner_name').val(),phone:$('.edit_contact_form .phone').val(),mobile:$('.edit_contact_form .mobile').val(),email_from:$('.edit_contact_form .email_from').val(),street:$('.edit_contact_form .street').val(),street2:$('.edit_contact_form .street2').val(),city:$('.edit_contact_form .city').val(),zip:$('.edit_contact_form .zip').val(),state_id:parseInt($('.edit_contact_form .state_id').find(":selected").attr('value')),country_id:parseInt($('.edit_contact_form .country_id').find(":selected").attr('value')),}],context:weContext.get(),}).fail(function(){$btn.prop('disabled',false);}).done(function(){window.location.reload();});return false;});$('.new_opp_confirm').on('click',function(e){var $btn=$(this);$btn.prop('disabled',true);rpc.query({model:'crm.lead',method:'create_opp_portal',args:[{contact_name:$('.new_opp_form .contact_name').val(),title:$('.new_opp_form .title').val(),description:$('.new_opp_form .description').val(),}],context:weContext.get(),}).done(function(response){if(response.errors){$('#new-opp-dialog .alert').remove();$('#new-opp-dialog div:first').prepend("<div class='alert alert-danger'>"+response.errors+"</div>");$btn.prop('disabled',false);}
else{window.location='/my/opportunity/'+response.id;}}).fail(function(){$btn.prop('disabled',false);});return false;});$('.edit_opp_confirm').on('click',function(){var $btn=$(this);$btn.prop('disabled',true);rpc.query({model:'crm.lead',method:'update_lead_portal',args:[[parseInt($('.edit_opp_form .opportunity_id').val())],{date_deadline:$('.edit_opp_form .date_deadline').val(),planned_revenue:parseFloat($('.edit_opp_form .planned_revenue').val()),probability:parseFloat($('.edit_opp_form .probability').val()),activity_type_id:parseInt($('.edit_opp_form .next_activity').find(":selected").attr('data')),activity_summary:$('.edit_opp_form .activity_summary').val(),activity_date_deadline:$('.edit_opp_form .activity_date_deadline').val(),priority:$('input[name="PriorityRadioOptions"]:checked').val(),}],context:weContext.get(),}).fail(function(){$btn.prop('disabled',false);}).done(function(){window.location.reload();});return false;});$('.edit_opp_form .next_activity').on('change',function(){var selected=$('.edit_opp_form .next_activity').find(":selected");if(selected.attr('activity_summary')){$('.edit_opp_form .activity_summary').val(selected.attr('activity_summary'));}
if(selected.attr('days')){var date_now=moment();var days=parseInt(selected.attr('days'));var date=date_now.add(days,'days');$('.edit_opp_form .activity_date_deadline').val(date.format('YYYY-MM-DD'));}});$("div.input-group span.fa-calendar").on('click',function(e){$(e.currentTarget).closest("div.date").datetimepicker({icons:{time:'fa fa-clock-o',date:'fa-calendar-alt',up:'fa fa-chevron-up',down:'fa fa-chevron-down'},});});});;

/* /theme_plenus/static/src/js/theme_ecommerce.js defined in bundle 'web.assets_frontend' */
odoo.define('theme_plenus.ecommerce',function(require){'use strict';require('web.dom_ready');var core=require('web.core');var sAnimations=require('website.content.snippets.animation');var utils=require('web.utils');var ajax=require('web.ajax');var dom=require('web.dom');var sAnimation=require('website.content.snippets.animation');var ProductConfiguratorMixin=require('sale.ProductConfiguratorMixin');var sale=new sAnimation.registry.WebsiteSale();var _t=core._t;$("a.quick-view-a").click(function(){var pid=$(this).attr('data-id');pid=pid;$('.cus_theme_loader_layout').removeClass('d-none');ajax.jsonRpc('/productdata','call',{'product_id':pid}).then(function(data)
{$('.cus_theme_loader_layout').addClass('d-none');$(".mask_cover").append(data)
$(".mask").fadeIn();sale.init();$('.cus_theme_loader_layout').addClass('hidden');$(".mask_cover").css("display","block");$("[data-attribute_exclusions]").on('change',function(event){sale.onChangeVariant(event)})
$("[data-attribute_exclusions]").trigger('change')
$(".css_attribute_color input").click(function(event){sale._onChangeColorAttribute(event)})
$(".a-submit").click(function(event){sale._onClickSubmit(event)})
$(".qv_close").click(function(){$('.mask_cover').empty(data);});});});$(".t_custom_submenu").parent("li.nav-item").addClass("dropdown");$(".t_custom_submenu").siblings("a.nav-link").addClass("dropdown-toggle").attr("data-toggle","dropdown");$(".static_menu").parent("li.nav-item").css("position","static");sAnimation.registry.affixMenu=sAnimation.Class.extend({selector:'header.o_affix_enabled',start:function(){var def=this._super.apply(this,arguments);if(this.editableMode){return def;}
var self=this;this.$headerClone=this.$target.clone().addClass('o_header_affix affix').removeClass('o_affix_enabled');this.$headerClone.insertAfter(this.$target);this.$headers=this.$target.add(this.$headerClone);this.$dropdowns=this.$headers.find('.dropdown');this.$navbarCollapses=this.$headers.find('.navbar-collapse');_.each(this.$headerClone.find('[data-toggle="collapse"]'),function(el){var $source=$(el);var targetIDSelector=$source.attr('data-target');var $target=self.$headerClone.find(targetIDSelector);$source.attr('data-target',targetIDSelector+'_clone');$target.attr('id',targetIDSelector.substr(1)+'_clone');});$(window).on('resize.affixMenu scroll.affixMenu',_.throttle(this._onWindowUpdate.bind(this),200));setTimeout(this._onWindowUpdate.bind(this),0);if($(window).width()>767){$(".cat-column").mouseenter(function(){var self=$(this);var button_cat=$(self).find('a#btn_categary');button_cat.addClass('menu-cate-hover');});$(".cat-column").mouseleave(function(){var self=$(this);var button_cat=$(self).find('a#btn_categary');button_cat.removeClass('menu-cate-hover');});}
return def;},destroy:function(){if(this.$headerClone){this.$headerClone.remove();$(window).off('.affixMenu');}
this._super.apply(this,arguments);},_onWindowUpdate:function(){var wOffset=$(window).scrollTop();var hOffset=this.$target.scrollTop();this.$headerClone.toggleClass('affixed',wOffset>(hOffset+300));this.$dropdowns.removeClass('show');this.$navbarCollapses.removeClass('show').attr('aria-expanded',false);},});$(window).scroll(function(){if($(this).scrollTop()>300){$('.scrollup-div').fadeIn();}else{$('.scrollup-div').fadeOut();}});$('.scrollup-div').click(function(){$("html, body").animate({scrollTop:0},1000);});$(function(){if($(window).innerWidth()<1200){$('.dropdown').on('show.bs.dropdown',function(){$(this).find('.dropdown-menu').first().stop(true,true).slideDown(150);});$('.dropdown').on('hide.bs.dropdown',function(){$(this).find('.dropdown-menu').first().stop(true,true).slideUp(150);});}
else{$('#wrapwrap .dropdown > a').click(function(){return false;});$("#wrapwrap  .dropdown").hover(function(){$('.dropdown-menu',this).stop(true,true).fadeIn("slow");$(this).toggleClass('open');$('.dropdown-menu',this).stop(true,true).addClass('dropdown_animation');},function(){$('.dropdown-menu',this).stop(true,true).removeClass('dropdown_animation').fadeOut(500);$(this).toggleClass('open');});}});});;

/* /theme_plenus/static/src/js/theme_script.js defined in bundle 'web.assets_frontend' */
odoo.define('theme_plenus.plenus_script',function(require){'use strict';var sAnimations=require('website.content.snippets.animation');require('web.dom_ready');$(window).load(function(){$(function(){if($(window).innerWidth()>1200){$("#top_menu > .dropdown").each(function(){if(!$(this).closest(".o_extra_menu_items").length){$(this).closest("a").click(function(){return false;});$(this).hover(function(){$('> .dropdown-menu',this).stop(true,true).fadeIn("slow");$(this).toggleClass('open');},function(){$('> .dropdown-menu',this).stop(true,true).fadeOut("fast");$(this).toggleClass('open');});}})}
$('.o_extra_menu_items .dropdown-menu').css("display","none")
$('.o_extra_menu_items .dropdown').click(function(event){event.stopImmediatePropagation();$(this).find(".dropdown-menu").toggle();});});$("li.o_extra_menu_items").find("img").removeAttr("src alt");});$(window).load(function(){var header_before_height=$(".t_header_before_overlay").outerHeight();if($("body").find(".o_header_overlay").length>0)
{$("header:not(.o_header_affix)").addClass("transparent_top")
$(".transparent_top").css("top",header_before_height);$(".o_header_affix.affix").removeClass("transparent_top")}})
$(window).load(function(){$("#custom_menu li").each(function(){var has_ctg=$(this).find("ul.t_custom_subctg").length>0
if(has_ctg){$(this).append("<span class='ctg_arrow fa fa-angle-right' />")
$(".ctg_arrow").click(function(ev){ev.preventDefault();ev.stopPropagation();var self=$(this).siblings("ul.t_custom_subctg");var ul_index=$(self).parents("ul").length;$(self).stop().animate({width:"100%"});$(self).css({"display":"block","transition":"0.3s easeout","z-index":ul_index})
$(self).parent().parent(".t_custom_subctg").css("overflow-y","hidden");$(self).parent().parent(".t_custom_subctg").scrollTop(0);$(this).parents("#custom_menu").scrollTop(0);$(this).parents("#custom_menu").css("overflow-y","hidden");})
$(this).find("ul.t_custom_subctg").children(".t_prent_ctg_heading").click(function(ev){ev.preventDefault();ev.stopPropagation();$(this).parent("ul#custom_recursive").stop().animate({width:"0"},function(){$(this).css("display","none")
$(this).parent().parent(".t_custom_subctg").css("overflow-y","auto");});})}})});$("#custom_menu > li > ul.t_custom_subctg > .t_prent_ctg_heading").click(function(){$(this).parents("#custom_menu").css("overflow-y","auto");})
if($('div').hasClass('o_portal_my_home'))
{if(!$('a').hasClass('list-group-item'))
{$(".page-header").css({'display':'none'})}}
$('#t_product_tabs li a:not(:first)').addClass('inactive');$('.t_product_tab').hide();$('#t_product_tabs li').each(function(){if(!$(this).find("a").hasClass('inactive'))
{var t=$(this).find("a").attr('id');$('.'+t+'C').fadeIn('slow');}})
$('#t_product_tabs li a').click(function(){var t=$(this).attr('id');if($(this).hasClass('inactive')){$('#t_product_tabs li a').addClass('inactive');$(this).removeClass('inactive');$('.t_product_tab').hide();$('.'+t+'C').fadeIn('slow').addClass('content_animation');}});$('#t_product_tabs li:first a').addClass('current_tab');$('#t_product_tabs li a').on('click',function(){$('li a.current_tab').removeClass('current_tab');$(this).addClass('current_tab');});if($('.recommended_product_slider_main').length){$(".theme_carousel_common").each(function(){$(this).find(".carousel-item").first().addClass("active");})}
if($('#product_specifications').length){$('.specification_li').addClass("active");}
if($('.o_shop_discussion_rating').length){$('.rating_review_li').addClass("active");}
$('.theme_carousel_common .carousel-item').each(function(){var next=$(this).next();if(!next.length){next=$(this).siblings(':first');}
next.children(':first-child').clone().appendTo($(this));});$(window).load(function(){$("form.js_attributes input:checked").each(function(){var self=$(this);var val=this.value;var radio_attr=self.parent("label").find("span").html();var curr_parent=self.parents("ul");var target=curr_parent.parent("li.nav-item").find("a.clear_all_variant");target.css("display","block");var color_attr=self.parent("label").next(".color-name").html();var target_color=self.parents("li.nav-item").find("a.clear_all_variant");target_color.css("display","block");if(target.length>=0||target_color.length>=0){$(".clear_all_form_selection").css("display","block");$(".view_filter_span").css("display","inline-block");if(radio_attr){$(".view_all_filter_inner").append("<div class='attribute'>"+radio_attr+"<a data-id='"+val+"' class='clear_attr_a'>x</a></div>");}
if(color_attr){$(".view_all_filter_inner").append("<div class='attribute'>"+color_attr+"<a data-id='"+val+"' class='clear_attr_a'>x</a></div>");}}else{$(".clear_all_form_selection").css("display","none");}
$(".clear_attr_a").click(function(){var id=$(this).attr("data-id");if(id){$("form.js_attributes input[value="+id+"]").removeAttr("checked");$("form.js_attributes input").closest("form").submit();}})
var first_li=self.closest("ul").find("li").first();var selected_li=self.closest("li.nav-item");$(first_li).before(selected_li);if(!curr_parent.hasClass("open_ul")){curr_parent.parent("li.nav-item").find('.t_attr_title').click();}});$("form.js_attributes select").each(function(){var self=$(this);var val=self.find("option:selected").val();var select_attr=self.find("option:selected").html();var target_select=self.parents("li.nav-item").find("a.clear_all_variant");if(val.length>=1){target_select.css("display","block");$(".clear_all_form_selection").css("display","block");$(".view_filter_span").css("display","inline-block");if(target_select){$(".view_all_filter_inner").append("<div class='attribute'>"+select_attr+"<a data-id='"+val+"' class='clear_attr_a'>x</a></div>");}
self.parents("li.nav-item").find(".t_attr_title").click();}
$(".clear_attr_a").click(function(){var id=$(this).attr("data-id");if(id){$("form.js_attributes option:selected[value="+id+"]").remove();$("form.js_attributes input").closest("form").submit();}})})
$(".t_shop_attr_ul > li.nav-item:first-child").each(function(){var self=$(this);var ul_main=self.find("ul");if(ul_main.length==1){if(!ul_main.hasClass("open_ul")){self.find('.t_attr_title').click();}}})
$(".view_more_attr").click(function(){var self=this;$(self).parent('li.nav-item').find("ul").css({"overflow":"auto"});$(self).animate({"opacity":"0"},300,function(){$(self).addClass('d-none')
$(self).parent('li.nav-item').find(".view_less_attr").removeClass("d-none")
$(self).parent('li.nav-item').find(".view_less_attr").css("display","inline-block")
$(self).parent('li.nav-item').find(".view_less_attr").animate({opacity:1});});})
$(".view_less_attr").click(function(){var self=this;$(self).parent('li.nav-item').find("ul").css({"overflow":"hidden"});$(self).animate({"opacity":"0"},300,function(){$(self).addClass('d-none')
$(self).parent('li.nav-item').find(".view_more_attr").removeClass("d-none")
$(self).parent('li.nav-item').find(".view_more_attr").css("display","inline-block")
$(self).parent('li.nav-item').find(".view_more_attr").animate({opacity:1});});})});$(".clear_all_variant").click(function(){var self=$(this);var curent_div=self.parents("li.nav-item");$(curent_div).find("input:checked").each(function(){$(this).removeAttr("checked");});$(curent_div).find("option:selected").each(function(){$(this).remove();})
$("form.js_attributes input").closest("form").submit();});$(".clear_all_form_selection").click(function(){$("form.js_attributes .t_shop_attr_ul > li").each(function(){var self=$(this);self.find("select option:selected").prop('selected',false);self.find("input:checked").prop('checked',false);})
$("form.js_attributes").closest("form").submit();});$(".view_filter_span").click(function(){$(".view_all_filter_inner").toggle("slow");})
$(".color-with-name-divmaxW .color-name").click(function(){var self=$(this);self.parents("li.color-with-name-divmaxW").find("input").click();})
$(".t_attr_title").click(function(){var self=$(this);var main_li=self.parents("li.nav-item");var ul_H=main_li.find("ul").outerHeight();if(main_li.find("select").length==1){var main_select=main_li.find("select");main_select.toggle('slow');var clicks=$(this).data('clicks');if(clicks){self.find("i").removeClass('fa-caret-down').addClass('fa-caret-right');}else{self.find("i").removeClass('fa-caret-right').addClass('fa-caret-down');}
$(this).data("clicks",!clicks);return;}
var main_ul=main_li.find("ul");if(main_ul.hasClass("open_ul")){main_ul.removeClass("open_ul");self.find("i").removeClass('fa-caret-down').addClass('fa-caret-right');main_ul.toggle('slow');main_li.find('.view_more_attr').removeClass('active');main_li.find('.view_more_attr').css("display","none");}else{main_ul.addClass("open_ul");self.find("i").removeClass('fa-caret-right').addClass('fa-caret-down');main_ul.toggle('slow');if(ul_H>=125){main_li.find('.view_more_attr').addClass('active');main_li.find('.view_more_attr').css("display","inline-block");}}})
if($(window).width()>1200){$(".oe_grid.oe_product").mouseenter(function(){var self=$(this);var section_H=self.find("section").outerHeight();self.find(".oe_product_image").css({"opacity":"0.2","transition":"1s"});});$(".oe_grid.oe_product").mouseleave(function(){var self=$(this);self.find(".oe_product_image").css("opacity","1");});}
else
{$(".product_price").addClass("bottom_animation");}
$('.shop_filter_resp').click(function(){$("#products_grid_before").toggleClass("t_filter_slide");$("#wrapwrap").toggleClass("wrapwrap_trans");$('body').css("overflow-x","hidden");});$('.filter_close').click(function(){$("#products_grid_before").removeClass("t_filter_slide")
$("#wrapwrap").removeClass("wrapwrap_trans");});$(".t_srch_icon").click(function(){$(".t_search_popover").addClass("visible");$(this).css("display","none");$(".t_srch_close").css("display","block");});$(".t_srch_close").click(function(){$(".t_search_popover").removeClass("visible");$(this).css("display","none");$(".t_srch_icon").css("display","block");});$(document).click(function(event){if(!$(event.target).closest(".t_search_popover,.t_srch_icon_header").length){$("body").find(".t_search_popover").removeClass("visible");$('.t_srch_close').css("display","none");$(".t_srch_icon").css("display","block");}});if($(".header_style_6_main").length){$(".header_6_srch_icon").click(function(){$(".t_header_before_right").addClass("search_animate");if($(window).width()<768){$(".t_header_before_left").addClass("search_animate");}
$(".t_header_search input").css("width","100%");setTimeout(function(){if($(window).width()>768){$(".t_header_before_right").css("display","none");}else{$(".t_header_before_right").css("display","none");$(".t_header_before_left").css("display","none");}
$(".t_header_search").css("display","block");},500);})
$(".t_header_search_close").click(function(){$(".t_header_before_right").removeClass("search_animate").css("display","block");$(".t_header_before_left").removeClass("search_animate").css("display","block");$(".t_header_search").css("display","none");$(".t_header_search input").css("width","0%");})}
$('.te_bar_icon').click(function(){$(".te_vertical_menu").toggleClass("te_open");if($('.menu_vertical_option').length){$("#wrapwrap").addClass("te_menu_overlay");}});$('.te_menu_icon_close').click(function(){$(".te_vertical_menu").removeClass("te_open");$("#wrapwrap").removeClass("te_menu_overlay");});var $h_menu=$("#oe_main_menu_navbar").height();$(".te_vertical_menu").css({top:$h_menu+0,bottom:0,right:0,position:'fixed'});$(window).load(function(){$('.progress').each(function(){var area_val=$(this).find('.progress-bar').attr("aria-valuenow")
$(this).find('.progress-bar').css("max-width",area_val+"%")})})
$(document).ready(function(){$('.carousel[data-type="multi"]').each(function(){$('#'+this.id).on('slide.bs.carousel',function(e){var carousel_id=this.id;var $e=$(e.relatedTarget);var idx=$e.index();var itemsPerSlide=4;var totalItems=$('#'+carousel_id).find('.carousel-item').length;if(idx>=totalItems-(itemsPerSlide-1)){var it=itemsPerSlide-(totalItems-idx);for(var i=0;i<it;i++){if(e.direction=="left"){$(this).find('.carousel-item').eq(i).appendTo($(this).find('.carousel-inner'));}
else{$(this).find('.carousel-item').eq(0).appendTo($(this).find('.carousel-inner'));}}}});$('#'+this.id).carousel({interval:10000})});})
sAnimations.registry.WebsiteSale.include({_updateProductImage:function(){this._super.apply(this,arguments);if($(window).width()>767){if($('.carousel .vertical .carousel-item').length>5)
{$('.carousel .vertical .carousel-item').each(function(){var next=$(this).next();if(!next.length){next=$(this).siblings(':first');}
next.children(':first-child').clone().appendTo($(this));for(var i=1;i<4;i++){next=next.next();if(!next.length){next=$(this).siblings(':first');}
next.children(':first-child').clone().appendTo($(this));}});}
else
{$('.carousel .vertical .carousel-item').each(function(){$(this).addClass("active");})
$(".carousel-control-up, .carousel-control-down").addClass("d-none");}}
else
{$("#carousel-pager .vertical").addClass("carousel-indicators");}},});$(".t_cart_table .css_quantity > span").siblings("div").css("display","none")
if($(".price_filter_main_div").length){var get_min_val=$('input#price_slider_min').val();var get_max_val=$('input#price_slider_max').val();$("span.min-amount").html(parseInt(get_min_val));$("span.max-amount").html(parseInt(get_max_val));var current_min_val=$('input#price_range_min_value').val();var current_max_val=$('input#price_range_max_value').val();$('input#priceRangeLower, input#price_range_min_value').change(function(ev){ev.preventDefault();return false;})
$('input#priceRangeUpper, input#price_range_max_value').change(function(ev){ev.preventDefault();return false;})
$.fn.inputFilter=function(inputFilter){return this.on("input keydown keyup mousedown mouseup select contextmenu drop",function(){if(inputFilter(this.value)){this.oldValue=this.value;this.oldSelectionStart=this.selectionStart;this.oldSelectionEnd=this.selectionEnd;}else if(this.hasOwnProperty("oldValue")){this.value=this.oldValue;this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd);}});};$(".filter-price input#price_range_min_value, .filter-price input#price_range_max_value").inputFilter(function(value){return/^-?\d*[0-9]?\d*$/.test(value);});$("#price_slider_form").click(function(){$('span#submit-error').removeClass("price_error_message");$('span#submit-error').html("");$('#price_range_min_value').css({'border-color':'inherit','background':'#ffffff'});$('#price_range_max_value').css({'border-color':'inherit','background':'#ffffff'});if($("#price_range_min_value").val()==""||$("#price_range_min_value").val()<parseInt(get_min_val)||$("#price_range_min_value").val()>parseInt(get_max_val)){$('#price_range_min_value').css({'border-color':'red','background':'#f2dede'});$('span#submit-error').addClass("price_error_message");$('span#submit-error').html("Invalid Input");return false}
if($("#price_range_max_value").val()==""||$("#price_range_max_value").val()<parseInt(get_min_val)||$("#price_range_max_value").val()>parseInt(get_max_val)){$('#price_range_max_value').css({'border-color':'red','background':'#f2dede'});$('span#submit-error').addClass("price_error_message");$('span#submit-error').html("Invalid Input");return false}
if(parseFloat($("#price_range_max_value").val())<=parseFloat($("#price_range_min_value").val())){$('span#submit-error').addClass("price_error_message");$('span#submit-error').html("Minimum amount can't be more or equal to maximum amount");return false}
else{$("form.js_attributes").submit();}})
var lowerSlider=document.querySelector('#priceRangeLower');var upperSlider=document.querySelector('#priceRangeUpper');document.querySelector('#price_range_max_value').value=parseInt(upperSlider.value);document.querySelector('#price_range_min_value').value=parseInt(lowerSlider.value);var lowerVal=parseInt(current_min_val);var upperVal=parseInt(current_max_val);upperSlider.oninput=function(){lowerVal=parseInt(lowerSlider.value);upperVal=parseInt(upperSlider.value);if(upperVal<lowerVal+4){lowerSlider.value=upperVal-4;if(lowerVal==lowerSlider.min){upperSlider.value=4;}}
if(parseInt(this.value)<=lowerVal){$('span#submit-error').addClass("price_error_message");$('span#submit-error').html("Maximum amount can't be less or equal to minimum amount");document.querySelector('#price_range_max_value').value=lowerVal}else{$('span#submit-error').removeClass("price_error_message").html('');document.querySelector('#price_range_max_value').value=parseInt(this.value)}};lowerSlider.oninput=function(){lowerVal=parseInt(lowerSlider.value);upperVal=parseInt(upperSlider.value);if(lowerVal>upperVal-4){upperSlider.value=lowerVal+4;if(upperVal==upperSlider.max){lowerSlider.value=parseInt(upperSlider.max)-4;}}
if(parseInt(this.value)>=upperVal){$('span#submit-error').addClass("price_error_message");$('span#submit-error').html("Minimum amount can't be more or equal to maximum amount");document.querySelector('#price_range_min_value').value=upperVal}else{$('span#submit-error').removeClass("price_error_message").html('');document.querySelector('#price_range_min_value').value=parseInt(this.value)}};lowerSlider.value=lowerVal;upperSlider.value=upperVal;}
$(window).load(function(){if($("body").find(".website_search_form_main").length>0)
{$(".t_header_search").each(function(){$(this).find("form").attr("action","/search-result");})
$(".website_search_form_main").html("");}})
$(document).ready(function(){var maxLength=26;var ellipsestext="...";var moretext="More";var lesstext="less";$(".more").each(function(){var myStr=$(this).text();if($.trim(myStr).length>maxLength){var newStr=myStr.substring(0,maxLength);var removedStr=myStr.substring(maxLength,$.trim(myStr).length);var html=newStr+'<span class="moreellipses">'+ellipsestext+'&nbsp;</span><span class="morecontent"><span>'+removedStr+'</span>&nbsp;&nbsp;<a href="" class="read-more">'+moretext+'</a></span>';$(this).html(html);}});$(".read-more").click(function(){if($(this).hasClass("less")){$(this).removeClass("less");$(this).html(moretext);}else{$(this).addClass("less");$(this).html(lesstext);}
$(this).parent().prev().toggle();$(this).prev().toggle();return false;});});});;

/* /theme_plenus/static/src/js/offer_snippent_frontend.js defined in bundle 'web.assets_frontend' */
odoo.define('theme_plenus.front_js',function(require){'use strict';var sAnimation=require('website.content.snippets.animation');var ajax=require("web.ajax");sAnimation.registry.js_timer=sAnimation.Class.extend({selector:".js_timer",start:function(){this.redrow();},stop:function(){this.clean();},redrow:function(debug){this.clean(debug);this.build(debug);},clean:function(debug){this.$target.empty();},build:function(debug)
{var self=this;var date=self.$target.data("date");if(date!="nan")
{var countDownDate=new Date(date).getTime();var x=setInterval(function(){var now=new Date().getTime();var distance=countDownDate-now;if(distance>0){var days=Math.floor(distance/(1000*60*60*24));var hours=Math.floor((distance%(1000*60*60*24))/(1000*60*60));var minutes=Math.floor((distance%(1000*60*60))/(1000*60));var seconds=Math.floor((distance%(1000*60))/1000);if((seconds+'').length==1){seconds="0"+seconds;}
if((days+'').length==1){days="0"+days;}
if((hours+'').length==1){hours="0"+hours;}
if((minutes+'').length==1){minutes="0"+minutes;}}
if(distance<=0)
{clearInterval(x);seconds="00";days="00";minutes="00";hours="00";$('.js_timer_div').empty();}
if(self.$target.find(".snippet_right_timer_div"))
{self.$target.find(".snippet_right_timer_div").remove()
var append_data="<div class='snippet_right_timer_div text-left mt16 date_time'><span class='col-lg-3 col-md-3 col-sm-3 col-3 text-center d-inline-block p-0 pr-4'><div class='rounded_digit py-3'><span id='days' class='d-block  t_days_hr_min_sec_digit text-black o_default_snippet_text'>"+days+"</span><span id='d_lbl' class='d-block'>Days</span></div></span><span class='col-lg-3 col-md-3 col-sm-3 col-3 text-center d-inline-block p-0 pr-4'><div class='rounded_digit py-3'><span id='hours' class='d-block  t_days_hr_min_sec_digit text-black o_default_snippet_text'>"+hours+"</span><span id='h_lbl' class='d-block'>Hrs</span></div></span><span class='col-lg-3 col-md-3 col-sm-3 col-3 text-center d-inline-block p-0 pr-4'><div class='rounded_digit py-3'><span id='minutes' class='d-block t_days_hr_min_sec_digit text-black o_default_snippet_text'>"+minutes+"</span><span id='m_lbl' class=' d-block'>Mins</span></div></span><span class='col-lg-3 col-md-3 col-sm-3 col-3 text-center d-inline-block p-0 pr-4'><div class='rounded_digit py-3'><span id='seconds' class='d-block t_days_hr_min_sec_digit text-black o_default_snippet_text'>"+seconds+"</span><span id='s_lbl' class='d-block'>Secs</span></div></span></div>";self.$target.find(".snippet_right_timer_div").css("display","block")
self.$target.append(append_data)}},1000);}}});});;

/* /theme_plenus/static/src/js/category_carousel.js defined in bundle 'web.assets_frontend' */
odoo.define('category_carousel.frontend_js',function(require){'use strict';var category_carousel_slider=require('website.content.snippets.animation');var ajax=require("web.ajax");category_carousel_slider.registry.category_carousel_js=category_carousel_slider.Class.extend({selector:".category_carousel_js",start:function(){this.redrow();},stop:function(){this.clean();},redrow:function(debug){this.clean(debug);this.build(debug);},clean:function(debug){this.$target.empty();},build:function(debug)
{var self=this;var new1=self.$target.attr("data-list-id");ajax.jsonRpc('/category/slider/data','call',{'product_list_id':new1}).then(function(data){$(self.$target).html(data);if($(window).width()>1200)
{$("#myCarousel_filter_product").each(function(){var index=$(this).parents(".js_snippet").index();var self=$(this).attr("id","myCarousel_filter_product"+index);var f_slides=$(self).find(".carousel-item").length;if(f_slides>4)
{$(self).find(".carousel-item").first().addClass("active");$(self).find('.carousel-item').each(function(){var next=$(this).next();if(!next.length){next=$(this).siblings(':first');}
next.children(':first-child').clone().appendTo($(this));for(var i=0;i<2;i++){next=next.next();if(!next.length){next=$(this).siblings(':first');}
next.children(':first-child').clone().appendTo($(this));}})
var s_id=$(self).attr("id");$(self).find(".left.carousel-control").attr("href","#"+s_id)
$(self).find(".right.carousel-control").attr("href","#"+s_id)}
else
{$(self).find(".carousel-item").addClass("active");}})
$("#myCarousel_product").each(function(){var index=$(this).parents(".js_snippet").index();var self=$(this).attr("id","myCarousel_product"+index);var f_slides=$(self).find(".carousel-item").length;if(f_slides>4)
{$(self).find(".carousel-item").first().addClass("active");$(self).find('.carousel-item').each(function(){var next=$(this).next();if(!next.length){next=$(this).siblings(':first');}
next.children(':first-child').clone().appendTo($(this));for(var i=0;i<2;i++){next=next.next();if(!next.length){next=$(this).siblings(':first');}
next.children(':first-child').clone().appendTo($(this));}})
var s_id=$(self).attr("id");$(self).find(".left.carousel-control").attr("href","#"+s_id)
$(self).find(".right.carousel-control").attr("href","#"+s_id)}
else
{$(self).find(".carousel-item").addClass("active");}})}});}});});;

/* /theme_plenus/static/src/js/slider.js defined in bundle 'web.assets_frontend' */
odoo.define('website_slider.front_js',function(require){'use strict';var sAnimations=require('website.content.snippets.animation');var ajax=require("web.ajax");var wSaleUtils=require('website_sale.utils');var sale=new sAnimations.registry.WebsiteSale();var wish=new sAnimations.registry.ProductWishlist();sAnimations.registry.js_slider_snippet=sAnimations.Class.extend({selector:".js_slider_snippet",start:function(){this.redrow();},stop:function(){this.clean();},redrow:function(debug){this.clean(debug);this.build(debug);},clean:function(debug){this.$target.empty();},build:function(debug){var self=this;var slider_id=self.$target.attr("data-slider-id");var date=self.$target.attr("data-date-time");function slider_wishlist(){wish.willStart()
$(self.$target).find(".o_add_wishlist").click(function(event){event.stopImmediatePropagation();$(this).prop("disabled",true).addClass('disabled');var productId=parseInt($(this).attr('data-product-product-id'),10);$("[data-product-product-id='"+productId+"']").prop("disabled",true).addClass('disabled');if(productId&&!_.contains(wish.wishlistProductIDs,productId)){self._rpc({route:'/shop/wishlist/add',params:{product_id:productId,},}).then(function(){wish.wishlistProductIDs.push(productId);wish._updateWishlistView();wSaleUtils.animateClone($('#my_wish'),$(this).closest('form'),25,40);}).fail(function(){$(this).prop("disabled",false).removeClass('disabled');var wproductId=parseInt($(this).attr('data-product-product-id'),10);$("[data-product-product-id='"+wproductId+"']").prop("disabled",false).removeClass('disabled');});}})}
function slider_carousel()
{$(self.$target).find("#myCarousel_filter_product").each(function(){var index=$(this).parents(".js_slider_snippet").index()
var id_val=$(this).parents(".js_slider_snippet").find(".js_filter_change.active").attr("data-id");var self=$(this).attr("id","myCarousel_filter_product"+index+"_"+id_val);var f_slides=$(this).find(".carousel-item").length;if(f_slides>4){$(this).find(".carousel-item").first().addClass("active");var s_id=$(self).attr("id");$(this).find(".carousel-control-prev").attr("data-target","#"+s_id)
$(this).find(".carousel-control-next").attr("data-target","#"+s_id)}
else{if(window.innerWidth<=992&&window.innerWidth>576){if(f_slides>2){$(this).find(".carousel-item").first().addClass("active");var s_id=$(self).attr("id");$(this).find(".carousel-control-prev").attr("data-target","#"+s_id)
$(this).find(".carousel-control-next").attr("data-target","#"+s_id)}
else{$(this).find(".carousel-control-prev").css("display","none");$(this).find(".carousel-control-next").css("display","none");$(this).find(".carousel-item").addClass("active");}}
else if(window.innerWidth<=576){if(f_slides>1){$(this).find(".carousel-inner").before('<div><a class="carousel-control-prev" data-target="#myCarousel_filter_product0_undefined" data-slide="prev"><i class="fa fa-chevron-left fa-lg text-muted"></i></a><a class="carousel-control-next" data-target="#myCarousel_filter_product0_undefined" data-slide="next"><i class="fa fa-chevron-right fa-lg text-muted"></i></a></div>')
$(this).find(".carousel-item").first().addClass("active");var s_id=$(self).attr("id");$(this).find(".carousel-control-prev").attr("data-target","#"+s_id)
$(this).find(".carousel-control-next").attr("data-target","#"+s_id)}
else{$(this).find(".carousel-control-prev").css("display","none");$(this).find(".carousel-control-next").css("display","none");$(this).find(".carousel-item").addClass("active");}}
else{$(this).find(".carousel-control-prev").css("display","none");$(this).find(".carousel-control-next").css("display","none");$(this).find(".carousel-item").addClass("active");}}
self.on('slide.bs.carousel',function(e){var $e=$(e.relatedTarget);var idx=$e.index();if(window.innerWidth<=992){var itemsPerSlide=2;}
else{var itemsPerSlide=4;}
var totalItems=self.find('.carousel-item').length;if(idx>=totalItems-(itemsPerSlide-1)){var it=itemsPerSlide-(totalItems-idx);for(var i=0;i<it;i++){if(e.direction=="left"){self.find('.carousel-item').eq(i).appendTo(self.find('.carousel-inner'));}
else{self.find('.carousel-item').eq(0).appendTo(self.find('.carousel-inner'));}}}});})}
function slider_render(target)
{$(target).find(".js_filter_change").click(function(){$('.cus_theme_loader_layout').removeClass('d-none');var filter_id=$(this).attr('data-id')
$(target).find(".js_filter_change").removeClass('active')
$(this).addClass('active')
var current_filter=$(self.$target).find("div[filter-id='"+filter_id+"']");$(target).find(".js_filter_data").hide()
if(current_filter.length==1){$('.cus_theme_loader_layout').addClass('d-none');$('.cus_theme_loader_layout').addClass('hidden');current_filter.show()}
else{ajax.jsonRpc('/slider/render','call',{'slider_id':slider_id,'filter_id':filter_id}).then(function(data){$('.cus_theme_loader_layout').addClass('d-none');$('.cus_theme_loader_layout').addClass('hidden');$(target).find(".js_data_container").append($(data).find(".js_filter_data"))
$(target).find(".a-submit").click(function(event){sale._onClickSubmit(event)})
slider_wishlist()
slider_carousel()})}})}
ajax.jsonRpc('/slider/render','call',{'slider_id':slider_id}).then(function(data){$(self.$target).html(data);$(self.$target).find(".js_filter_change").first().addClass("active");slider_render($(self.$target))
$(self.$target).find(".a-submit").click(function(event){sale._onClickSubmit(event)})
slider_wishlist()
slider_carousel()});}});});;

/* /website_sale_stock/static/src/js/product_configurator_mixin.js defined in bundle 'web.assets_frontend' */
odoo.define('website_sale_stock.ProductConfiguratorMixin',function(require){'use strict';var ProductConfiguratorMixin=require('sale.ProductConfiguratorMixin');var sAnimations=require('website.content.snippets.animation');var ajax=require('web.ajax');var core=require('web.core');var QWeb=core.qweb;var xml_load=ajax.loadXML('/website_sale_stock/static/src/xml/website_sale_stock_product_availability.xml',QWeb);ProductConfiguratorMixin._onChangeCombinationStock=function(ev,$parent,combination){var product_id=0;if($parent.find('input.product_id:checked').length){product_id=$parent.find('input.product_id:checked').val();}else{product_id=$parent.find('.product_id').val();}
var isMainProduct=combination.product_id&&($parent.is('.js_main_product')||$parent.is('.main_product'))&&combination.product_id===parseInt(product_id);if(!this.isWebsite||!isMainProduct){return;}
var qty=$parent.find('input[name="add_qty"]').val();$parent.find('#add_to_cart').removeClass('out_of_stock');if(combination.product_type==='product'&&_.contains(['always','threshold'],combination.inventory_availability)){combination.virtual_available-=parseInt(combination.cart_qty);if(combination.virtual_available<0){combination.virtual_available=0;}
if(qty>combination.virtual_available){var $input_add_qty=$parent.find('input[name="add_qty"]');qty=combination.virtual_available||1;$input_add_qty.val(qty);}
if(qty>combination.virtual_available||combination.virtual_available<1||qty<1){$parent.find('#add_to_cart').addClass('disabled out_of_stock');}}
xml_load.then(function(){$('.oe_website_sale').find('.availability_message_'+combination.product_template).remove();var $message=$(QWeb.render('website_sale_stock.product_availability',combination));$('div.availability_messages').html($message);});};sAnimations.registry.WebsiteSale.include({_onChangeCombination:function(){this._super.apply(this,arguments);ProductConfiguratorMixin._onChangeCombinationStock.apply(this,arguments);}});return ProductConfiguratorMixin;});;

/* /website_event_questions/static/src/js/website_event_questions.js defined in bundle 'web.assets_frontend' */
odoo.define('website_event_questions.website_event_questions',function(require){'use strict';var EventRegistrationForm=require('website_event.website_event');EventRegistrationForm.include({on_click:function(ev){var def=this._super.apply(this,arguments);def.then(function(){$("select.o_specific_answer,select.o_general_answer").each(function(index,elem){$(elem).select2({minimumResultsForSearch:-1,width:'100%'});});});},});});;

/* /website_event_track/static/src/js/website_event_track.js defined in bundle 'web.assets_frontend' */
odoo.define('website_event_track.website_event_track',function(require){"use strict";$(document).ready(function(){$("#event_track_search").bind('keyup',function(){var change_text=$(this).val();$('.event_track').removeClass('invisible');$("#search_summary").removeClass('invisible');if(change_text){$("#search_number").text($(".event_track:containsLike("+change_text+")").length);$(".event_track:not(:containsLike("+change_text+"))").addClass('invisible');}else{$("#search_number").text(30);}
event.preventDefault();});});});;

/* /account/static/src/js/account_portal_sidebar.js defined in bundle 'web.assets_frontend' */
odoo.define('account.AccountPortalSidebar.instance',function(require){"use strict";require('web.dom_ready');var AccountPortalSidebar=require('account.AccountPortalSidebar');if(!$('.o_portal_invoice_sidebar').length){return $.Deferred().reject("DOM doesn't contain '.o_portal_invoice_sidebar'");}
var account_portal_sidebar=new AccountPortalSidebar();return account_portal_sidebar.attachTo($('.o_portal_invoice_sidebar')).then(function(){return account_portal_sidebar;});});odoo.define('account.AccountPortalSidebar',function(require){"use strict";var PortalSidebar=require('portal.PortalSidebar');var AccountPortalSidebar=PortalSidebar.extend({events:{'click .o_portal_invoice_print':'_onPrintInvoice',},start:function(){var self=this;this._super.apply(this,arguments);var $invoiceHtml=this.$el.find('iframe#invoice_html');var updateIframeSize=self._updateIframeSize.bind(self,$invoiceHtml);$invoiceHtml.on('load',updateIframeSize);$(window).on('resize',updateIframeSize);},_updateIframeSize:function($el){var $wrapwrap=$el.contents().find('div#wrapwrap');$el.height(0);$el.height($wrapwrap[0].scrollHeight);},_onPrintInvoice:function(ev){ev.preventDefault();var href=$(ev.currentTarget).attr('href');this._printIframeContent(href);},});return AccountPortalSidebar;});;

/* /payment/static/lib/jquery.payment/jquery.payment.js defined in bundle 'web.assets_frontend' */
(function(){var $,cardFromNumber,cardFromType,cards,defaultFormat,formatBackCardNumber,formatBackExpiry,formatCardNumber,formatExpiry,formatForwardExpiry,formatForwardSlash,hasTextSelected,luhnCheck,reFormatCardNumber,restrictCVC,restrictCardNumber,restrictExpiry,restrictNumeric,setCardType,__slice=[].slice,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i;}return-1;},_this=this;$=jQuery;$.payment={};$.payment.fn={};$.fn.payment=function(){var args,method;method=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];return $.payment.fn[method].apply(this,args);};defaultFormat=/(\d{1,4})/g;cards=[{type:'maestro',pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,format:defaultFormat,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:true},{type:'dinersclub',pattern:/^(36|38|30[0-5])/,format:defaultFormat,length:[14],cvcLength:[3],luhn:true},{type:'laser',pattern:/^(6706|6771|6709)/,format:defaultFormat,length:[16,17,18,19],cvcLength:[3],luhn:true},{type:'jcb',pattern:/^35/,format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:'unionpay',pattern:/^62/,format:defaultFormat,length:[16,17,18,19],cvcLength:[3],luhn:false},{type:'discover',pattern:/^(6011|65|64[4-9]|622)/,format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:'mastercard',pattern:/^5[1-5]/,format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:'amex',pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:true},{type:'visa',pattern:/^4/,format:defaultFormat,length:[13,14,15,16],cvcLength:[3],luhn:true}];cardFromNumber=function(num){var card,_i,_len;num=(num+'').replace(/\D/g,'');for(_i=0,_len=cards.length;_i<_len;_i++){card=cards[_i];if(card.pattern.test(num)){return card;}}};cardFromType=function(type){var card,_i,_len;for(_i=0,_len=cards.length;_i<_len;_i++){card=cards[_i];if(card.type===type){return card;}}};luhnCheck=function(num){var digit,digits,odd,sum,_i,_len;odd=true;sum=0;digits=(num+'').split('').reverse();for(_i=0,_len=digits.length;_i<_len;_i++){digit=digits[_i];digit=parseInt(digit,10);if((odd=!odd)){digit*=2;}
if(digit>9){digit-=9;}
sum+=digit;}
return sum%10===0;};hasTextSelected=function($target){var _ref;if(($target.prop('selectionStart')!=null)&&$target.prop('selectionStart')!==$target.prop('selectionEnd')){return true;}
if(typeof document!=="undefined"&&document!==null?(_ref=document.selection)!=null?typeof _ref.createRange==="function"?_ref.createRange().text:void 0:void 0:void 0){return true;}
return false;};reFormatCardNumber=function(e){var _this=this;return setTimeout(function(){var $target,value;$target=$(e.currentTarget);value=$target.val();value=$.payment.formatCardNumber(value);return $target.val(value);});};formatCardNumber=function(e){var $target,card,digit,length,re,upperLength,value;digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
$target=$(e.currentTarget);value=$target.val();card=cardFromNumber(value+digit);length=(value.replace(/\D/g,'')+digit).length;upperLength=16;if(card){upperLength=card.length[card.length.length-1];}
if(length>=upperLength){return;}
if(($target.prop('selectionStart')!=null)&&$target.prop('selectionStart')!==value.length){return;}
if(card&&card.type==='amex'){re=/^(\d{4}|\d{4}\s\d{6})$/;}else{re=/(?:^|\s)(\d{4})$/;}
if(re.test(value)){e.preventDefault();return $target.val(value+' '+digit);}else if(re.test(value+digit)){e.preventDefault();return $target.val(value+digit+' ');}};formatBackCardNumber=function(e){var $target,value;$target=$(e.currentTarget);value=$target.val();if(e.meta){return;}
if(e.which!==8){return;}
if(($target.prop('selectionStart')!=null)&&$target.prop('selectionStart')!==value.length){return;}
if(/\d\s$/.test(value)){e.preventDefault();return $target.val(value.replace(/\d\s$/,''));}else if(/\s\d?$/.test(value)){e.preventDefault();return $target.val(value.replace(/\s\d?$/,''));}};formatExpiry=function(e){var $target,digit,val;digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
$target=$(e.currentTarget);val=$target.val()+digit;if(/^\d$/.test(val)&&(val!=='0'&&val!=='1')){e.preventDefault();return $target.val("0"+val+" / ");}else if(/^\d\d$/.test(val)){e.preventDefault();return $target.val(""+val+" / ");}};formatForwardExpiry=function(e){var $target,digit,val;digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
$target=$(e.currentTarget);val=$target.val();if(/^\d\d$/.test(val)){return $target.val(""+val+" / ");}};formatForwardSlash=function(e){var $target,slash,val;slash=String.fromCharCode(e.which);if(slash!=='/'){return;}
$target=$(e.currentTarget);val=$target.val();if(/^\d$/.test(val)&&val!=='0'){return $target.val("0"+val+" / ");}};formatBackExpiry=function(e){var $target,value;if(e.meta){return;}
$target=$(e.currentTarget);value=$target.val();if(e.which!==8){return;}
if(($target.prop('selectionStart')!=null)&&$target.prop('selectionStart')!==value.length){return;}
if(/\d(\s|\/)+$/.test(value)){e.preventDefault();return $target.val(value.replace(/\d(\s|\/)*$/,''));}else if(/\s\/\s?\d?$/.test(value)){e.preventDefault();return $target.val(value.replace(/\s\/\s?\d?$/,''));}};restrictNumeric=function(e){var input;if(e.metaKey||e.ctrlKey){return true;}
if(e.which===32){return false;}
if(e.which===0){return true;}
if(e.which<33){return true;}
input=String.fromCharCode(e.which);return!!/[\d\s]/.test(input);};restrictCardNumber=function(e){var $target,card,digit,value;$target=$(e.currentTarget);digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
if(hasTextSelected($target)){return;}
value=($target.val()+digit).replace(/\D/g,'');card=cardFromNumber(value);if(card){return value.length<=card.length[card.length.length-1];}else{return value.length<=16;}};restrictExpiry=function(e){var $target,digit,value;$target=$(e.currentTarget);digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
if(hasTextSelected($target)){return;}
value=$target.val()+digit;value=value.replace(/\D/g,'');if(value.length>6){return false;}};restrictCVC=function(e){var $target,digit,val;$target=$(e.currentTarget);digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return;}
val=$target.val()+digit;return val.length<=4;};setCardType=function(e){var $target,allTypes,card,cardType,val;$target=$(e.currentTarget);val=$target.val();cardType=$.payment.cardType(val)||'unknown';if(!$target.hasClass(cardType)){allTypes=(function(){var _i,_len,_results;_results=[];for(_i=0,_len=cards.length;_i<_len;_i++){card=cards[_i];_results.push(card.type);}
return _results;})();$target.removeClass('unknown');$target.removeClass(allTypes.join(' '));$target.addClass(cardType);$target.toggleClass('identified',cardType!=='unknown');return $target.trigger('payment.cardType',cardType);}};$.payment.fn.formatCardCVC=function(){this.payment('restrictNumeric');this.on('keypress',restrictCVC);return this;};$.payment.fn.formatCardExpiry=function(){this.payment('restrictNumeric');this.on('keypress',restrictExpiry);this.on('keypress',formatExpiry);this.on('keypress',formatForwardSlash);this.on('keypress',formatForwardExpiry);this.on('keydown',formatBackExpiry);return this;};$.payment.fn.formatCardNumber=function(){this.payment('restrictNumeric');this.on('keypress',restrictCardNumber);this.on('keypress',formatCardNumber);this.on('keydown',formatBackCardNumber);this.on('keyup',setCardType);this.on('paste',reFormatCardNumber);return this;};$.payment.fn.restrictNumeric=function(){this.on('keypress',restrictNumeric);return this;};$.payment.fn.cardExpiryVal=function(){return $.payment.cardExpiryVal($(this).val());};$.payment.cardExpiryVal=function(value){var month,prefix,year,_ref;value=value.replace(/\s/g,'');_ref=value.split('/',2),month=_ref[0],year=_ref[1];if((year!=null?year.length:void 0)===2&&/^\d+$/.test(year)){prefix=(new Date).getFullYear();prefix=prefix.toString().slice(0,2);year=prefix+year;}
month=parseInt(month,10);year=parseInt(year,10);return{month:month,year:year};};$.payment.validateCardNumber=function(num){var card,_ref;num=(num+'').replace(/\s+|-/g,'');if(!/^\d+$/.test(num)){return false;}
card=cardFromNumber(num);if(!card){return false;}
return(_ref=num.length,__indexOf.call(card.length,_ref)>=0)&&(card.luhn===false||luhnCheck(num));};$.payment.validateCardExpiry=function(month,year){var currentTime,expiry,prefix,_ref;if(typeof month==='object'&&'month'in month){_ref=month,month=_ref.month,year=_ref.year;}
if(!(month&&year)){return false;}
month=$.trim(month);year=$.trim(year);if(!/^\d+$/.test(month)){return false;}
if(!/^\d+$/.test(year)){return false;}
if(!(parseInt(month,10)<=12)){return false;}
if(year.length===2){prefix=(new Date).getFullYear();prefix=prefix.toString().slice(0,2);year=prefix+year;}
expiry=new Date(year,month);currentTime=new Date;expiry.setMonth(expiry.getMonth()-1);expiry.setMonth(expiry.getMonth()+1,1);return expiry>currentTime;};$.payment.validateCardCVC=function(cvc,type){var _ref,_ref1;cvc=$.trim(cvc);if(!/^\d+$/.test(cvc)){return false;}
if(type){return _ref=cvc.length,__indexOf.call((_ref1=cardFromType(type))!=null?_ref1.cvcLength:void 0,_ref)>=0;}else{return cvc.length>=3&&cvc.length<=4;}};$.payment.cardType=function(num){var _ref;if(!num){return null;}
return((_ref=cardFromNumber(num))!=null?_ref.type:void 0)||null;};$.payment.formatCardNumber=function(num){var card,groups,upperLength,_ref;card=cardFromNumber(num);if(!card){return num;}
upperLength=card.length[card.length.length-1];num=num.replace(/\D/g,'');num=num.slice(0,+upperLength+1||9e9);if(card.format.global){return(_ref=num.match(card.format))!=null?_ref.join(' '):void 0;}else{groups=card.format.exec(num);if(groups!=null){groups.shift();}
return groups!=null?groups.join(' '):void 0;}};}).call(this);;

/* /payment/static/src/js/payment_portal.js defined in bundle 'web.assets_frontend' */
$(document).ready(function(){$('input#cc_number').payment('formatCardNumber');$('input#cc_cvc').payment('formatCardCVC');$('input#cc_expiry').payment('formatCardExpiry')
$('input#cc_number').on('focusout',function(e){var valid_value=$.payment.validateCardNumber(this.value);var card_type=$.payment.cardType(this.value);if(card_type){$(this).parent('.form-group').children('.card_placeholder').removeClass().addClass('card_placeholder '+card_type);$(this).parent('.form-group').children('input[name="cc_brand"]').val(card_type)}
else{$(this).parent('.form-group').children('.card_placeholder').removeClass().addClass('card_placeholder');}
if(valid_value){$(this).parent('.form-group').addClass('o_has_success').find('.form-control, .custom-select').addClass('is-valid');$(this).parent('.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');$(this).siblings('.o_invalid_field').remove();}
else{$(this).parent('.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');$(this).parent('.form-group').removeClass('o_has_success').find('.form-control, .custom-select').removeClass('is-valid');}});$('input#cc_cvc').on('focusout',function(e){var cc_nbr=$(this).parents('.oe_cc').find('#cc_number').val();var card_type=$.payment.cardType(cc_nbr);var valid_value=$.payment.validateCardCVC(this.value,card_type);if(valid_value){$(this).parent('.form-group').addClass('o_has_success').find('.form-control, .custom-select').addClass('is-valid');$(this).parent('.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');$(this).siblings('.o_invalid_field').remove();}
else{$(this).parent('.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');$(this).parent('.form-group').removeClass('o_has_success').find('.form-control, .custom-select').removeClass('is-valid');}});$('input#cc_expiry').on('focusout',function(e){var expiry_value=$.payment.cardExpiryVal(this.value);var month=expiry_value.month||'';var year=expiry_value.year||'';var valid_value=$.payment.validateCardExpiry(month,year);if(valid_value){$(this).parent('.form-group').addClass('o_has_success').find('.form-control, .custom-select').addClass('is-valid');$(this).parent('.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');$(this).siblings('.o_invalid_field').remove();}
else{$(this).parent('.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');$(this).parent('.form-group').removeClass('o_has_success').find('.form-control, .custom-select').removeClass('is-valid');}});$('select[name="pm_acquirer_id"]').on('change',function(){var acquirer_id=$(this).val();$('.acquirer').addClass('d-none');$('.acquirer[data-acquirer-id="'+acquirer_id+'"]').removeClass('d-none');});});;

/* /payment/static/src/js/payment_transaction_portal.js defined in bundle 'web.assets_frontend' */
;

/* /payment/static/src/js/payment_form.js defined in bundle 'web.assets_frontend' */
odoo.define('payment.payment_form',function(require){"use strict";var ajax=require('web.ajax');var config=require('web.config');var core=require('web.core');var dom=require('web.dom');var Dialog=require("web.Dialog");var Widget=require("web.Widget");var rpc=require("web.rpc");var _t=core._t;var PaymentForm=Widget.extend({events:{'click #o_payment_form_pay':'payEvent','click #o_payment_form_add_pm':'addPmEvent','click button[name="delete_pm"]':'deletePmEvent','click input[type="radio"]':'radioClickEvent','click .o_payment_form_pay_icon_more':'onClickMorePaymentIcon',},init:function(parent,options){this._super.apply(this,arguments);this.options=_.extend(options||{},{});this.payEvent=dom.makeButtonHandler(this.payEvent);},start:function(){this.updateNewPaymentDisplayStatus();$('[data-toggle="tooltip"]').tooltip();},disableButton:function(button){$(button).attr('disabled',true);$(button).children('.fa-lock').removeClass('fa-lock');$(button).prepend('<span class="o_loader"><i class="fa fa-refresh fa-spin"></i>&nbsp;</span>');},enableButton:function(button){$(button).attr('disabled',false);$(button).children('.fa').addClass('fa-lock');$(button).find('span.o_loader').remove();},payEvent:function(ev){ev.preventDefault();var form=this.el;var checked_radio=this.$('input[type="radio"]:checked');var self=this;var button=ev.target;if(checked_radio.length===1){checked_radio=checked_radio[0];var acquirer_id=this.getAcquirerIdFromRadio(checked_radio);var acquirer_form=false;if(this.isNewPaymentRadio(checked_radio)){acquirer_form=this.$('#o_payment_add_token_acq_'+acquirer_id);}else{acquirer_form=this.$('#o_payment_form_acq_'+acquirer_id);}
var inputs_form=$('input',acquirer_form);var ds=$('input[name="data_set"]',acquirer_form)[0];if(this.isNewPaymentRadio(checked_radio)){if(this.options.partnerId===undefined){console.warn('payment_form: unset partner_id when adding new token; things could go wrong');}
var form_data=this.getFormData(inputs_form);var wrong_input=false;inputs_form.toArray().forEach(function(element){if($(element).attr('type')=='hidden'){return true;}
$(element).closest('div.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');$(element).siblings(".o_invalid_field").remove();$(element).trigger("focusout");if(element.dataset.isRequired&&element.value.length===0){$(element).closest('div.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');$(element).closest('div.form-group').append('<div style="color: red" class="o_invalid_field" aria-invalid="true">'+_.str.escapeHTML("The value is invalid.")+'</div>');wrong_input=true;}
else if($(element).closest('div.form-group').hasClass('o_has_error')){wrong_input=true;$(element).closest('div.form-group').append('<div style="color: red" class="o_invalid_field" aria-invalid="true">'+_.str.escapeHTML("The value is invalid.")+'</div>');}});if(wrong_input){return;}
this.disableButton(button);var verify_validity=this.$el.find('input[name="verify_validity"]');if(verify_validity.length>0){form_data.verify_validity=verify_validity[0].value==="1";}
return ajax.jsonRpc(ds.dataset.createRoute,'call',form_data).then(function(data){if(data.result){if(data['3d_secure']!==false){$("body").html(data['3d_secure']);}
else{checked_radio.value=data.id;form.submit();return $.Deferred();}}
else{if(data.error){self.displayError('',data.error);}else{self.displayError(_t('Server Error'),_t('e.g. Your credit card details are wrong. Please verify.'));}}
self.enableButton(button);}).fail(function(error,event){self.enableButton(button);self.displayError(_t('Server Error'),_t("We are not able to add your payment method at the moment.")+
error.data.message);});}
else if(this.isFormPaymentRadio(checked_radio)){var $tx_url=this.$el.find('input[name="prepare_tx_url"]');if($tx_url.length===1){var form_save_token=acquirer_form.find('input[name="o_payment_form_save_token"]').prop('checked');return ajax.jsonRpc($tx_url[0].value,'call',{'acquirer_id':parseInt(acquirer_id),'save_token':form_save_token,'access_token':self.options.accessToken,'success_url':self.options.successUrl,'error_url':self.options.errorUrl,'callback_method':self.options.callbackMethod,'order_id':self.options.orderId,}).then(function(result){if(result){var newForm=document.createElement('form');newForm.setAttribute("method","post");newForm.setAttribute("provider",checked_radio.dataset.provider);newForm.hidden=true;newForm.innerHTML=result;var action_url=$(newForm).find('input[name="data_set"]').data('actionUrl');newForm.setAttribute("action",action_url);$(document.getElementsByTagName('body')[0]).append(newForm);$(newForm).find('input[data-remove-me]').remove();if(action_url){newForm.submit();return $.Deferred();}}
else{self.displayError(_t('Server Error'),_t("We are not able to redirect you to the payment form."));}}).fail(function(error,event){self.displayError(_t('Server Error'),_t("We are not able to redirect you to the payment form. ")+
error.data.message);});}
else{this.displayError(_t("Cannot set-up the payment"),_t("We're unable to process your payment."));}}
else{this.disableButton(button);form.submit();return $.Deferred();}}
else{this.displayError(_t('No payment method selected'),_t('Please select a payment method.'));}},addPmEvent:function(ev){ev.stopPropagation();ev.preventDefault();var checked_radio=this.$('input[type="radio"]:checked');var self=this;var button=ev.target;if(checked_radio.length===1&&this.isNewPaymentRadio(checked_radio[0])){checked_radio=checked_radio[0];var acquirer_id=this.getAcquirerIdFromRadio(checked_radio);var acquirer_form=this.$('#o_payment_add_token_acq_'+acquirer_id);var inputs_form=$('input',acquirer_form);var form_data=this.getFormData(inputs_form);var ds=$('input[name="data_set"]',acquirer_form)[0];var wrong_input=false;inputs_form.toArray().forEach(function(element){if($(element).attr('type')=='hidden'){return true;}
$(element).closest('div.form-group').removeClass('o_has_error').find('.form-control, .custom-select').removeClass('is-invalid');$(element).siblings(".o_invalid_field").remove();$(element).trigger("focusout");if(element.dataset.isRequired&&element.value.length===0){$(element).closest('div.form-group').addClass('o_has_error').find('.form-control, .custom-select').addClass('is-invalid');var message='<div style="color: red" class="o_invalid_field" aria-invalid="true">'+_.str.escapeHTML("The value is invalid.")+'</div>';$(element).closest('div.form-group').append(message);wrong_input=true;}
else if($(element).closest('div.form-group').hasClass('o_has_error')){wrong_input=true;var message='<div style="color: red" class="o_invalid_field" aria-invalid="true">'+_.str.escapeHTML("The value is invalid.")+'</div>';$(element).closest('div.form-group').append(message);}});if(wrong_input){return;}
$(button).attr('disabled',true);$(button).children('.fa-plus-circle').removeClass('fa-plus-circle')
$(button).prepend('<span class="o_loader"><i class="fa fa-refresh fa-spin"></i>&nbsp;</span>');form_data.verify_validity=true;ajax.jsonRpc(ds.dataset.createRoute,'call',form_data).then(function(data){if(data.result){if(data['3d_secure']!==false){$("body").html(data['3d_secure']);}
else{if(form_data.return_url){window.location=form_data.return_url;}
else{window.location.reload();}}}
else{if(data.error){self.displayError('',data.error);}else{self.displayError(_t('Server Error'),_t('e.g. Your credit card details are wrong. Please verify.'));}}
$(button).attr('disabled',false);$(button).children('.fa').addClass('fa-plus-circle')
$(button).find('span.o_loader').remove();}).fail(function(error,event){$(button).attr('disabled',false);$(button).children('.fa').addClass('fa-plus-circle')
$(button).find('span.o_loader').remove();self.displayError(_t('Server error'),_t("We are not able to add your payment method at the moment.</p>")+
error.data.message);});}
else{this.displayError(_t('No payment method selected'),_t('Please select the option to add a new payment method.'));}},deletePmEvent:function(ev){ev.stopPropagation();ev.preventDefault();var self=this;var pm_id=parseInt(ev.target.value);var tokenDelete=function(){rpc.query({model:'payment.token',method:'unlink',args:[pm_id],}).then(function(result){if(result===true){ev.target.closest('div').remove();}},function(){self.displayError(_t('Server Error'),_t("We are not able to delete your payment method at the moment."));});};rpc.query({model:'payment.token',method:'get_linked_records',args:[pm_id],}).then(function(result){if(result[pm_id].length>0){var content='';result[pm_id].forEach(function(sub){content+='<p><a href="'+sub.url+'" title="'+sub.description+'">'+sub.name+'</a><p/>';});content=$('<div>').html(_t('<p>This card is currently linked to the following records:<p/>')+content);new Dialog(self,{title:_t('Warning!'),size:'medium',$content:content,buttons:[{text:_t('Confirm Deletion'),classes:'btn-primary',close:true,click:tokenDelete},{text:_t('Cancel'),close:true}]}).open();}
else{tokenDelete();}},function(err,event){self.displayError(_t('Server Error'),_t("We are not able to delete your payment method at the moment.")+err.data.message);});},onClickMorePaymentIcon:function(ev){ev.preventDefault();var $listItems=$(ev.currentTarget).parents('ul').children('li');var $moreItem=$(ev.currentTarget).parents('li');$listItems.removeClass('d-none');$moreItem.addClass('d-none');},radioClickEvent:function(ev){this.updateNewPaymentDisplayStatus();},updateNewPaymentDisplayStatus:function()
{var checked_radio=this.$('input[type="radio"]:checked');this.$('[id*="o_payment_add_token_acq_"]').addClass('d-none');this.$('[id*="o_payment_form_acq_"]').addClass('d-none');if(checked_radio.length!==1){return;}
checked_radio=checked_radio[0];var acquirer_id=this.getAcquirerIdFromRadio(checked_radio);if(this.isNewPaymentRadio(checked_radio)){this.$('#o_payment_add_token_acq_'+acquirer_id).removeClass('d-none');}
else if(this.isFormPaymentRadio(checked_radio)){this.$('#o_payment_form_acq_'+acquirer_id).removeClass('d-none');}},isNewPaymentRadio:function(element){return $(element).data('s2s-payment')==='True';},isFormPaymentRadio:function(element){return $(element).data('form-payment')==='True';},getAcquirerIdFromRadio:function(element){return $(element).data('acquirer-id');},displayError:function(title,message){var $checkedRadio=this.$('input[type="radio"]:checked'),acquirerID=this.getAcquirerIdFromRadio($checkedRadio[0]);var $acquirerForm;if(this.isNewPaymentRadio($checkedRadio[0])){$acquirerForm=this.$('#o_payment_add_token_acq_'+acquirerID);}
else if(this.isFormPaymentRadio($checkedRadio[0])){$acquirerForm=this.$('#o_payment_form_acq_'+acquirerID);}
if($checkedRadio.length===0){return new Dialog(null,{title:_t('Error: ')+_.str.escapeHTML(title),size:'medium',$content:"<p>"+(_.str.escapeHTML(message)||"")+"</p>",buttons:[{text:_t('Ok'),close:true}]}).open();}else{this.$('#payment_error').remove();var messageResult='<div class="alert alert-danger mb4" id="payment_error">';if(title!=''){messageResult=messageResult+'<b>'+_.str.escapeHTML(title)+':</b></br>';}
messageResult=messageResult+_.str.escapeHTML(message)+'</div>';$acquirerForm.append(messageResult);}},getFormData:function($form){var unindexed_array=$form.serializeArray();var indexed_array={};$.map(unindexed_array,function(n,i){indexed_array[n.name]=n.value;});return indexed_array;},});$(function(){if(!$('.o_payment_form').length){console.log("DOM doesn't contain '.o_payment_form'");return;}
$('.o_payment_form').each(function(){var $elem=$(this);var form=new PaymentForm(null,$elem.data());form.attachTo($elem);});});return PaymentForm;});;

/* /payment/static/src/js/payment_processing.js defined in bundle 'web.assets_frontend' */
odoo.define('payment.processing',function(require){'use strict';var Widget=require('web.Widget');var Ajax=require('web.ajax');var Core=require('web.core');var Qweb=Core.qweb;var _t=Core._t;$.blockUI.defaults.css.border='0';$.blockUI.defaults.css["background-color"]='';$.blockUI.defaults.overlayCSS["opacity"]='0.9';return Widget.extend({_payment_tx_ids:null,_pollCount:0,events:{},xmlDependencies:['/payment/static/src/xml/payment_processing.xml'],init:function(parent,payment_tx_ids){this._super.apply(this,arguments);this._payment_tx_ids=payment_tx_ids;},start:function(){this.displayLoading();this.poll();return this._super.apply(this,arguments);},startPolling:function(){var timeout=3000;if(this._pollCount>=10&&this._pollCount<20){timeout=10000;}
else if(this._pollCount>=20){timeout=30000;}
setTimeout(this.poll.bind(this),timeout);this._pollCount++;},poll:function(){var self=this;Ajax.jsonRpc('/payment/process/poll','call',{}).then(function(data){if(data.success===true){self.processPolledData(data.transactions);}
else{switch(data.error){case"tx_process_retry":break;case"no_tx_found":self.displayContent("payment.no_tx_found",{});break;default:self.displayContent("payment.exception",{exception_msg:data.error});break;}}
self.startPolling();}).fail(function(e){self.displayContent("payment.rpc_error",{});self.startPolling();});},processPolledData:function(transactions){var render_values={'tx_draft':[],'tx_pending':[],'tx_authorized':[],'tx_done':[],'tx_cancel':[],'tx_error':[],};if(transactions.length>0&&transactions[0].acquirer_provider=='transfer'){window.location=transactions[0].return_url;return;}
transactions.forEach(function(tx){var key='tx_'+tx.state;if(key in render_values){render_values[key].push(tx);}});function countTxInState(states){var nbTx=0;for(var prop in render_values){if(states.indexOf(prop)>-1&&render_values.hasOwnProperty(prop)){nbTx+=render_values[prop].length;}}
return nbTx;}
if(countTxInState(['tx_done','tx_error'])===1){var tx=render_values['tx_done'][0]||render_values['tx_error'][0];if(tx){window.location=tx.return_url;return;}}
this.displayContent("payment.display_tx_list",render_values);},displayContent:function(xmlid,render_values){var html=Qweb.render(xmlid,render_values);$.unblockUI();this.$el.find('.o_payment_processing_content').html(html);},displayLoading:function(){var msg=_t("We are processing your payments, please wait ...");$.blockUI({'message':'<h2 class="text-white"><img src="/web/static/src/img/spin.png" class="fa-pulse"/>'+'    <br />'+msg+'</h2>'});},});});;

/* /sale/static/src/js/sale_portal_sidebar.js defined in bundle 'web.assets_frontend' */
odoo.define('sale.SalePortalSidebar.instance',function(require){"use strict";require('web.dom_ready');var SalePortalSidebar=require('sale.SalePortalSidebar');if(!$('.o_portal_sale_sidebar').length){return $.Deferred().reject("DOM doesn't contain '.o_portal_sale_sidebar'");}
var $spyWatch=$('body[data-target=".navspy"]'),sale_portal_sidebar=new SalePortalSidebar($spyWatch);return sale_portal_sidebar.attachTo($('.o_portal_sale_sidebar')).then(function(){return sale_portal_sidebar;});});odoo.define('sale.SalePortalSidebar',function(require){"use strict";var PortalSidebar=require('portal.PortalSidebar');var SalePortalSidebar=PortalSidebar.extend({init:function($watched_selector){this._super.apply(this,arguments);this.authorizedTextTag=['em','b','i','u'];this.spyWatched=$watched_selector;},start:function(){this._super.apply(this,arguments);var $spyWatcheElement=this.$el.find('[data-id="portal_sidebar"]');this._setElementId($spyWatcheElement);this._generateMenu();},_setElementId:function(prefix,$el){var id=_.uniqueId(prefix);this.spyWatched.find($el).attr('id',id);return id;},_generateMenu:function(){var self=this,lastLI=false,lastUL=null,$bsSidenav=this.$el.find('.bs-sidenav');$("#quote_content [id^=quote_header_], #quote_content [id^=quote_]",this.spyWatched).attr("id","");_.each(this.spyWatched.find("#quote_content h2, #quote_content h3"),function(el){var id,text;switch(el.tagName.toLowerCase()){case"h2":id=self._setElementId('quote_header_',el);text=self._extractText($(el));if(!text){break;}
lastLI=$("<li class='nav-item'>").append($('<a class="nav-link" style="max-width: 200px;" href="#'+id+'"/>').text(text)).appendTo($bsSidenav);lastUL=false;break;case"h3":id=self._setElementId('quote_',el);text=self._extractText($(el));if(!text){break;}
if(lastLI){if(!lastUL){lastUL=$("<ul class='nav flex-column'>").appendTo(lastLI);}
$("<li class='nav-item'>").append($('<a class="nav-link" style="max-width: 200px;" href="#'+id+'"/>').text(text)).appendTo(lastUL);}
break;}});},_extractText:function($node){var self=this;var rawText=[];_.each($node.contents(),function(el){var current=$(el);if($.trim(current.text())){var tagName=current.prop("tagName");if(_.isUndefined(tagName)||(!_.isUndefined(tagName)&&_.contains(self.authorizedTextTag,tagName.toLowerCase()))){rawText.push($.trim(current.text()));}}});return rawText.join(' ');},});return SalePortalSidebar;});;

/* /sale_management/static/src/js/sale_management.js defined in bundle 'web.assets_frontend' */
odoo.define('sale_management.sale_management',function(require){'use strict';require('web.dom_ready');var ajax=require('web.ajax');var Widget=require('web.Widget');if(!$('.o_portal_sale_sidebar').length){return $.Deferred().reject("DOM doesn't contain '.o_portal_sale_sidebar'");}
var UpdateLineButton=Widget.extend({events:{'click':'onClick',},start:function(){var self=this;return this._super.apply(this,arguments).then(function(){self.elems=self._getUpdatableElements();self.elems.$lineQuantity.change(function(ev){var quantity=parseInt(this.value);self._onChangeQuantity(quantity);});});},_onChangeQuantity:function(quantity){var href=this.$el.attr("href");var order_id=href.match(/my\/orders\/([0-9]+)/);var line_id=href.match(/update_line\/([0-9]+)/);var params={'line_id':parseInt(line_id[1]),'remove':this.$el.is('[href*="remove"]'),'unlink':this.$el.is('[href*="unlink"]'),'input_quantity':quantity>=0?quantity:false,};var token=href.match(/token=([\w\d-]*)/)[1];if(token){params.access_token=token;}
order_id=parseInt(order_id[1])
this._callUpdateLineRoute(order_id,params).then(this._updateOrderValues.bind(this));return false;},onClick:function(ev){ev.preventDefault();return this._onChangeQuantity();},_callUpdateLineRoute:function(order_id,params){var def=new $.Deferred();var url="/my/orders/"+order_id+"/update_line_dict";ajax.jsonRpc(url,'call',params).then(def.resolve.bind(def)).fail(function(){delete params.input_quantity;ajax.jsonRpc("/my/orders/"+order_id+"/update_line",'call',params).fail(def.reject.bind(def)).then(function(data){var actualData=data;if(data){actualData={order_amount_total:data[1],order_line_product_uom_qty:data[0],};}
def.resolve(actualData);});});return def;},_updateOrderValues:function(data){if(!data){window.location.reload();}
var orderAmountTotal=data.order_amount_total;var orderAmountUntaxed=data.order_amount_untaxed;var orderAmountTax=data.order_amount_tax;var orderAmountUndiscounted=data.order_amount_undiscounted;var orderTotalsTable=$(data.order_totals_table);var lineProductUomQty=data.order_line_product_uom_qty;var linePriceTotal=data.order_line_price_total;var linePriceSubTotal=data.order_line_price_subtotal;this.elems.$lineQuantity.val(lineProductUomQty)
if(this.elems.$linePriceTotal.length&&linePriceTotal!==undefined){this.elems.$linePriceTotal.text(linePriceTotal);}
if(this.elems.$linePriceSubTotal.length&&linePriceSubTotal!==undefined){this.elems.$linePriceSubTotal.text(linePriceSubTotal);}
if(orderAmountUntaxed!==undefined){this.elems.$orderAmountUntaxed.text(orderAmountUntaxed);}
if(orderAmountTotal!==undefined){this.elems.$orderAmountTotal.text(orderAmountTotal);}
if(orderAmountUndiscounted!==undefined){this.elems.$orderAmountUndiscounted.text(orderAmountUndiscounted);}
if(orderTotalsTable){this.elems.$orderTotalsTable.find('table').replaceWith(orderTotalsTable);}},_getUpdatableElements:function(){var $parentTr=this.$el.parents('tr:first');var $linePriceTotal=$parentTr.find('.oe_order_line_price_total .oe_currency_value');var $linePriceSubTotal=$parentTr.find('.oe_order_line_price_subtotal .oe_currency_value');if(!$linePriceTotal.length&&!$linePriceSubTotal.length){$linePriceTotal=$linePriceSubTotal=$parentTr.find('.oe_currency_value').last();}
var $orderAmountUntaxed=$('[data-id="total_untaxed"]').find('span, b');var $orderAmountTotal=$('[data-id="total_amount"]').find('span, b');var $orderAmountUndiscounted=$('[data-id="amount_undiscounted"]').find('span, b');if(!$orderAmountUntaxed.length){$orderAmountUntaxed=$orderAmountTotal.eq(1);$orderAmountTotal=$orderAmountTotal.eq(0).add($orderAmountTotal.eq(2));}
return{$lineQuantity:this.$el.parents('.input-group:first').find('.js_quantity'),$linePriceSubTotal:$linePriceSubTotal,$linePriceTotal:$linePriceTotal,$orderAmountUntaxed:$orderAmountUntaxed,$orderAmountTotal:$orderAmountTotal,$orderTotalsTable:$('#total'),$orderAmountUndiscounted:$orderAmountUndiscounted,}}});var update_button_list=[];$('a.js_update_line_json').each(function(index){var button=new UpdateLineButton();button.setElement($(this)).start();update_button_list.push(button);});});